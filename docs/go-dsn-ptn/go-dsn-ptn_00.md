# 前言

欢迎阅读《Go 设计模式》！通过这本书，你将学习使用 Go 语言的基本和高级技术和模式。如果你以前从未编写过 Go 代码，不用担心；本书将逐渐向你介绍 Go 编程中的各种概念。与此同时，专家们会在语言方面提供许多技巧和窍门，所以我鼓励你不要错过任何一章。如果你已经了解经典设计模式，你会发现这本书非常方便，不仅可以作为参考书，还可以作为学习 Go 惯用方法解决常见问题的方式。

本书分为三个部分：

+   Go 语言简介：这是本书的第一部分，你将学习基本语法、二进制发行版附带的工具、基本测试、JSON 解析等。我们将把并发留到后面的章节，以便专注于典型 Go 应用程序中的语法和编译器的工作方式。

+   Go 中的经典设计模式：第二部分介绍了经典设计模式，但正如我们将看到的那样，它们有所不同，部分原因是 Go 中缺乏继承，但也因为我们有不同且更优化的方式来解决相同的问题。对于该语言的新手来说，本节中的示例将非常有用，因为它们可以帮助理解 Go 的根源以及使用 Go 解决问题的惯用方式，就像你在 Java 或 C++等语言中解决问题一样。大多数示例都是使用 TDD 进行演示，其中一些示例甚至展示了 Go 标准库中使用这些模式的示例。

+   并发模式：本节的重点是学习并发结构和并行执行。你将学习 Go 中编写并发应用程序的大部分基本知识，并且我们将使用一些经典的设计模式来开发并发结构，以最大程度地实现并行性。此外，我们还将学习一些开发 Go 并发应用程序的典型结构。你将了解到，如果我们需要以并发方式工作，一个经典模式可能会变得更加复杂，但是我们的目标是理解 Go 的并发原语，以便读者在完成本书后能够使用所学知识编写自己的并发设计模式。

本书将逐渐提高一些任务的难度。我们在每一章都解释了一些技巧和窍门。

# 本书内容

第一章 *，准备...开始...Go！*，旨在帮助那些对 Go 编程语言有一定背景的新手。它将从在 Linux 机器上安装 Go 环境开始，然后介绍语法、类型和流程控制。

第二章 *，创建模式 - 单例、生成器、工厂、原型和抽象工厂设计模式*，介绍了在对象创建或管理特别复杂或昂贵时可能出现的问题，使用了单例、生成器、工厂和抽象工厂设计模式。

第三章 *，结构模式 - 组合、适配器和桥接设计模式*，涉及关于对象组合以获得新功能的第一组结构模式。比如创建一个中间对象，并使用各种对象，就好像只有一个对象一样。

第四章《结构模式-代理，外观，装饰器和享元设计模式》不太关注多对象组合，而更注重在现有对象中获取新功能。装饰器模式通常用于遵循开闭原则。外观在 API 中被广泛使用，其中您希望一个单一的来源提供许多信息和操作。享元不太常见，但在内存因大量相似对象而成为问题时，它是一个非常有用的模式。最后，代理模式包装对象以提供相同的功能，同时为代理的功能添加一些东西。

第五章《行为模式-策略，责任链和命令设计模式》处理了第一个行为模式，使对象以预期或有限的方式做出反应。我们将从策略模式开始，这可能是面向对象编程中最重要的设计模式，因为许多设计模式与它有一些共同之处。然后我们将转向责任链，构建可以决定谁必须处理特定情况的对象链。最后，命令模式封装不一定需要立即执行或必须存储的操作。

第六章《行为模式-模板，备忘录和解释器设计模式》继续介绍行为模式，引入了解释器模式，这是一个创建小型语言和其解释器的相当复杂的模式。当问题可以通过为其发明一种小语言来解决时，它可能非常有用。备忘录模式在应用程序中的“撤销”按钮中每天都在我们眼前。模板模式通过定义操作的初始结构来帮助开发人员，以便代码的最终用户可以完成它。

第七章《行为模式-访问者，状态，中介者和观察者设计模式》描述了观察者模式，这是一个在分布式系统和响应式编程中变得非常流行的重要模式。访问者模式处理对象的复杂层次结构，需要根据对象应用特定操作。最后，状态模式通常用于视频游戏和有限状态机，并允许对象根据自身状态改变其行为。

第八章《Go 并发简介》通过一些示例，使用 Goroutines 和通道以及互斥锁和同步来更详细地解释了 Go 中使用的 CSP 并发模型。

第九章《并发模式-屏障，未来和管道设计模式》将通过一些示例和解释介绍 Go 语言中符合惯例的 CSP 并发模式。这些模式虽小，但非常强大，因此我们将提供每种模式的一些用法示例，以及一些图表（如果可能），以便更容易理解每种模式。

第十章*，并发模式-工作池和发布或订阅设计模式*，讨论了一些具有并发结构的模式。我们将详细解释每一步，以便您可以仔细跟随示例。我们的目标是学习设计并发应用程序的模式，以符合 Go 的习惯用法。我们将大量使用通道和 Goroutines，而不是锁或共享变量。

# 您需要为本书做些什么？

本书的大部分章节都是按照简单的 TDD 方法编写的，首先编写要求，然后进行一些单元测试，最后编写满足这些要求的代码。我们将只使用 Go 标准库中提供的工具，以更好地理解该语言及其可能性。这个想法是跟随本书并理解 Go 解决问题的方式的关键，特别是在分布式系统和并发应用中。

# 这本书是为谁写的

这本书适用于 Go 编程语言的初学者和高级开发人员。不需要了解设计模式。

# 约定

在本书中，您将找到许多文本样式，用于区分不同类型的信息。以下是这些样式的一些示例及其含义的解释。

文本中的代码词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 句柄显示如下："我们需要一个`main`函数来使用它，因为库不能直接转换为可执行文件。"

代码块设置如下：

```go
    package main

    func main() {
      ten := 10
      if ten == 20 {
        println("This shouldn't be printed as 10 isn't equal to 20")
      } else {
        println("Ten is not equals to 20")
      }
    }
```

当我们希望引起您对代码块的特定部分的注意时，相关行或项目将以粗体显示：

```go
 if "a" == "b" || 10 == 10 || true == false {
      println("10 is equal to 10")
    } else if 11 == 11 && "go" == "go" {
        println("This won't because previous condition was satisfied")
      }
    }
```

任何命令行输入或输出都将按照以下方式编写：

```go
$ go run main.go

```

**新术语**和**重要单词**以粗体显示。屏幕上看到的单词，例如菜单或对话框中的单词，以这种方式出现在文本中："为了下载新模块，我们将转到**文件** | **设置** | **项目名称** | **项目解释器**。"

### 注意

警告或重要说明将显示在这样的框中。

### 提示

技巧和窍门会以这种方式出现。

# 读者反馈

我们始终欢迎读者的反馈。请告诉我们您对本书的看法-您喜欢或不喜欢的内容。读者的反馈对我们很重要，因为它可以帮助我们开发出您真正喜欢的标题。要发送一般反馈，只需发送电子邮件至 feedback@packtpub.com，并在主题中提及书名。如果您在某个专题上有专业知识，并且有兴趣撰写或为书籍做出贡献，请参阅我们的作者指南[www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

现在您是 Packt 书籍的自豪所有者，我们有一些事情可以帮助您充分利用您的购买。

## 下载示例代码

您可以从[`www.packtpub.com`](http://www.packtpub.com)的帐户中下载本书的示例代码文件。如果您在其他地方购买了本书，您可以访问[`www.packtpub.com/support`](http://www.packtpub.com/support)并注册，以便直接通过电子邮件接收文件。

您可以按照以下步骤下载代码文件：

1.  使用您的电子邮件地址和密码登录或注册到我们的网站。

1.  将鼠标指针悬停在顶部的**支持**选项卡上。

1.  点击**代码下载和勘误**。

1.  在**搜索**框中输入书名。

1.  选择您要下载代码文件的书籍。

1.  从下拉菜单中选择您购买本书的地点。

1.  点击**代码下载**。

文件下载后，请确保使用最新版本的解压缩或提取文件夹：

+   Windows 的 WinRAR / 7-Zip

+   Mac 的 Zipeg / iZip / UnRarX

+   Linux 的 7-Zip / PeaZip

该书的代码包也托管在 GitHub 上，网址为[`github.com/PacktPublishing/Go-Design-Patterns`](https://github.com/PacktPublishing/Go-Design-Patterns)。我们还有其他代码包来自我们丰富的图书和视频目录，可在[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)找到。去看看吧！

## 勘误

尽管我们已经尽一切努力确保内容的准确性，但错误确实会发生。如果您在我们的书中发现错误，也许是文本或代码中的错误，我们将不胜感激，如果您能向我们报告。通过这样做，您可以帮助其他读者避免挫折，并帮助我们改进本书的后续版本。如果您发现任何勘误，请访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)报告，选择您的书，点击**勘误提交表**链接，并输入您的勘误详情。一旦您的勘误被验证，您的提交将被接受，并且勘误将被上传到我们的网站或添加到该标题的勘误部分下的任何现有勘误列表中。 

要查看先前提交的勘误表，请转到[`www.packtpub.com/books/content/support`](https://www.packtpub.com/books/content/support)并在搜索字段中输入书名。所需信息将出现在**勘误**部分下。

## 盗版

互联网上侵犯版权材料的盗版是所有媒体都面临的持续问题。在 Packt，我们非常重视保护我们的版权和许可。如果您在互联网上发现我们作品的任何非法副本，请立即向我们提供位置地址或网站名称，以便我们采取补救措施。

请通过 copyright@packtpub.com 与我们联系，并附上涉嫌盗版材料的链接。

我们感谢您在保护我们的作者和为您带来有价值的内容的能力方面的帮助。

## 问题

如果您对本书的任何方面有问题，可以通过 questions@packtpub.com 与我们联系，我们将尽力解决问题。
