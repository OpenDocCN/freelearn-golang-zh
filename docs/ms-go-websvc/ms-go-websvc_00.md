# 前言

如果有一件事比其他任何事都更多地提到 Go 语言，那就是“Go 是一种服务器语言”。

毫无疑问，Go 被设计为一种理想的服务器语言，是 C、C++和 Java 的下一代迭代版本，旨在避免过度扩展和/或过度工程化。

这种语言已经发展壮大——在狂热的社区支持下——远远超出了服务器的范畴，进入了系统工具、图形甚至是新语言的编译器。然而，Go 的本质是为强大、并发和易于部署的跨平台服务器而设计的。这正是使该语言成为本书主题的理想选择。

《Go 中的 Web 服务精通》旨在成为构建可扩展的、可用于生产的 Web 服务和 API 的指南，重点放在安全性、可扩展性和遵循 RESTful 原则上。

在本书中，我们将为社交网络构建一个基本的 API，这将使我们能够深入了解一些基本概念，如将 Go 连接到其他服务以及保持服务器安全和高可用性。

本书结束时，您应该对构建健壮、可扩展、安全和生产就绪的网络服务的所有相关实例有所经验。

# 本书涵盖的内容

第一章，“Go 中的我们的第一个 API”，快速介绍了或重新介绍了与 Go 设置和使用相关的一些核心概念，以及`http`包。

第二章，“Go 中的 RESTful 服务”，侧重于 REST 架构的指导原则，并将其转化为我们整体 API 设计基础设施。

第三章，“路由和引导”，致力于将前一章的 RESTful 实践应用于我们 API 的内置、第三方和自定义路由器的搭建。

第四章，“在 Go 中设计 API”，探讨了整体 API 设计，同时考察了其他相关概念，如在 REST 架构中利用 Web 套接字和 HTTP 状态代码。

第五章，“Go 中的模板和选项”，涵盖了利用`OPTIONS`请求端点、实现 TLS 和身份验证以及在我们的 API 中标准化响应格式的方法。

第六章，“在 Go 中访问和使用网络服务”，探讨了集成其他网络服务以安全方式进行身份验证和身份识别的方法。

第七章，“使用其他网络技术”，侧重于引入应用架构的其他关键组件，如前端反向代理服务器和解决方案，以将会话数据保留在内存或数据存储中，以便快速访问。

第八章，“Web 的响应式 Go”，着眼于以消费者的方式表达我们 API 的价值，但利用前端、客户端库来解析和呈现我们的响应。

第九章，“部署”，介绍了部署策略，包括利用进程使我们的服务器保持运行、高度可访问，并与相关服务相互连接。

第十章，“性能最大化”，强调了在生产中保持我们的 API 活跃、响应迅速和快速的各种策略。我们将研究保存在磁盘和内存中的缓存机制，以及探索我们如何将这些机制分布到多台机器或镜像中的方法。

第十一章，“安全”，更侧重于确保应用程序和敏感数据受到保护的最佳实践。我们将消除 SQL 注入和跨站脚本攻击。

# 本书所需的内容

要使用本书中的示例，您可以使用 Windows，Linux 或 OS X 计算机中的任何一个，尽管您可能会发现 Windows 在使用一些我们将使用的第三方工具时会有一些限制。

您显然需要安装 Go 语言平台。最简单的方法是通过二进制文件，在 OS X 或 Windows 上可用。 Go 也可以通过多个 Linux 软件包管理器轻松获得，例如 yum 或 aptitude。

IDE 的选择在很大程度上是个人问题，但我们推荐 Sublime Text，它对 Go 有出色的支持，还支持其他语言。我们将花一些时间详细介绍其他常见 IDE 的优缺点，详见第一章，*在 Go 中创建我们的第一个 API*。

我们将利用许多其他平台和服务，如 MySQL，MongoDB，Nginx 等。大多数应该在各个平台上都可用，但如果您使用 Windows，建议您考虑在虚拟机上运行 Linux 平台，最好是 Ubuntu 服务器，以确保最大的兼容性。

# 这本书适合谁

本书适用于那些在 Go 和服务器端 Web 服务和 API 开发方面有经验的开发人员。我们没有花时间介绍 Go 编程的基础知识，所以如果你在这方面感到不稳定，建议您在深入学习之前先进行复习。

目标读者对服务器级别的网络性能感到舒适，对 REST 作为 API 设计指导原则有一定了解，并且至少知道 Go 的本地服务器能力。

我们并不预期您对所有涉及的技术都是专家，但对 Go 的核心库有基本的理解是必要的，并且对网络服务器架构设置和维护有一般的理解是理想的。

# 约定

在本书中，您会发现一些文本样式，用于区分不同类型的信息。以下是一些这些样式的示例，以及它们的含义解释。

文本中的代码词，数据库表名，文件夹名，文件名，文件扩展名，路径名，虚拟 URL，用户输入和 Twitter 用户名显示如下：“现在在临时文件夹中下载`julia-n.m.p-win64.exe`文件。”

代码块设置如下：

```go
package main

import (
  "fmt"
)
func main() {
  fmt.Println("Here be the code")
}
```

当我们希望引起您对代码块的特定部分的注意时，相关行或项目将以粗体显示。

```go
package main
import (
  "fmt"
)

func stringReturn(text string) string {
 return text
}

func main() {
  myText := stringReturn("Here be the code")
  fmt.Println(myText)
}
```

任何命令行输入或输出都以以下方式编写：

```go
curl --head http://localhost:8080/api/user/read/1111
HTTP/1.1 200 OK
Date: Wed, 18 Jun 2014 14:09:30 GMT
Content-Length: 12
Content-Type: text/plain; charset=utf-8

```

**新术语**和**重要单词**以粗体显示。您在屏幕上看到的单词，例如菜单或对话框中的单词，会以这样的方式出现在文本中：“当用户点击**接受**时，我们将返回到我们的重定向 URL，并获得我们正在寻找的代码。”

### 注意

警告或重要说明显示在这样的框中。

### 提示

提示和技巧显示如下。

# 读者反馈

我们始终欢迎读者的反馈。让我们知道您对本书的看法，您喜欢或不喜欢什么。读者的反馈对我们开发您真正受益的书籍非常重要。

要向我们发送一般反馈，只需发送电子邮件至`<feedback@packtpub.com>`，并在消息主题中提及书名。

如果您在某个专题上有专业知识，并且有兴趣撰写或为书籍做出贡献，请参阅我们的作者指南[www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

现在您是 Packt 书籍的自豪所有者，我们有很多事情可以帮助您充分利用您的购买。

## 下载本书的彩色图像

我们还为您提供了一个 PDF 文件，其中包含本书中使用的屏幕截图/图表的彩色图像。彩色图像将帮助您更好地理解输出中的变化。您可以从以下网址下载此文件：[`www.packtpub.com/sites/default/files/downloads/1304OS_ColorImages.pdf`](http://www.packtpub.com/sites/default/files/downloads/1304OS_ColorImages.pdf)。

## 勘误

尽管我们已经尽一切努力确保内容的准确性，但错误还是会发生。如果您在我们的书籍中发现错误——可能是文本或代码中的错误——我们将不胜感激地希望您向我们报告。通过这样做，您可以帮助其他读者避免挫折，并帮助我们改进本书的后续版本。如果您发现任何勘误，请访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)，选择您的书籍，点击**勘误提交表**链接，并输入您的勘误详情。一旦您的勘误经过验证，您的提交将被接受，并且勘误将被上传到我们的网站上，或者添加到该书籍的勘误列表中的任何现有勘误下的勘误部分。您可以通过从[`www.packtpub.com/support`](http://www.packtpub.com/support)选择您的书名来查看任何现有的勘误。

## 盗版

互联网上的版权盗版是所有媒体的持续问题。在 Packt，我们非常重视对我们的版权和许可的保护。如果您在互联网上以任何形式发现我们作品的非法副本，请立即向我们提供位置地址或网站名称，以便我们采取补救措施。

请通过`<copyright@packtpub.com>`与我们联系，并提供涉嫌盗版材料的链接。

我们感谢您帮助保护我们的作者，以及我们为您提供有价值内容的能力。

## 问题

如果您在书的任何方面遇到问题，请通过`<questions@packtpub.com>`与我们联系，我们将尽力解决。
