# 前言

本书涵盖了 Go 编程语言，并解释了如何将其应用于网络安全行业。所涵盖的主题对于红队和蓝队都很有用，也适用于希望编写安全代码的开发人员，以及希望保护其网络、主机和知识产权的网络和运维工程师。源代码示例都是完全功能的程序。这些示例旨在成为您可能希望纳入自己工具包的实用应用程序。此外，本书还作为一个构建自定义应用程序的实用菜谱。我还分享了其他我学到的安全最佳实践和技巧。

本书将为您演示在各种计算机安全情况下有用的代码示例。在阅读本书的过程中，您将建立一个实用应用程序和构建模块的菜谱，用于您自己的安全工具，以用于您的组织和工作。它还将涵盖一些关于 Go 编程语言的技巧和趣闻，并提供许多有用的参考程序，以增强您自己的 Go 菜谱。

本书将涵盖几个蓝队和红队使用案例以及其他各种安全相关主题。蓝队主题，即隐写术、取证、数据包捕获、诱饵网站和密码学，以及红队主题，即暴力破解、端口扫描、绑定和反向 shell、SSH 客户端和网页抓取，都将被涵盖。每一章都涉及不同的安全主题，并演示与该主题相关的代码示例。如果您遵循本书，您将拥有一个充满有用安全工具和构建模块的菜谱，以创建您自己的 Go 自定义工具。

本书不是关于使用 Go 语言的深入教程。其中有一章专门解释 Go；然而，与 Alan Donovan 和 Brian Kernighan 的近 400 页的《Go 编程语言》相比，它只是皮毛。幸运的是，Go 是一种非常容易上手的语言，学习曲线很快。提供了一些关于学习 Go 的资源，但如果读者对 Go 不熟悉，可能需要进行一些补充阅读。

本书不会探索尚未有充分记录的尖端安全技术或漏洞。没有零日漏洞或重大技术揭示。每一章都专门讨论一个不同的安全主题。这些主题中的每一个都可以写一本书。有专门研究这些领域的专家，因此本书不会深入研究任何特定主题。读者在完成后将有一个坚实的基础，可以深入探索任何主题。

# 本书适合对象

本书适合已经熟悉 Go 编程语言的程序员。需要一些 Go 的知识，但读者不需要成为 Go 专家。内容面向 Go 的新手，但不会教会您使用 Go 的一切。对 Go 不熟悉的人将有机会探索和尝试 Go 的各个方面，并将其应用于安全实践。我们将从较小和较简单的示例开始，然后再转向使用更高级的 Go 语言特性的示例。

读者不必是高级安全专家，但至少应该对核心安全概念有基本的了解。目标是以经验丰富的开发人员或安全专家的身份，通过安全主题，改进他们的工具集，并建立一个 Go 参考代码库。喜欢构建充满有用工具的菜谱的读者将喜欢阅读这些章节。希望在与安全、网络和其他领域相关的 Go 中构建自定义工具的人将受益于这些示例。开发人员、渗透测试人员、SOC 分析员、DevOps 工程师、社会工程师和网络工程师都可以利用本书的内容。

# 本书涵盖内容

第一章，“使用 Go 进行安全介绍”，涵盖了 Go 的历史，并讨论了为什么 Go 是安全应用的一个不错选择，如何设置开发环境以及运行您的第一个程序。

第二章，“Go 编程语言”，介绍了使用 Go 进行编程的基础知识。它回顾了关键字和数据类型以及 Go 的显著特性。它还包含了获取帮助和阅读文档的信息。

第三章，“文件操作”，帮助您探索使用 Go 操作、读取、写入和压缩文件的各种方法。

第四章，“取证”，讨论了基本的文件取证、隐写术和网络取证技术。

第五章，“数据包捕获和注入”，涵盖了使用`gopacket`包进行数据包捕获的各个方面。主题包括获取网络设备列表、从实时网络设备捕获数据包、过滤数据包、解码数据包层以及发送自定义数据包。

第六章，“密码学”，解释了哈希、对称加密（如 AES）和非对称加密（如 RSA）、数字签名、验证签名、TLS 连接、生成密钥和证书以及其他密码学包。

第七章，“安全外壳（SSH）”，涵盖了 Go SSH 包，如何使用客户端进行密码和密钥对认证。它还涵盖了如何使用 SSH 在远程主机上执行命令和运行交互式外壳。

第八章，“暴力破解”，包括多个暴力破解攻击客户端的示例，包括 HTTP 基本身份验证、HTML 登录表单、SSH、MongoDB、MySQL 和 PostgreSQL。

第九章，“Web 应用程序”，解释了如何构建具有安全 cookie、经过消毒的输出、安全标头、日志记录和其他最佳实践的安全 Web 应用程序。它还涵盖了编写使用客户端证书、HTTP 代理和 Tor 等 SOCKS5 代理的安全 Web 客户端。

第十章，“Web 抓取”，讨论了基本的抓取技术，如字符串匹配、正则表达式和指纹识别。它还涵盖了`goquery`包，这是一个从结构化网页中提取数据的强大工具。

第十一章，“主机发现和枚举”，涵盖了端口扫描、横幅抓取、TCP 代理、简单的套接字服务器和客户端、模糊测试以及扫描具有命名主机的网络。

第十二章，“社会工程学”，提供了通过 JSON REST API（如 Reddit）收集情报的示例，使用 SMTP 发送钓鱼邮件以及生成 QR 码。它还涵盖了蜜罐以及 TCP 和 HTTP 蜜罐的示例。

第十三章，“后渗透”，涵盖了各种后渗透技术，如交叉编译绑定外壳、反向绑定外壳和 Web 外壳。它还提供了搜索可写文件并修改时间戳、所有权和权限的示例。

第十四章，“结论”，是对主题的总结，向您展示您可以从这里走向何方，并且还考虑了应用本书中学到的技术的注意事项。

# 为了充分利用本书

1.  读者应具有基本的编程知识，并且至少了解一种编程语言。

1.  要运行示例，读者需要安装了 Go 的计算机。安装说明在书中有介绍。推荐的操作系统是 Ubuntu Linux，但示例也应该可以在 macOS、Windows 和其他 Linux 发行版上运行。

# 下载示例代码文件

您可以从[www.packtpub.com](http://www.packtpub.com)的帐户中下载本书的示例代码文件。如果您在其他地方购买了本书，您可以访问[www.packtpub.com/support](http://www.packtpub.com/support)并注册，以便直接通过电子邮件接收文件。

您可以按照以下步骤下载代码文件：

1.  登录或注册[www.packtpub.com](http://www.packtpub.com/support)。

1.  选择“支持”选项卡。

1.  点击“代码下载和勘误”。

1.  在搜索框中输入书名，并按照屏幕上的指示操作。

下载文件后，请确保使用以下最新版本之一解压或提取文件夹：

+   WinRAR/7-Zip for Windows

+   Zipeg/iZip/UnRarX for Mac

+   7-Zip/PeaZip for Linux

该书的代码包也托管在 GitHub 上，网址为[`github.com/PacktPublishing/Security-with-Go`](https://github.com/PacktPublishing/Security-with-Go)。我们还有其他书籍和视频的代码包可供下载，网址为**[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)**。请查看！

# 使用的约定

本书中使用了许多文本约定。

`CodeInText`：表示文本中的代码字词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 句柄。例如：" `make()`函数将创建一个具有特定长度和容量的特定类型的切片。"

代码块设置如下：

```go
package main

import (
    "fmt"
)

func main() {
   // Basic for loop
   for i := 0; i < 3; i++ {
       fmt.Println("i:", i)
   }

   // For used as a while loop
   n := 5
   for n < 10 {
       fmt.Println(n)
       n++
   }
}
```

当我们希望引起您对代码块的特定部分的注意时，相关行或项目将以粗体显示：

```go
package main

import (
    "fmt"
)

func main() {
   // Basic for loop
   for i := 0; i < 3; i++ {
       fmt.Println("i:", i)
   }

   // For used as a while loop
   n := 5
   for n < 10 {
       fmt.Println(n)
       n++
   }
}
```

任何命令行输入或输出都以以下方式编写：

```go
sudo apt-get install golang-go 
```

**粗体**：表示新术语、重要单词或屏幕上看到的单词。例如，菜单或对话框中的单词会在文本中以这种方式出现。例如："在 Windows 10 中，可以通过导航到控制面板|系统|高级系统设置|环境变量来找到。"

高级系统设置|环境变量。"

警告或重要说明看起来像这样。

提示和技巧看起来像这样。
