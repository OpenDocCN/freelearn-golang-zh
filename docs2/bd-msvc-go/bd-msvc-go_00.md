# 前言

微服务架构作为构建基于 Web 应用程序的事实上的模式，正在席卷全球。Golang 是一种特别适合构建它们的语言。它强大的社区、鼓励惯用风格和静态链接的二进制工件使其与其他技术集成以及大规模管理微服务变得一致且直观。这本书将教你常见的模式和惯例，并展示如何使用 Go 编程语言应用这些模式。

本书将教授你架构设计和 RESTful 通信的基本概念，并介绍提供可管理代码的图案，这些代码在开发中可支持，在生产中可大规模运行。我们将提供如何使用 Go 将这些概念和模式付诸实践的示例。

无论你是在规划新的应用程序还是在现有的单体应用程序中工作，本书都将解释并使用实际示例说明所有规模团队如何开始使用微服务解决问题。它将帮助你理解 Docker 和 Docker Compose，以及它们如何用于隔离微服务依赖关系和构建环境。我们将通过展示各种监控、测试和确保你的微服务安全的技术来结束本书。

到最后，你将了解微服务系统弹性的好处以及 Go 语法的优势。

# 本书涵盖内容

第一章，*微服务简介*，探讨了 Go 语言为何适合构建微服务，并查看包含构建基本微服务所需所有组件的标准库。首先查看标准元素将为你打下基础，并让你欣赏到我们稍后讨论的一些框架如何极其有用。

第二章，*设计优秀的 API*，探讨了什么因素使 API 变得优秀。我们将介绍 REST 和 RPC，解释它们之间的区别。我们还将检查编写和版本控制 API 的最佳实践。

第三章，*介绍 Docker*，解释了如何将你的应用程序包装成 Docker 镜像，以及如何将 Docker 和 Docker Compose 作为开发工作流程的一部分使用。我们将看到如何为你的应用程序构建一个小型轻量级的镜像，以及使用 Docker 和编写 Dockerfile 的一些良好实践。

第四章，*测试*，将介绍确保你的微服务达到最高质量的各种技术。我们将查看单元测试、行为测试和性能测试，为你提供实用的建议和核心测试框架的知识。

第五章，*常见模式*，介绍了在微服务架构中经常使用的标准模式。我们将深入探讨负载均衡、断路器、服务发现和自动驾驶模式，看看 Go 特定的实现会是什么样子。

第六章，*微服务框架*，基于实现许多微服务所需常见特性的框架。我们将通过它们的用法示例进行比较和对比。

第七章，*日志和监控*，检查了确保您的服务表现正确的必要技术，当它不正确时，确保您有所有必要的信息来进行成功的诊断和调试。我们将探讨使用 StatsD 进行简单的指标和计时，如何处理日志文件信息，以及记录更详细数据和平台（如 NewRelic）的方法，它提供了对您服务的整体概述。

第八章，*安全*，探讨了微服务中的身份验证、授权和安全。我们将探讨 JWT 以及如何实现用于验证您的请求并保持安全性的中间件。我们还将从更大的视角来看，探讨为什么您应该实现 TLS 加密以及服务之间不信任的原则。

第九章，*事件驱动架构*，讨论了允许您的微服务通过事件进行协作的常见模式；您将了解两种最常见的事件模式，并了解如何在 Go 中实现它们。我们还将探讨领域驱动设计的引入以及使用通用语言如何帮助软件开发过程。

第十章，*持续交付*，讨论了持续交付背后的概念。然后我们将详细检查我们之前在书中创建的一个简单应用程序的持续交付设置。

# 您需要这本书的内容

用于成功运行 Go 代码的 Go 编译器。您可以在[`golang.org`](https://golang.org)找到它。

您还需要 Docker 来运行容器应用程序。Docker 可在[`www.docker.com/`](https://www.docker.com/)找到。

# 这本书面向的对象

如果您想通过迈出微服务架构的第一步将技术应用到自己的项目中，这本书适合您。

# 规范

在这本书中，您会发现许多文本样式，用于区分不同类型的信息。以下是一些这些样式的示例及其含义的解释。

文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称如下所示：

“`@SpringBootApplication`注解取代了 Spring 框架中所需的不同注解。”

代码块设置如下：

```go
@SpringBootApplication
@EnableZuulProxy
public class ApiGatewayExampleInSpring
{
  public static void main(String[] args)    
  {
    SpringApplication.run(ApiGatewayExampleInSpring.class, args);
  }
}

```

任何命令行输入或输出都如下所示：

```go
mvn spring-boot:run

```

**新术语**和**重要词汇**以粗体显示。

警告或重要提示看起来像这样。

小贴士和技巧看起来像这样。

# 读者反馈

我们欢迎读者的反馈。告诉我们您对这本书的看法——您喜欢或不喜欢什么。读者反馈对我们很重要，因为它帮助我们开发出您真正能从中获得最大价值的标题。要发送一般反馈，请简单地发送电子邮件至`feedback@packtpub.com`，并在邮件主题中提及书籍的标题。如果您在某个主题领域有专业知识，并且您有兴趣撰写或为书籍做出贡献，请参阅我们的作者指南[www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

现在您是 Packt 图书的骄傲拥有者，我们有一些事情可以帮助您从您的购买中获得最大价值。

# 下载示例代码

您可以从[`www.packtpub.com`](http://www.packtpub.com)的账户下载此书的示例代码文件。如果您在其他地方购买了此书，您可以访问[`www.packtpub.com/support`](http://www.packtpub.com/support)并注册，以便直接将文件通过电子邮件发送给您。您可以通过以下步骤下载代码文件：

1.  使用您的电子邮件地址和密码登录或注册我们的网站。

1.  将鼠标指针悬停在顶部的“支持”标签上。

1.  点击“代码下载 & 错误清单”。

1.  在搜索框中输入书籍名称。

1.  选择您想要下载代码文件的书籍。

1.  从下拉菜单中选择您购买此书的来源。

1.  点击“代码下载”。

文件下载完成后，请确保您使用最新版本的以下软件解压或提取文件夹：

+   WinRAR / 7-Zip for Windows

+   Zipeg / iZip / UnRarX for Mac

+   7-Zip / PeaZip for Linux

书籍的代码包也托管在 GitHub 上，网址为[`github.com/PacktPublishing/Building-Microservices-with-Go`](https://github.com/PacktPublishing/Building-Microservices-with-Go)。我们还有其他丰富的书籍和视频代码包，可在[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)找到。查看它们吧！

# 错误清单

尽管我们已经尽一切努力确保我们内容的准确性，但错误仍然可能发生。如果您在我们的书中发现错误——可能是文本或代码中的错误——如果您能向我们报告这个问题，我们将不胜感激。通过这样做，您可以避免其他读者的挫败感，并帮助我们改进本书的后续版本。如果您发现任何勘误，请通过访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)，选择您的书籍，点击勘误提交表单链接，并输入您的勘误详情来报告它们。一旦您的勘误得到验证，您的提交将被接受，勘误将被上传到我们的网站或添加到该标题的勘误部分下的现有勘误列表中。要查看之前提交的勘误，请访问[`www.packtpub.com/books/content/support`](https://www.packtpub.com/books/content/support)，并在搜索字段中输入书籍名称。所需信息将出现在勘误部分下。

# 侵权

互联网上版权材料的侵权是一个跨所有媒体的持续问题。在 Packt，我们非常重视我们版权和许可证的保护。如果您在互联网上发现任何形式的我们作品的非法副本，请立即提供位置地址或网站名称，以便我们可以寻求补救措施。请通过`copyright@packtpub.com`与我们联系，并提供疑似侵权材料的链接。我们感谢您在保护我们作者和我们为您提供有价值内容的能力方面的帮助。

# 问题

如果您在这本书的任何方面遇到问题，您可以联系我们的`questions@packtpub.com`，我们将尽力解决问题。
