# 前言

## 关于

本节简要介绍了本书的覆盖范围，你需要掌握的技术技能以开始学习，以及完成所有包含的活动和练习所需的软件要求。

# 关于本书

你已经知道你想要学习 Go，而学习任何东西的最佳方式是通过实践学习。《Go 工作坊》专注于提升你的实践技能，以便你可以开发高性能的并发应用程序，甚至创建 Go 脚本来自动化重复的日常任务。你将从真实案例学习，这些案例可以带来真实的结果。

在《Go 工作坊》中，你将采取引人入胜的逐步方法来理解 Go。你不必忍受任何不必要的理论。如果你时间紧迫，你可以每天跳入一个单独的练习，或者你可以花一个周末的时间学习如何测试和确保你的 Go 应用程序。由你选择。按照你的方式学习，你将以一种感觉有成就感的方式建立和加强关键技能。

每一本《Go 工作坊》的实体印刷版都能解锁访问互动版。通过详细说明所有练习和活动，你将始终有一个指导性的解决方案。你也可以通过评估来衡量自己，跟踪你的进度，并接收内容更新。你甚至可以在完成时获得可以在线共享和验证的安全凭证。这是一项包含在印刷版中的高级学习体验。要兑换它，请遵循你 Go 书籍开头的说明。

快速直接，《Go 工作坊》是 Go 初学者的理想伴侣。你将像软件开发者一样构建和迭代你的代码，在学习过程中不断进步。这个过程意味着你会发现你的新技能会持续，并作为最佳实践嵌入其中。为未来的几年打下坚实的基础。

# 关于各章节

*第一章*，*变量和运算符*，解释了变量如何暂时保存数据。它还展示了你可以如何使用运算符来更改数据或对数据进行比较。

*第二章*，*逻辑与循环*，教你如何通过创建基于变量中数据的规则来使你的代码动态和响应。循环让你可以反复执行逻辑。

*第三章*，*核心类型*，向你介绍了数据的基本构建块。你将了解类型是什么以及核心类型是如何定义的。

*第四章*，*复杂数据类型*，解释了复杂数据类型是如何建立在核心类型之上，允许你通过数据分组和从核心类型中组合新类型来模拟现实世界的数据。你还将了解在需要时如何克服 Go 的类型系统。

*第五章*，*函数*，教你构建函数的基础知识。然后，我们将深入探讨使用函数的更高级功能，例如将函数作为参数传递、返回函数、将函数赋值给变量，以及许多你可以用函数做的有趣事情。

*第六章*，*错误处理*，教您如何处理错误，包括如何声明自己的错误以及以 Go 语言的方式处理错误。您将了解什么是 panic 以及如何从中恢复。

*第七章*，*接口*，首先讲解接口的机制，然后演示 Go 语言中的接口提供了多态性、鸭子类型、能够有空的接口以及接口的隐式实现。

*第八章*，*包*，展示了 Go 标准库如何组织其代码，以及您如何为自己的代码做同样的事情。

*第九章*，*基本调试*，教您如何找到应用程序中的错误。您将使用在代码中打印标记、使用值和类型以及执行日志记录的各种技术。

*第十章*，*关于时间*，让您提前了解 Go 语言如何管理时间变量，以及提供了哪些功能来提升您的应用程序，例如测量执行时间和在不同时区之间导航。

*第十一章*，*编码和解码（JSON）*，为您讲解 JSON 文档的基础知识，这种文档在当今软件的各个部分被广泛使用，同时 Go 语言对读取和创建 JSON 文档提供了强大的支持。

*第十二章*，*文件和系统*，展示了 Go 语言在处理文件和底层操作系统方面具有强大的支持。您将学习如何与文件系统交互，学习如何在操作系统上创建、读取和修改文件。您还将了解 Go 语言如何读取 CSV 文件，这是管理员常用的文件格式。

*第十三章*，*SQL 和数据库*，涵盖了连接数据库和操作表的最重要方面，这些是当今非常常见的任务，您将学习如何高效地与数据库工作。

*第十四章*，*使用 Go HTTP 客户端*，指导您如何使用 Go 标准包创建 HTTP 客户端并与 REST API 交互。您将学习如何向服务器发送 GET 请求并处理响应，以及如何向服务器发送表单数据以及如何上传文件到服务器。

*第十五章*，*HTTP 服务器*，教您如何使用 Go 标准包创建 HTTP 服务器并在其上构建网站和 REST API。您将学习如何接受来自网页表单或来自另一个程序的请求并以人类或机器可读的格式进行响应。

*第十六章*，*并发工作*，展示了如何利用 Go 的并发特性使您的软件能够同时执行多个任务，将工作分配给独立的协程，从而减少处理时间。

*第十七章*，*使用 Go 工具*，使您熟悉随 Go 语言一起提供的工具，并解释了如何使用它们来改进您的代码。您将学习如何使用 gofmt 和 goimports 自动格式化代码。您还将学习如何使用 go vet 进行静态分析，以及如何使用 Go 的竞态条件检测器检测竞态条件。

*第十八章*，*安全*，帮助您了解如何识别和修复如 SQL 注入和跨站脚本等安全攻击。您将学习如何使用 Go 标准包实现对称和非对称加密，以及如何使用哈希库和 Go 中的 TLS 包来保护静态数据和传输中的数据。

*第十九章*，*特殊功能*，让您探索 Go 语言中的一些隐藏宝藏，这将使开发更加容易。您将学习如何使用构建约束来控制应用程序的构建行为。您还将学习如何使用 Go 语言的通配符模式，以及如何使用 reflect 包在 Go 中使用反射。本章还将帮助您理解如何使用 unsafe 包访问应用程序的运行时内存。

## 习惯用法

文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称如下所示：

"一个`panic()`函数接受一个空接口。"

您在屏幕上看到的单词，例如在菜单或对话框中，也以相同的格式出现。

代码块设置如下：

```go
type error interface { 
 Error()string 
}
```

新术语和重要单词如下所示："这些行为统称为方法集。"

长代码片段将被截断，并在截断代码的顶部放置 GitHub 上相应代码文件的名称。整个代码的永久链接放置在代码片段下方。它应该看起来如下所示：

```go
main.go
6  func main() {
7    a()
8    fmt.Println("This line will now get printed from main() function")
9  }
10 func a() {
11   b("good-bye")
12   fmt.Println("Back in function a()")
13 }
The full code for this step is available at: https://packt.live/2E6j6ig
```

## 在开始之前

每一段伟大的旅程都始于一个谦卑的步伐。我们即将开始的 Go 编程冒险也不例外。在我们能够使用 Go 做一些酷的事情之前，我们需要准备一个高效的环境。在这篇简短的笔记中，我们将看到如何做到这一点。

## Windows with Docker 的硬件和软件推荐

要能够运行课程中使用的所有推荐工具，建议您拥有：

+   1.6 GHz 或更快的桌面（amd64, 386）处理器。

+   4 GB 的 RAM。

+   Windows 10 64 位：专业版、企业版或教育版（1607 周年更新，构建 14393 或更高版本）。

+   您必须在 BIOS 中启用虚拟化，这通常默认启用。虚拟化与启用 Hyper-V 不同。

+   CPU SLAT 功能。

## Windows without Docker 的硬件和软件推荐

如果您使用的系统低于使用 Docker 的推荐要求，您仍然可以完成课程。为此，您必须完成一个额外的步骤。

要能够运行所有工具（不包括 Docker），您需要：

+   1.6 GHz 或更快的桌面（amd64, 386）处理器

+   1 GB 的 RAM

+   Windows 7（带.NET Framework 4.5.2）、8.0、8.1 或 10（32 位和 64 位）

跳过解释如何安装 Docker 的步骤。您需要安装 MySQL 服务器。您可以从[`packt.live/2EQkiHe`](https://packt.live/2EQkiHe)下载安装程序。如果您不确定选择哪个选项，默认选项是安全的。MySQL 免费安装和使用。

一旦课程完成，你可以安全地卸载 MySQL。

## macOS 与 Docker 的硬件和软件推荐

要运行课程中使用的所有推荐工具，建议你拥有：

+   1.6 GHz 或更快的桌面（amd64, 386）处理器

+   4 GB 的 RAM

+   macOS X 或更新的版本，配备英特尔硬件**内存管理单元**（**MMU**）

+   macOS Sierra 10.12 或更新的版本

## macOS 无 Docker 的硬件和软件推荐

+   如果你使用的系统低于使用 Docker 推荐的系统要求，你仍然可以完成这门课程。你需要完成一个额外的步骤才能做到这一点。

+   要运行所有工具（不包括 Docker），你需要：

+   1.6 GHz 或更快的桌面（amd64, 386）处理器

+   1 GB 的 RAM

+   macOS Yosemite 10.10 或更新的版本

跳过解释如何安装 Docker 的步骤。你需要安装 MySQL 服务器。你可以从[`packt.live/2EQkiHe`](https://packt.live/2EQkiHe)下载安装程序。如果你不确定选择哪个选项，默认选项是安全的。MySQL 安装和使用都是免费的。

一旦课程完成，你可以安全地卸载 MySQL。

## Linux 硬件和软件推荐

要运行课程中使用的所有推荐工具，建议你拥有：

+   1.6 GHz 或更快的桌面（amd64, 386）处理器

+   1 GB 的 RAM

+   Linux（Debian）：Ubuntu 桌面 14.04，Debian 7

+   Linux（Red Hat）：Red Hat Enterprise Linux 7，CentOS 7，Fedora 23

## 安装 Go 编译器

要将你的 Go 源代码转换成可运行的程序，你需要 Go 编译器。对于 Windows 和 macOS，我们推荐使用安装程序。或者，为了获得更多控制，你可以下载预编译的二进制文件。你可以在[`packt.live/2PRUGjp`](https://packt.live/2PRUGjp)找到它们。Windows、macOS 和 Linux 上两种方法的安装说明可以在[`packt.live/375DQDA`](https://packt.live/375DQDA)找到。Go 编译器免费下载和使用。

## 安装 Git

Go 使用版本控制工具 Git 来安装额外的工具和代码。你可以在[`packt.live/35ByRug`](https://packt.live/35ByRug)找到 Windows、macOS 和 Linux 的说明。Git 免费安装和使用。

## 安装 Visual Studio Code（编辑器/集成开发环境）

你需要某种东西来编写你的 Go 源代码。这个工具被称为编辑器或**集成开发环境**（**IDE**）。如果你已经有了喜欢的编辑器，你可以使用它来学习这门课程。

如果你还没有编辑器，我们推荐你使用免费的编辑器 Visual Studio Code。你可以从[`packt.live/35KD2Ek`](https://packt.live/35KD2Ek)下载安装程序：

1.  安装完成后，打开 Visual Studio Code。

1.  从顶部菜单栏选择`查看`。

1.  从选项列表中选择`扩展`。

1.  应该在左侧出现一个面板。顶部是一个搜索输入框。

1.  输入`Go`。

1.  第一个选项应该是一个名为*Go*的由*Microsoft*提供的扩展。

1.  点击该选项上的`安装`按钮。

1.  等待显示成功安装的消息。

如果你已经安装了 Git，请按照以下步骤操作：

1.  同时按下*Ctrl/Cmd + Shift + P*。窗口顶部应该会出现一个文本输入框。

1.  输入`go tools`。

1.  选择标有类似`Go: Install/Update Tools`的选项。

1.  你会看到一个选项和复选框列表。

1.  搜索输入框旁边的第一个复选框会检查所有的复选框。选择这个复选框，然后选择它右侧的`Go`按钮。

1.  底部应该会出现一个面板，其中有一些活动。一旦这些活动停止（可能需要几分钟），你就完成了。

完成后，从顶部菜单栏选择`视图`，然后选择`资源管理器`。

你现在需要一个地方来存放你的 Go 项目。我建议在你的主目录中某个位置。避免将其放在 Go 路径中，即 Go 编译器安装的文件夹。如果你在课程后面的`modules`部分遇到问题，这可能是原因之一。一旦你知道你想在哪里存储项目，就为它们创建一个文件夹。确保你能找到回到这个文件夹的路。

在 Visual Studio Code 中，选择*打开文件夹*按钮。从打开的对话框中，选择你刚刚创建的文件夹。

## 创建一个测试应用程序

1.  在你的编辑器中，创建一个名为`test`的新文件夹。

1.  在文件夹中创建一个名为`main.go`的文件。

1.  将以下代码复制并粘贴到您刚刚创建的文件中：

    ```go
    package main
    import (
        "fmt"
    )
    func main() {
        fmt.Println("This is a test")
    }
    ```

1.  保存文件。

1.  打开一个终端并进入`test`文件夹。

1.  如果你正在使用 Visual Studio Code：

    +   从顶部菜单栏选择`终端`。

    +   从选项中选择`New Terminal`。

    +   输入`cd test`。

1.  在终端中输入`go build`。

1.  这应该会快速运行并完成，而不显示任何消息。

1.  你现在应该会在同一个文件夹中看到一个新文件。在 Linux 和 macOS 上，你会有一个名为`test`的文件。在 Windows 上，你会有一个名为`test.exe`的文件。这个文件是你的二进制文件。

1.  现在，让我们通过执行我们的二进制文件来运行我们的应用程序。输入`./test`。

1.  你应该会看到消息`This is a test`。如果你看到这个消息，你就已经成功设置了你的 Go 开发环境。

## 安装 Docker

如果你的电脑可以运行它（参见*硬件和软件要求*部分），你应该安装 Docker。Docker 允许我们运行诸如数据库服务器之类的程序，而无需安装它们。Docker 的安装和使用是免费的。

我们只使用 Docker 来运行课程数据库部分的 MySQL。如果你已经安装了 MySQL，那么你可以跳过这部分。

对于 macOS 用户，请按照[`packt.live/34VJLJD`](https://packt.live/34VJLJD)中的说明操作。

对于 Windows 用户，请按照[`packt.live/2EKGDG6`](https://packt.live/2EKGDG6)中的说明操作。

Linux 用户，你应该能够使用内置的包管理器来安装 Docker。常见发行版的说明在[`packt.live/2Mn8Cjc`](https://packt.live/2Mn8Cjc)。

课程完成后，如果你想，可以安全地卸载 Docker。

## 安装代码包

从 GitHub 下载代码文件至[`packt.live/2ZmmZJL`](https://packt.live/2ZmmZJL)，并将它们放置在一个名为`C:\Code`的新文件夹中。请参考这些代码文件以获取完整的代码包。
