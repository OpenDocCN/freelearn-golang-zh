<html><head></head><body>
		<div id="_idContainer190">
			<h1 id="_idParaDest-82"><a id="_idTextAnchor088"/>Chapter 5: Serving Static HTML in Gin</h1>
			<p>In this chapter, you will learn how to build a <strong class="bold">static web application</strong> that consumes Gin-based <strong class="bold">API</strong> responses. Along the way, you will learn how to serve web assets (JavaScript, <strong class="bold">Cascading Style Sheets</strong> (<strong class="bold">CSS</strong>), and images) and render <strong class="bold">HTML</strong> templates with Gin. Finally, you will cover how to build a self-contained web application with Go and resolve <strong class="bold">cross-origin resource sharing</strong> (<strong class="bold">CORS</strong>) policy errors with a Gin middleware.</p>
			<p>In this chapter, we will focus on the following topics:</p>
			<ul>
				<li>Serving static files</li>
				<li>Rendering HTML templates</li>
				<li>Building a self-contained web application</li>
				<li>Building a <strong class="bold">Single-Page Application</strong> (<strong class="bold">SPA</strong>)</li>
			</ul>
			<p>By the end of this chapter, you will be able to build a SPA with React to consume your RESTful API endpoints.</p>
			<h1 id="_idParaDest-83"><a id="_idTextAnchor089"/>Technical requirements</h1>
			<p>To follow the instructions in this chapter, you will need the following:</p>
			<ul>
				<li>A complete understanding of the previous chapter—this chapter is a follow-up of the previous one and it will use the same source code. Hence, some snippets won't be explained, to avoid repetition.</li>
				<li>Previous experience with a frontend development, and ideally knowledge of a web framework such as Angular, React, or Vue.js.</li>
			</ul>
			<p>The code bundle for this chapter is hosted on GitHub at <a href="https://github.com/PacktPublishing/Building-Distributed-Applications-in-Gin/tree/main/chapter05">https://github.com/PacktPublishing/Building-Distributed-Applications-in-Gin/tree/main/chapter05</a>.</p>
			<h1 id="_idParaDest-84"><a id="_idTextAnchor090"/>Serving static files</h1>
			<p>In the previous <a id="_idIndexMarker329"/>chapters, you have seen how to render API responses in <strong class="bold">JSON</strong> and <strong class="bold">XML</strong> formats. In this<a id="_idIndexMarker330"/> chapter, you<a id="_idIndexMarker331"/> will learn how you can render different types of responses. We will start by serving a basic <strong class="source-inline">index.html</strong> file and then move on to serving static files, such as JavaScript, CSS files, and images from a filesystem, and eventually render HTML templates.</p>
			<p>To start serving static files, follow these steps:  </p>
			<ol>
				<li>Create<a id="_idIndexMarker332"/> a <a id="_idIndexMarker333"/>new project folder and open it with the <strong class="bold">VSCode</strong> <strong class="bold">IDE</strong>. Then, create an <strong class="source-inline">index.html</strong> file to display a <strong class="source-inline">Hello world</strong> message with an <strong class="source-inline">&lt;h2&gt;</strong> tag, as follows:<p class="source-code">&lt;html&gt;</p><p class="source-code">&lt;head&gt;</p><p class="source-code">   &lt;title&gt;Recipes Platform&lt;/title&gt;</p><p class="source-code">&lt;/head&gt;</p><p class="source-code">&lt;body&gt;</p><p class="source-code">   &lt;h2&gt;Hello world&lt;/h2&gt;</p><p class="source-code">&lt;/body&gt;</p><p class="source-code">&lt;/html&gt;</p></li>
				<li> Next, with the <strong class="source-inline">go get</strong> command, install <strong class="source-inline">github.com/gin-gonic/gin</strong>, write a <strong class="source-inline">main.go</strong> file, and define a router with the <strong class="source-inline">gin.Default()</strong> method. Then, define a route for the <strong class="source-inline">index</strong> page and register an <strong class="source-inline">IndexHandler</strong> handler on it. The route handler will serve the <strong class="source-inline">index.html</strong> file using the <strong class="source-inline">c.File</strong> method. The complete <strong class="source-inline">main.go</strong> file looks like this:<p class="source-code">package main</p><p class="source-code">import "github.com/gin-gonic/gin"</p><p class="source-code">func IndexHandler(c *gin.Context) {</p><p class="source-code">   c.File("index.html")</p><p class="source-code">}</p><p class="source-code">func main() {</p><p class="source-code">   router := gin.Default()</p><p class="source-code">   router.GET("/", IndexHandler)</p><p class="source-code">   router.Run()</p><p class="source-code">}</p></li>
				<li>Run the <a id="_idIndexMarker334"/>application with the following command:<p class="source-code"><strong class="bold">go run main.go</strong></p><p>The server will run on <strong class="source-inline">localhost</strong> and serves on port <strong class="source-inline">8080</strong> by default, as illustrated in the following screenshot:</p><div id="_idContainer162" class="IMG---Figure"><img src="image/Figure_5.1_B17115.jpg" alt="Figure 5.1 – Server logs&#13;&#10;"/></div><p class="figure-caption">Figure 5.1 – Server logs</p></li>
				<li>Using your favorite browser, head to <a href="http://localhost:8080">http://localhost:8080</a>, and you should see a <strong class="bold">Hello world</strong> message, as follows: <div id="_idContainer163" class="IMG---Figure"><img src="image/Figure_5.2_B17115.jpg" alt="Figure 5.2 – Serving index.html&#13;&#10;"/></div><p class="figure-caption">Figure 5.2 – Serving index.html</p></li>
				<li>Next, update the <strong class="source-inline">index.html</strong> file to display some recipes using the following code. It references<a id="_idIndexMarker335"/> static assets for page styling (<strong class="source-inline">app.css</strong>) and recipes' images (<strong class="source-inline">burger.jpg</strong> and <strong class="source-inline">pizza.jpg</strong>):<p class="source-code">&lt;html&gt;</p><p class="source-code">&lt;head&gt;</p><p class="source-code">   &lt;title&gt;Recipes Platform&lt;/title&gt;</p><p class="source-code">   &lt;link rel="stylesheet" href="assets/css/app.css"&gt;</p><p class="source-code">&lt;/head&gt;</p><p class="source-code">&lt;body&gt;</p><p class="source-code">   &lt;div class="recipes"&gt;</p><p class="source-code">       &lt;div class="recipe"&gt;</p><p class="source-code">           &lt;h2&gt;Pizza&lt;/h2&gt;</p><p class="source-code">           &lt;img src="assets/images/pizza.jpg" /&gt;</p><p class="source-code">       &lt;/div&gt;</p><p class="source-code">       &lt;div class="recipe"&gt;</p><p class="source-code">           &lt;h2&gt;Burger&lt;/h2&gt;</p><p class="source-code">           &lt;img src="assets/images/burger.jpg" /&gt;</p><p class="source-code">       &lt;/div&gt;</p><p class="source-code">   &lt;/div&gt;</p><p class="source-code">&lt;/body&gt;</p><p class="source-code">&lt;/html&gt;</p></li>
				<li>The static files are stored under an <strong class="source-inline">assets</strong> folder in the project root repository. Create an <strong class="source-inline">assets</strong> folder with the following structure:<p class="source-code">.</p><p class="source-code">├── css</p><p class="source-code">│   └── app.css</p><p class="source-code">└── images</p><p class="source-code">    ├── burger.jpg</p><p class="source-code">    └── pizza.jpg</p><p class="callout-heading">Note</p><p class="callout">The recipe <a id="_idIndexMarker336"/>images<a id="_idIndexMarker337"/> can be downloaded from the following <strong class="bold">URL</strong>: <a href="https://github.com/PacktPublishing/Building-Distributed-Applications-in-Gin/tree/main/chapter05/go-assets/assets/images">https://github.com/PacktPublishing/Building-Distributed-Applications-in-Gin/tree/main/chapter05/go-assets/assets/images</a>.</p><p>The <strong class="source-inline">app.css</strong> file defines CSS classes to control the alignments of <strong class="source-inline">div</strong> elements holding the recipe title as well as the recipe image size, as illustrated in the following code snippet: </p><p class="source-code">.recipes {</p><p class="source-code">   width: 100%;</p><p class="source-code">}</p><p class="source-code">.recipe {</p><p class="source-code">   width: 50%;</p><p class="source-code">   float: left;</p><p class="source-code">}</p><p class="source-code">.recipe img {</p><p class="source-code">   height: 320px;</p><p class="source-code">}</p></li>
				<li>To be able to load those assets from <strong class="source-inline">index.html</strong>, the server should serve them as well. That's where the <strong class="source-inline">router.Static</strong> method comes into play. Add the following instruction to serve the <strong class="source-inline">assets</strong> folder under the <strong class="source-inline">/assets</strong> route:<p class="source-code">router.Static("/assets", "./assets")</p></li>
				<li>Rerun the<a id="_idIndexMarker338"/> application—the images and CSS file should now be accessible from http://localhost:8080/assets/PATH, as illustrated in the following screenshot:<div id="_idContainer164" class="IMG---Figure"><img src="image/Figure_5.3_B17115.jpg" alt="Figure 5.3 – Serving assets&#13;&#10;"/></div><p class="figure-caption">Figure 5.3 – Serving assets</p></li>
				<li>Head back to your browser and refresh the page—it should now display the following results:</li>
			</ol>
			<div>
				<div id="_idContainer165" class="IMG---Figure">
					<img src="image/Figure_5.4_B17115.jpg" alt="Figure 5.4 – Serving CSS and images with Gin&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 5.4 – Serving CSS and images with Gin</p>
			<p>The page is pretty basic, as you can tell! You now can serve static assets with Gin.</p>
			<p>So far, you <a id="_idIndexMarker339"/>have seen how to serve HTML and static files from a Gin application. In the following section, we will cover how to create HTML templates and render dynamic content.</p>
			<h1 id="_idParaDest-85"><a id="_idTextAnchor091"/>Rendering HTML templates</h1>
			<p>In this <a id="_idIndexMarker340"/>section, you will add the functionality to display a list of recipes dynamically by generating an <strong class="source-inline">index.html</strong> file from the server side. The Gin framework uses the Go standard <strong class="source-inline">text/template</strong> and <strong class="source-inline">html/template</strong> packages in the background to generate text and HTML outputs.</p>
			<p>To get started, proceed as follows:</p>
			<ol>
				<li value="1">Create a <strong class="source-inline">Recipe</strong> struct. The structure will hold just two fields: a name and picture. This can be represented as follows:<p class="source-code">type Recipe struct {</p><p class="source-code">   Name    string `json:"name"`</p><p class="source-code">   Picture string `json:"picture"`</p><p class="source-code">}</p></li>
				<li>Next, update the <strong class="source-inline">IndexHandler</strong> handler to create a <strong class="source-inline">recipes</strong> slice. Then, call the <strong class="source-inline">c.HTML</strong> method to render the <strong class="source-inline">index.tmpl</strong> file by passing the <strong class="source-inline">recipes</strong> slice. To keep things simple, the list of recipes is kept in memory, which is why we will initialize the <strong class="source-inline">recipes</strong> slice with two hardcoded recipes, as <a id="_idIndexMarker341"/>follows:<p class="source-code">func IndexHandler(c *gin.Context) {</p><p class="source-code">   recipes := make([]Recipe, 0)</p><p class="source-code">   recipes = append(recipes, Recipe{</p><p class="source-code">       Name:    "Burger",</p><p class="source-code">       Picture: "/assets/images/burger.jpg",</p><p class="source-code">   })</p><p class="source-code">   recipes = append(recipes, Recipe{</p><p class="source-code">       Name:    "Pizza",</p><p class="source-code">       Picture: "/assets/images/pizza.jpg",</p><p class="source-code">   })</p><p class="source-code">  recipes = append(recipes, Recipe{</p><p class="source-code">       Name:    "Tacos",</p><p class="source-code">       Picture: "/assets/images/tacos.jpg",</p><p class="source-code">   })</p><p class="source-code">   c.HTML(http.StatusOK, "index.tmpl", gin.H{</p><p class="source-code">       "recipes": recipes,</p><p class="source-code">   })</p><p class="source-code">}</p><p class="callout-heading">Note</p><p class="callout">The <strong class="source-inline">.tmpl</strong> extension is not required; however, it's recommended to be consistent within a project for clarity.</p></li>
				<li>Create a <strong class="source-inline">templates</strong> folder in the root of the project folder, and write an <strong class="source-inline">index.tmpl</strong> file<a id="_idIndexMarker342"/> with the following content:<p class="source-code">&lt;html&gt;</p><p class="source-code">&lt;head&gt;</p><p class="source-code">   &lt;title&gt;Recipes&lt;/title&gt;</p><p class="source-code">   &lt;link rel="stylesheet" href="assets/css/app.css"&gt;</p><p class="source-code">&lt;/head&gt;</p><p class="source-code">&lt;body&gt;</p><p class="source-code">   &lt;div class="recipes"&gt;</p><p class="source-code">       {{range .recipes}}</p><p class="source-code">       &lt;div class="recipe"&gt;</p><p class="source-code">           &lt;h2&gt;{{ .Name }}&lt;/h2&gt;</p><p class="source-code">           &lt;img src="{{ .Picture }}" /&gt;</p><p class="source-code">       &lt;/div&gt;</p><p class="source-code">       {{end}}</p><p class="source-code">   &lt;/div&gt;</p><p class="source-code">&lt;/body&gt;</p><p class="source-code">&lt;/html&gt;</p></li>
				<li>The <strong class="source-inline">range</strong> keyword is used to iterate over all recipes in the <strong class="source-inline">recipes</strong> slice. For each recipe in the range of recipes, display its picture and name. Within a range, each recipe becomes <strong class="source-inline">{{.}}</strong> and the recipe properties therefore become <strong class="source-inline">{{.Name}}</strong> or <strong class="source-inline">{{.Picture}}</strong>.</li>
				<li>Next, tell Gin to load templates from the <strong class="source-inline">templates</strong> directory. The templates will be loaded once from disk at server startup; therefore, the application will serve the HTML pages faster. The code is illustrated in the following snippet:<p class="source-code">router.LoadHTMLGlob("templates/*")</p></li>
				<li>Rerun the application, and head once again to <strong class="source-inline">localhost:8080</strong>. A list of recipes will be displayed, as illustrated in the following screenshot:<div id="_idContainer166" class="IMG---Figure"><img src="image/Figure_5.5_B17115.jpg" alt="Figure 5.5 – Iterating over items with range&#13;&#10;"/></div><p class="figure-caption">Figure 5.5 – Iterating over items with range</p><p>You can take<a id="_idIndexMarker343"/> this further, and load the <strong class="source-inline">recipes.json</strong> file used in <a href="B17115_02_Final_JM_ePub.xhtml#_idTextAnchor037"><em class="italic">Chapter 2</em></a>, <em class="italic">Setting up API Endpoints</em>. Later in this chapter, you'll see how to fetch a list of recipes from the API built in previous chapters. The file contains an array of recipes with the following structure:</p><p class="source-code">[</p><p class="source-code">   {</p><p class="source-code">       "name": "Crock Pot Roast",</p><p class="source-code">       "ingredients": [</p><p class="source-code">           {</p><p class="source-code">               "quantity": "1",</p><p class="source-code">               "name": "beef roast",</p><p class="source-code">               "type": "Meat"</p><p class="source-code">           },</p><p class="source-code">           {</p><p class="source-code">               "quantity": "1 package",</p><p class="source-code">               "name": "brown gravy mix",</p><p class="source-code">               "type": "Baking"</p><p class="source-code">           },</p><p class="source-code">           {</p><p class="source-code">               "quantity": "1 package",</p><p class="source-code">               "name": "dried Italian salad </p><p class="source-code">                        dressing mix",</p><p class="source-code">               "type": "Condiments"</p><p class="source-code">           },</p><p class="source-code">           {</p><p class="source-code">               "quantity": "1 package",</p><p class="source-code">               "name": "dry ranch dressing mix",</p><p class="source-code">               "type": "Condiments"</p><p class="source-code">           },</p><p class="source-code">           {</p><p class="source-code">               "quantity": "1/2 cup",</p><p class="source-code">               "name": "water",</p><p class="source-code">               "type": "Drinks"</p><p class="source-code">           }</p><p class="source-code">       ],</p><p class="source-code">       "steps": [</p><p class="source-code">           "Place beef roast in crock pot.",</p><p class="source-code">           "Mix the dried mixes together in a bowl </p><p class="source-code">                and sprinkle over the roast.",</p><p class="source-code">           "Pour the water around the roast.",</p><p class="source-code">           "Cook on low for 7-9 hours."</p><p class="source-code">       ],</p><p class="source-code">       "imageURL": "/assets/images/</p><p class="source-code">                    crock-pot-roast.jpg"</p><p class="source-code">   }</p><p class="source-code">]</p></li>
				<li>Update<a id="_idIndexMarker344"/> the <strong class="source-inline">Recipe</strong> struct to mirror the <strong class="source-inline">recipe</strong> fields, as follows:<p class="source-code">type Recipe struct {</p><p class="source-code">   Name        string       `json:"name"`</p><p class="source-code">   Ingredients []Ingredient `json:"ingredients"`</p><p class="source-code">   Steps       []string     `json:"steps"`</p><p class="source-code">   Picture     string       `json:"imageURL"`</p><p class="source-code">}</p><p class="source-code">type Ingredient struct {</p><p class="source-code">   Quantity string `json:"quantity"`</p><p class="source-code">   Name     string `json:"name"`</p><p class="source-code">   Type     string `json:"type"`</p><p class="source-code">}</p><p class="source-code">var recipes []Recipe</p></li>
				<li>In the <strong class="source-inline">init()</strong> method, read the JSON file and encode its content to the <strong class="source-inline">recipes</strong> slice using the <strong class="source-inline">json.Unmarshal</strong> method, as follows:<p class="source-code">func init() {</p><p class="source-code">   recipes = make([]Recipe, 0)</p><p class="source-code">   file, _ := ioutil.ReadFile("recipes.json")</p><p class="source-code">   _ = json.Unmarshal([]byte(file), &amp;recipes)</p><p class="source-code">}</p></li>
				<li>Then, update the <strong class="source-inline">IndexHandler</strong> handler to pass the <strong class="source-inline">recipes</strong> slice to the <strong class="source-inline">index.tmpl</strong> template<a id="_idIndexMarker345"/> in a variable named <strong class="source-inline">recipes</strong>, as follows:<p class="source-code">func IndexHandler(c *gin.Context) {</p><p class="source-code">   c.HTML(http.StatusOK, "index.tmpl", gin.H{</p><p class="source-code">       "recipes": recipes,</p><p class="source-code">   })</p><p class="source-code">}</p></li>
				<li> Finally, customize the template file to display the recipe ingredients and steps using the <strong class="source-inline">range</strong> keyword. The recipe attributes are accessed using a <em class="italic">dot</em> with the field name (<strong class="source-inline">{{ .FieldName  }}</strong>), as illustrated in the following code snippet:<p class="source-code">&lt;html&gt;</p><p class="source-code">&lt;head&gt;</p><p class="source-code">   &lt;title&gt;Recipes&lt;/title&gt;</p><p class="source-code">   &lt;link rel="stylesheet" href="assets/css/app.css"&gt;</p><p class="source-code">   &lt;link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"&gt;</p><p class="source-code">&lt;/head&gt;</p><p class="source-code">&lt;body class="container"&gt;</p><p class="source-code">   &lt;div class="row"&gt;</p><p class="source-code">       {{range .recipes}}</p><p class="source-code">       &lt;div class="col-md-3"&gt;</p><p class="source-code">           &lt;div class="card" style="width: 18rem;"&gt;</p><p class="source-code">               &lt;img src="{{ .Picture }}" class="</p><p class="source-code">                   card-img-top" alt="..."&gt;</p><p class="source-code">               &lt;div class="card-body"&gt;</p><p class="source-code">                   &lt;h5 class="card-title"&gt;{{ </p><p class="source-code">                       .Name }}&lt;/h5&gt;</p><p class="source-code">                   {{range $ingredient := </p><p class="source-code">                       .Ingredients}}</p><p class="source-code">                   &lt;span class="badge bg-danger </p><p class="source-code">                       ingredient"&gt;</p><p class="source-code">                       {{$ingredient.Name}}</p><p class="source-code">                   &lt;/span&gt;</p><p class="source-code">                   {{end}}</p><p class="source-code">                   &lt;ul class="steps"&gt;</p><p class="source-code">                       {{range $step := .Steps}}</p><p class="source-code">                       &lt;li&gt;{{$step}}&lt;/li&gt;</p><p class="source-code">                       {{end}}</p><p class="source-code">                   &lt;/ul&gt;</p><p class="source-code">               &lt;/div&gt;</p><p class="source-code">           &lt;/div&gt;</p><p class="source-code">       &lt;/div&gt;</p><p class="source-code">       {{end}}</p><p class="source-code">   &lt;/div&gt;</p><p class="source-code">&lt;/body&gt;</p><p class="source-code">&lt;script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"&gt;&lt;/script&gt;</p><p class="source-code">&lt;/html&gt;</p><p class="callout-heading">Note</p><p class="callout">For further <a id="_idIndexMarker346"/>explanation about advanced template actions and operators, refer to the Go official documentation at <a href="https://golang.org/pkg/text/template/">https://golang.org/pkg/text/template/</a>.</p></li>
				<li>Rerun the application, and refresh the page on your browser. This time, an aesthetically <a id="_idIndexMarker347"/>pleasing <strong class="bold">user interface</strong> (<strong class="bold">UI</strong>) will be displayed, as illustrated in the following screenshot:</li>
			</ol>
			<div>
				<div id="_idContainer167" class="IMG---Figure">
					<img src="image/B17115_05_06_v2.jpg" alt="Figure 5.6 – Rendering data with Go templates&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 5.6 – Rendering data with Go templates</p>
			<p>As you can <a id="_idIndexMarker348"/>see, your application looks much nicer. All you did was add some CSS with the Bootstrap framework (To know more about the framework, refer <a href="https://getbootstrap.com/">https://getbootstrap.com/</a>); so, from a functionality point of view, nothing has changed.</p>
			<p>If you go back to the terminal, you will notice that the images and other assets were served from the HTTP server, as we can see here:</p>
			<div>
				<div id="_idContainer168" class="IMG---Figure">
					<img src="image/Figure_5.7_B17115.jpg" alt="Figure 5.7 – Serving images&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 5.7 – Serving images</p>
			<p>Great! The assets<a id="_idIndexMarker349"/> are served from the Gin server, and you can now build a dynamic web page.</p>
			<h2 id="_idParaDest-86"><a id="_idTextAnchor092"/>Creating the view templates</h2>
			<p>For now, the<a id="_idIndexMarker350"/> application we have built displays a list<a id="_idIndexMarker351"/> of recipes. You can take this further and create a recipe page where users can see the full recipe. To do so, you need to create a unique identifier for each recipe; that way, you can have a unique URL to access each recipe.</p>
			<p>To get started, proceed as follows:</p>
			<ol>
				<li value="1">Add an <strong class="source-inline">id</strong> attribute to the recipe's items in the <strong class="source-inline">recipes.json</strong> file as follows, or you can download the <strong class="source-inline">recipes.json</strong> file from the <strong class="source-inline">chapter05</strong> folder located in the book's GitHub repository:<p class="source-code">[</p><p class="source-code">   {</p><p class="source-code">       "id": "603fa0f0b39c47f0e40659c2",</p><p class="source-code">       "name": "Crock Pot Roast",</p><p class="source-code">       "ingredients": [...],</p><p class="source-code">       "steps": [...],</p><p class="source-code">       "imageURL": "/assets/images/</p><p class="source-code">                    crock-pot-roast.jpg"</p><p class="source-code">   }</p><p class="source-code">]</p></li>
				<li>Then, add the <strong class="source-inline">ID</strong> field to the <strong class="source-inline">Recipe</strong> struct, as follows: <p class="source-code">type Recipe struct {</p><p class="source-code">   ID          string       `json:"id"`</p><p class="source-code">   Name        string       `json:"name"`</p><p class="source-code">   Ingredients []Ingredient `json:"ingredients"`</p><p class="source-code">   Steps       []string     `json:"steps"`</p><p class="source-code">   Picture     string       `json:"imageURL"`</p><p class="source-code">}</p></li>
				<li>To be able to<a id="_idIndexMarker352"/> navigate to the recipe page, add<a id="_idIndexMarker353"/> a button to each recipe item in the <strong class="source-inline">index.tmpl</strong> file. When clicking on the button, the user will be redirected to the target recipe page. The <strong class="source-inline">{{ .ID }}</strong> expression will be evaluated and replaced by the recipe ID. The code is illustrated in the following snippet:<p class="source-code">&lt;section class="container"&gt;</p><p class="source-code">       &lt;div class="row"&gt;</p><p class="source-code">           {{range .recipes}}</p><p class="source-code">           &lt;div class="col-md-3"&gt;</p><p class="source-code">               &lt;div class="card" style="width: </p><p class="source-code">                18rem;"&gt;</p><p class="source-code">                   &lt;img src="{{ .Picture }}" </p><p class="source-code">                   class="card-img-top" alt="..."&gt;</p><p class="source-code">                   &lt;div class="card-body"&gt;</p><p class="source-code">                       &lt;h5 class="card-title"&gt;{{ </p><p class="source-code">                           .Name }}&lt;/h5&gt;</p><p class="source-code">                       {{range $ingredient := </p><p class="source-code">                           .Ingredients}}</p><p class="source-code">                       &lt;span class="badge bg-danger </p><p class="source-code">                           ingredient"&gt;</p><p class="source-code">                           {{$ingredient.Name}}</p><p class="source-code">                       &lt;/span&gt;</p><p class="source-code">                       {{end}}</p><p class="source-code">                       &lt;ul class="steps"&gt;</p><p class="source-code">                           {{range $step := .Steps}}</p><p class="source-code">                           &lt;li&gt;{{$step}}&lt;/li&gt;</p><p class="source-code">                           {{end}}</p><p class="source-code">                       &lt;/ul&gt;</p><p class="source-code">                       &lt;a href="/recipes/{{ .ID }}" </p><p class="source-code">                           class="btn btn-primary btn-</p><p class="source-code">                           sm"&gt;See recipe&lt;/a&gt;</p><p class="source-code">                   &lt;/div&gt;</p><p class="source-code">               &lt;/div&gt;</p><p class="source-code">           &lt;/div&gt;</p><p class="source-code">           {{end}}</p><p class="source-code">       &lt;/div&gt;</p><p class="source-code">&lt;/section&gt;</p></li>
				<li>With that <a id="_idIndexMarker354"/>being <a id="_idIndexMarker355"/>said, serve the recipe page at <strong class="source-inline">/recipes/:id</strong>. Take note of the <strong class="source-inline">:id</strong> part in this route. The two <em class="italic">dots</em> at the beginning indicate that this is a dynamic route. The route will store the recipe <strong class="source-inline">id</strong> attribute in the route parameter named <strong class="source-inline">ID</strong>, which we can access in the <strong class="source-inline">RecipeHandler</strong> handler. Here's the code you need:<p class="source-code">router.GET("/recipes/:id", RecipeHandler)</p><p>The following code snippet contains the route-handler code, and is self-explanatory. It loops through the <strong class="source-inline">recipes</strong> slice, looking for a recipe that matches the ID given in the request parameter. If a match is found, then the <strong class="source-inline">recipe.tmpl</strong> file will be rendered with the data of the recipe. If not, the user will be redirected to a <strong class="bold">404 – not found</strong> error page:</p><p class="source-code">func RecipeHandler(c *gin.Context) {</p><p class="source-code">   for _, recipe := range recipes {</p><p class="source-code">       if recipe.ID == c.Param("id") {</p><p class="source-code">           c.HTML(http.StatusOK, "recipe.tmpl", gin.H{</p><p class="source-code">               "recipe": recipe,</p><p class="source-code">           })</p><p class="source-code">           return</p><p class="source-code">       }</p><p class="source-code">   }</p><p class="source-code">   c.File("404.html")</p><p class="source-code">}</p><p class="callout-heading">Note</p><p class="callout">As the web <a id="_idIndexMarker356"/>application grows, it would make sense to<a id="_idIndexMarker357"/> move the route handlers to a separate file. For Go project structure best practices, head back to <a href="B17115_03_Final_JM_ePub.xhtml#_idTextAnchor054"><em class="italic">Chapter 3</em></a><em class="italic">, Managing Data Persistence with MongoDB</em>.</p><p>The <strong class="source-inline">recipe.tmpl</strong> template has the same structure as the <strong class="source-inline">index.tmpl</strong> template. However, instead of the <strong class="source-inline">recipes</strong> variable containing a list of recipes, in this case it<a id="_idIndexMarker358"/> will contain a single recipe. The <a id="_idIndexMarker359"/>template is shown here:</p><p class="source-code">&lt;html&gt;</p><p class="source-code">&lt;head&gt;</p><p class="source-code">   &lt;title&gt;{{ .recipe.Name }} - Recipes&lt;/title&gt;</p><p class="source-code">   &lt;link rel="stylesheet" href="/assets/css/app.css"&gt;</p><p class="source-code">   &lt;link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"&gt;</p><p class="source-code">&lt;/head&gt;</p><p class="source-code">&lt;body&gt;</p><p class="source-code">   &lt;section class="container recipe"&gt;</p><p class="source-code">       &lt;div class="row"&gt;</p><p class="source-code">           &lt;div class="col-md-3"&gt;</p><p class="source-code">               &lt;img src="{{ .recipe.Picture }}"  	 	                class="card-img-top"&gt;</p><p class="source-code">           &lt;/div&gt;</p><p class="source-code">           &lt;div class="col-md-9"&gt;</p><p class="source-code">               &lt;h4&gt;{{ .recipe.Name }}&lt;/h4&gt;</p><p class="source-code">               &lt;ul class="list-group list-steps"&gt;</p><p class="source-code">                   &lt;li class="list-group-item </p><p class="source-code">                       active"&gt;Steps&lt;/li&gt;</p><p class="source-code">                   {{range $step := .recipe.Steps }}</p><p class="source-code">                   &lt;li class="list-group-</p><p class="source-code">                       item"&gt;{{$step}}&lt;/li&gt;</p><p class="source-code">                   {{end}}</p><p class="source-code">               &lt;/ul&gt;</p><p class="source-code">           &lt;/div&gt;</p><p class="source-code">       &lt;/div&gt;</p><p class="source-code">   &lt;/section&gt;</p><p class="source-code">&lt;/body&gt;</p><p class="source-code">&lt;script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"&gt;&lt;/script&gt;</p><p class="source-code">&lt;/html&gt;</p><p>The <strong class="source-inline">404.html</strong> error <a id="_idIndexMarker360"/>page will simply display a<a id="_idIndexMarker361"/> 404 illustration with a <strong class="source-inline">Recipe not found</strong> message. This can be done using the following code:</p><p class="source-code">&lt;html&gt;</p><p class="source-code">&lt;head&gt;</p><p class="source-code">   &lt;title&gt;Recipe not found&lt;/title&gt;</p><p class="source-code">   &lt;link rel="stylesheet" href="/assets/css/app.css"&gt;</p><p class="source-code">   &lt;link href="https://cdn.jsdelivr.net/npm/ 	    bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css"  	    rel="stylesheet"&gt;</p><p class="source-code">&lt;/head&gt;</p><p class="source-code">&lt;body&gt;</p><p class="source-code">   &lt;section class="container not-found"&gt;</p><p class="source-code">       &lt;h4&gt;Recipe not found /h4&gt;</p><p class="source-code">       &lt;img src="/assets/images/404.jpg" width="60%"&gt;</p><p class="source-code">   &lt;/section&gt;</p><p class="source-code">&lt;/body&gt;</p><p class="source-code">&lt;script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"&gt;&lt;/script&gt;</p><p class="source-code">&lt;/html&gt;</p></li>
				<li>To test out the new changes, rerun the server, and head back to the browser and refresh the page. A list of recipes will be returned, but this time we have a <strong class="bold">See recipe</strong> button, as<a id="_idIndexMarker362"/> illustrated in the<a id="_idIndexMarker363"/> following screenshot:<div id="_idContainer169" class="IMG---Figure"><img src="image/B17115_05_08_v2.jpg" alt="Figure 5.8 – Home page&#13;&#10;"/></div><p class="figure-caption">Figure 5.8 – Home page</p></li>
				<li>Click on the <strong class="bold">See recipe</strong> button. <p>You'll be redirected to the <strong class="bold">Recipe</strong> page, where you can see a complete recipe's ingredients and instructions, as illustrated in the following screenshot:</p></li>
			</ol>
			<div>
				<div id="_idContainer170" class="IMG---Figure">
					<img src="image/Figure_5.9_B17115.jpg" alt="Figure 5.9 – Recipes page&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 5.9 – Recipe page</p>
			<p>You can <a id="_idIndexMarker364"/>also <a id="_idIndexMarker365"/>share your favorite recipes by sharing their URLs with your friends. If a particular recipe doesn't exist anymore or you've shared a wrong ID for a recipe, then a 404 page will be displayed, as follows:</p>
			<div>
				<div id="_idContainer171" class="IMG---Figure">
					<img src="image/Figure_5.10_B17115.jpg" alt="Figure 5.10 – 404 error page&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 5.10 – 404 error page</p>
			<p>You might have noticed that you used a navigation bar to be able to switch easily between the home <a id="_idIndexMarker366"/>page (where a list of recipes is being <a id="_idIndexMarker367"/>displayed) and the recipe page. The same code is being used in two different template files. To avoid duplicating code, you can create <strong class="bold">reusable templates</strong>.</p>
			<h2 id="_idParaDest-87"><a id="_idTextAnchor093"/>Creating reusable templates</h2>
			<p>The <strong class="bold">navbar</strong> is a <a id="_idIndexMarker368"/>common functionality<a id="_idIndexMarker369"/> that <a id="_idIndexMarker370"/>will be reused across multiple pages of our application. In order to create a reusable template, proceed as follows:</p>
			<ol>
				<li value="1">Create a <strong class="source-inline">navbar.tmpl</strong> file in the <strong class="source-inline">templates</strong> folder and place the navbar code in it, as follows:<p class="source-code">&lt;nav class="container-fluid navbar navbar-expand-lg navbar-light bg-light"&gt;</p><p class="source-code">   &lt;a class="navbar-brand" href="#"&gt;</p><p class="source-code">       &lt;div class="logo"&gt;</p><p class="source-code">           &lt;img src="/assets/images/logo.svg"&gt;</p><p class="source-code">           &lt;span&gt;Recipes&lt;/span&gt;</p><p class="source-code">       &lt;/div&gt;</p><p class="source-code">   &lt;/a&gt;</p><p class="source-code">   &lt;button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"</p><p class="source-code">       aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"&gt;</p><p class="source-code">       &lt;span class="navbar-toggler-icon"&gt;&lt;/span&gt;</p><p class="source-code">   &lt;/button&gt;</p><p class="source-code">   &lt;div class="collapse navbar-collapse" </p><p class="source-code">      id="navbarSupportedContent"&gt;</p><p class="source-code">       &lt;ul class="navbar-nav mr-auto"&gt;</p><p class="source-code">           &lt;li class="nav-item active"&gt;</p><p class="source-code">               &lt;a class="nav-link" href="/"&gt;Home&lt;/a&gt;</p><p class="source-code">           &lt;/li&gt;</p><p class="source-code">       &lt;/ul&gt;</p><p class="source-code">   &lt;/div&gt;</p><p class="source-code">&lt;/nav&gt;</p></li>
				<li>Next, remove the navbar lines of code from the <strong class="source-inline">index.tmpl</strong> and <strong class="source-inline">recipe.tmpl</strong> files <a id="_idIndexMarker371"/>and import the <strong class="source-inline">navbar</strong> template from the <strong class="source-inline">navbar.tmpl</strong> file <a id="_idIndexMarker372"/>with the following instructions:<p class="source-code">&lt;html&gt;</p><p class="source-code">&lt;head&gt;</p><p class="source-code">   &lt;title&gt;{{ .recipe.Name }} - Recipes&lt;/title&gt;</p><p class="source-code">   ...</p><p class="source-code">&lt;/head&gt;</p><p class="source-code">&lt;body&gt;</p><p class="source-code">   {{template "navbar.tmpl"}}</p><p class="source-code">   &lt;section class="container recipe"&gt;</p><p class="source-code">       &lt;div class="row"&gt;</p><p class="source-code">           &lt;div class="col-md-3"&gt;</p><p class="source-code">               &lt;img src="{{ .recipe.Picture }}" </p><p class="source-code">                class="card-img-top"&gt;</p><p class="source-code">           &lt;/div&gt;</p><p class="source-code">           &lt;div class="col-md-9"&gt;</p><p class="source-code">               &lt;h4&gt;{{ .recipe.Name }}&lt;/h4&gt;</p><p class="source-code">               &lt;ul class="list-group list-steps"&gt;</p><p class="source-code">                   &lt;li class="list-group-item </p><p class="source-code">                     active"&gt;Steps&lt;/li&gt;</p><p class="source-code">                   {{range $step := .recipe.Steps }}</p><p class="source-code">                   &lt;li class="list-group-</p><p class="source-code">                       item"&gt;{{$step}}&lt;/li&gt;</p><p class="source-code">                   {{end}}</p><p class="source-code">               &lt;/ul&gt;</p><p class="source-code">           &lt;/div&gt;</p><p class="source-code">       &lt;/div&gt;</p><p class="source-code">   &lt;/section&gt;</p><p class="source-code">&lt;/body&gt;</p><p class="source-code">...</p><p class="source-code">&lt;/html&gt;</p></li>
			</ol>
			<p>Your <a id="_idIndexMarker373"/>reusable template is created.</p>
			<p>The line <a id="_idIndexMarker374"/>containing <strong class="source-inline">{{template "navbar.tmpl"}}</strong> is used to dynamically load the navbar. As with the navbar, you can create reusable templates from common pieces of your application such as header, footer, forms, and so on. The directory structure of your project at this stage should look like this:</p>
			<div>
				<div id="_idContainer172" class="IMG---Figure">
					<img src="image/Figure_5.11_B17115.jpg" alt="Figure 5.11 – Project structure&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 5.11 – Project structure</p>
			<p>So far, you have seen how to run the application locally by compiling the source code. But what if<a id="_idIndexMarker375"/> you wanted to build a binary of our web <a id="_idIndexMarker376"/>application so that we can deploy it remotely or share it with others? Let's have a look at how to do this.</p>
			<h1 id="_idParaDest-88"><a id="_idTextAnchor094"/>Building a self-contained web application</h1>
			<p>Luckily, Go is a<a id="_idIndexMarker377"/> compiled language, which means that you can create an executable or binary with the needed dependencies, all with a single command, as illustrated here:</p>
			<p class="source-code">go build -o app main.go</p>
			<p class="callout-heading">Note</p>
			<p class="callout">You can build an executable for different architectures or platforms (Windows, macOS, Linux, and so on) with <strong class="source-inline">GOOS</strong> and <strong class="source-inline">GOARCH</strong> environment variables.</p>
			<p>The command creates an executable called <strong class="source-inline">app</strong> in your current directory. By default, Go uses the name of the application directory for naming the executable. However, you can specify a different name or location for the executable with a <strong class="source-inline">-o</strong> flag. </p>
			<p>You can now execute the binary with the following command:</p>
			<p class="source-code">./app</p>
			<p>The server will start on port <strong class="source-inline">8080</strong> as usual, and you can access the web application from <strong class="source-inline">localhost:8080</strong>, as illustrated in the following screenshot:</p>
			<div>
				<div id="_idContainer173" class="IMG---Figure">
					<img src="image/Figure_5.12_B17115.jpg" alt="Figure 5.12 – Running an executable&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 5.12 – Running an executable</p>
			<p>The application is working as expected because the HTML templates and assets are located in the same folder where the executable is being executed.</p>
			<p>What if you run the binary from a different directory? In that case, you would need to follow these steps: </p>
			<ol>
				<li value="1">Copy the executable to your home directory with the following commands:<p class="source-code"><strong class="bold">mv app $HOME</strong></p><p class="source-code"><strong class="bold">cd $HOME</strong></p></li>
				<li>Rerun the application—it should crash immediately due to the <strong class="source-inline">templates</strong> folder not being found. You will see something that looks like this:<div id="_idContainer174" class="IMG---Figure"><img src="image/Figure_5.13_B17115.jpg" alt="Figure 5.13 – Application stack traces&#13;&#10;"/></div><p class="figure-caption">Figure 5.13 – Application stack traces</p><p>You can copy <a id="_idIndexMarker378"/>the <strong class="source-inline">templates</strong> and <strong class="source-inline">assets</strong> folders to the home directory. However, it's often cumbersome to remember to update all the file references when upgrading or moving a binary to a new location. A better solution is to embed all static files in a single binary. </p></li>
				<li><strong class="source-inline">go-assets-builder</strong> is a tool that converts any text or binary file into Go source code, making it the perfect choice for embedding assets into Go applications. Install the <strong class="source-inline">go-assets-builder</strong> package with the following command:<p class="source-code"><strong class="bold">go get github.com/jessevdk/go-assets-builder</strong></p></li>
				<li>Then, invoke the <strong class="source-inline">go-assets-builder</strong> command to generate Go code from the static files, as follows:<p class="source-code"><strong class="bold">go-assets-builder templates assets 404.html recipes.json -o assets.go</strong></p><p>The command will generate an <strong class="source-inline">assets.go</strong> source file. The resulting code will look like <a id="_idIndexMarker379"/>this:</p><p class="source-code">var Assets = assets.NewFileSystem(map[string][]string{</p><p class="source-code">    "/": []string{"assets", "templates", "404.html", </p><p class="source-code">    "recipes.json"}, "/assets/css":   </p><p class="source-code">    []string{"app.css"}, "/assets/images": </p><p class="source-code">    []string{"stuffed-cornsquash.jpg", "curry-chicken-</p><p class="source-code">    salad.jpg"}, "/templates": []string{"navbar.tmpl", </p><p class="source-code">    "index.tmpl", "recipe.tmpl"}}, </p><p class="source-code">     map[string]*assets.File{</p><p class="source-code">   "/": &amp;assets.File{</p><p class="source-code">       Path:     "/",</p><p class="source-code">       FileMode: 0x800001ed,</p><p class="source-code">       Mtime:    time.Unix(1615118299, </p><p class="source-code">                 1615118299722824447),</p><p class="source-code">       Data:     nil,</p><p class="source-code">   },  "/templates/navbar.tmpl": &amp;assets.File{</p><p class="source-code">       Path:     "/templates/navbar.tmpl",</p><p class="source-code">       FileMode: 0x1a4,</p><p class="source-code">       Mtime:    time.Unix(1614862865, </p><p class="source-code">                           1614862865957528581),</p><p class="source-code">       Data:     []byte(_Assets9a0a5c784c66e5609ac</p><p class="source-code">                        d084702e97a6a733e0d56),</p><p class="source-code">   }, "/recipes.json": &amp;assets.File{</p><p class="source-code">       Path:     "/recipes.json",</p><p class="source-code">       FileMode: 0x1a4,</p><p class="source-code">       Mtime:    time.Unix(1614782782,  	 	 	 	                           1614782782296236029),</p><p class="source-code">       Data:     []byte(_Assets142ce9f9ba8b43eeb97b8</p><p class="source-code">                        3c79ea872ed40e6cba1),</p><p class="source-code">   }, "")</p></li>
				<li>Next, update <strong class="source-inline">main.go</strong> to load the HTML files. The templates are accessible via the <strong class="source-inline">Assets.Files</strong> map <a id="_idIndexMarker380"/>structure. Make sure to import the <strong class="source-inline">html/template</strong> library. The code is illustrated in the following snippet:<p class="source-code">func loadTemplate() (*template.Template, error) {</p><p class="source-code">   t := template.New("")</p><p class="source-code">   for name, file := range Assets.Files {</p><p class="source-code">       if file.IsDir() || !strings.HasSuffix(name, </p><p class="source-code">               ".tmpl") {</p><p class="source-code">           continue</p><p class="source-code">       }</p><p class="source-code">       h, err := ioutil.ReadAll(file)</p><p class="source-code">       if err != nil {</p><p class="source-code">           return nil, err</p><p class="source-code">       }</p><p class="source-code">       t, err = t.New(name).Parse(string(h))</p><p class="source-code">       if err != nil {</p><p class="source-code">           return nil, err</p><p class="source-code">       }</p><p class="source-code">   }</p><p class="source-code">   return t, nil</p><p class="source-code">}</p></li>
				<li>Then, update the HTTP router to call the <strong class="source-inline">loadTemplate</strong> method when the server is asked to serve <strong class="source-inline">index.tmpl</strong>, <strong class="source-inline">recipe.tmpl</strong>, or <strong class="source-inline">navbar.tmpl</strong> templates, as <a id="_idIndexMarker381"/>follows:<p class="source-code"> func main() {</p><p class="source-code">   t, err := loadTemplate()</p><p class="source-code">   if err != nil {</p><p class="source-code">       panic(err)</p><p class="source-code">   }</p><p class="source-code">   router := gin.Default()</p><p class="source-code">   router.SetHTMLTemplate(t)</p><p class="source-code">   router.GET("/", IndexHandler)</p><p class="source-code">   router.GET("/recipes/:id", RecipeHandler)</p><p class="source-code">   router.GET("/assets/*filepath", StaticHandler)</p><p class="source-code">   router.Run()</p><p class="source-code"> }</p></li>
				<li>For assets files (CSS and images), define a custom HTTP handler to serve the right asset based on the <strong class="source-inline">filepath</strong> parameter, as follows:<p class="source-code">func StaticHandler(c *gin.Context) {</p><p class="source-code">   filepath := c.Param("filepath")</p><p class="source-code">   data := Assets.Files["/assets"+filepath].Data</p><p class="source-code">   c.Writer.Write(data)</p><p class="source-code">}</p></li>
				<li>Next, define a route for the <strong class="source-inline">assets</strong> folder with a <strong class="source-inline">filepath</strong> parameter, as follows: <p class="source-code">router.GET("/assets/*filepath", StaticHandler)</p></li>
				<li>Update the <strong class="source-inline">recipes.json</strong> file as well, to load it from the <strong class="source-inline">Assets.Files</strong> map instead of the disk, as follows:<p class="source-code">func init() {</p><p class="source-code">   recipes = make([]Recipe, 0)</p><p class="source-code">   json.Unmarshal(Assets.Files["/recipes.json"].Data, </p><p class="source-code">      &amp;recipes)</p><p class="source-code">}</p></li>
				<li>Make <a id="_idIndexMarker382"/>sure to update the <strong class="source-inline">navbar</strong> reference in <strong class="source-inline">index.tmpl</strong> and <strong class="source-inline">recipe.tmpl</strong> as well, like this:<p class="source-code">{{template "/templates/navbar.tmpl"}}</p></li>
				<li>Finally, fix the <strong class="source-inline">templates</strong> path in both <strong class="source-inline">RecipeHandler</strong> and <strong class="source-inline">IndexHandler</strong> handlers.</li>
				<li>Now, build the application with the new changes. Issue the following command:<p class="source-code"><strong class="bold">go build -o app</strong></p><p class="source-code"><strong class="bold">mv app $HOME</strong></p><p class="source-code"><strong class="bold">cd $HOME</strong></p><p class="source-code"><strong class="bold">./app</strong></p></li>
			</ol>
			<p>This time, the application will be functional, and all assets will be loaded from the binary. You can see the result here: </p>
			<div>
				<div id="_idContainer175" class="IMG---Figure">
					<img src="image/B17115_05_14_v2.jpg" alt="Figure 5.14 – Embedding web application assets&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 5.14 – Embedding web application assets</p>
			<p>You can now<a id="_idIndexMarker383"/> share the binary with your friends and deploy it easily on a remote server.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">In <a href="B17115_08_Final_JM_ePub.xhtml#_idTextAnchor131"><em class="italic">Chapter 8</em></a><em class="italic">, Deploying the Application on AWS</em>, we will explore how to deploy your distributed web application on the cloud with Docker and Kubernetes.</p>
			<h2 id="_idParaDest-89"><a id="_idTextAnchor095"/>Bundling static files</h2>
			<p>In this <a id="_idIndexMarker384"/>chapter, we are using Go 1.16, which<a id="_idIndexMarker385"/> comes with new features and enhancements such as embedded files being supported without the need for an external package such as <strong class="source-inline">go-assets-builder</strong>.</p>
			<p class="callout-heading">Note</p>
			<p class="callout">You can use <strong class="bold">Go Version Manager</strong> (<strong class="bold">GVM</strong>) to manage multiple Go versions. You can install the latest <a id="_idIndexMarker386"/>release of Go with the <strong class="source-inline">gvm install go1.16</strong> command. </p>
			<p>Go 1.16 introduced a <strong class="source-inline">//go:embed</strong> directive that allows you to include contents of files and directories within a Go application. You can do so by implementing the following:</p>
			<ol>
				<li value="1">In <strong class="source-inline">main.go</strong>, define an <strong class="source-inline">embed.FS</strong> variable to hold a group of files. Then, define a comment just above the variable declaration, as follows:<p class="source-code">//go:embed assets/* templates/* 404.html recipes.json</p><p class="source-code">var f embed.FS</p></li>
				<li>Update <a id="_idIndexMarker387"/>the <strong class="source-inline">init()</strong> function to read <a id="_idIndexMarker388"/>the <strong class="source-inline">recipes.json</strong> file from the <strong class="source-inline">FS</strong> variable, as follows:<p class="source-code">func init() {</p><p class="source-code">   recipes = make([]Recipe, 0)</p><p class="source-code">   data, _ := f.ReadFile("recipes.json")</p><p class="source-code">   json.Unmarshal(data, &amp;recipes)</p><p class="source-code">}</p></li>
				<li>Then, use the <strong class="source-inline">http.FS</strong> file to create an HTTP filesystem to serve <strong class="source-inline">assets</strong> files, as follows: <p class="source-code">func main() {</p><p class="source-code">   templ := template.Must(template.New("").ParseFS(f, "templates/*.tmpl"))</p><p class="source-code">   fsys, err := fs.Sub(f, "assets")</p><p class="source-code">   if err != nil {</p><p class="source-code">       panic(err)</p><p class="source-code">   }</p><p class="source-code">   router := gin.Default()</p><p class="source-code">   router.SetHTMLTemplate(templ)</p><p class="source-code">   router.StaticFS("/assets", http.FS(fsys))</p><p class="source-code">   router.GET("/", IndexHandler)</p><p class="source-code">   router.GET("/recipes/:id", RecipeHandler)</p><p class="source-code">   router.Run()</p><p class="source-code">}</p></li>
				<li>Rebuild the binary with the <strong class="source-inline">go build</strong> command.<p class="callout-heading">Note</p><p class="callout">Make sure <a id="_idIndexMarker389"/>to remove the <strong class="source-inline">/templates</strong> prefixes<a id="_idIndexMarker390"/> from the HTTP handlers and template files before building the binary.</p></li>
			</ol>
			<p>The final result is a single web server binary ready for distribution! </p>
			<h1 id="_idParaDest-90"><a id="_idTextAnchor096"/>Building a SPA</h1>
			<p>While you can<a id="_idIndexMarker391"/> build complete web applications with Gin by rendering HTML templates and serving the static files, as the application grows it becomes hard to maintain it. That's why you can adopt a popular frontend JavaScript framework such as Angular, React, or Vue.js to build your SPA. In this section we will go with React, but you can get the same results with other JavaScript frameworks as well. </p>
			<p>The application we'll build will do the following:</p>
			<ul>
				<li>Display the list of all recipes on the home page (for all users).</li>
				<li>Let users sign in with their username and password.</li>
				<li>Let users create new recipes (logged-in users only).</li>
			</ul>
			<p>First of all, we will need to make sure that Node.js is installed on your system. You can install the <strong class="bold">long-term support</strong> (<strong class="bold">LTS</strong>) version (14.16.0) from the official page at <a href="https://nodejs.org/en/download/">https://nodejs.org/en/download/</a>, or you can use the <strong class="bold">Node Version Manager</strong> (<strong class="bold">NVM</strong>) to install Node.js easily, based on your <strong class="bold">operating system</strong> (<strong class="bold">OS</strong>).</p>
			<p>To install NVM, proceed as follows: </p>
			<ol>
				<li value="1">Run the following script:<p class="source-code"><strong class="bold">curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.37.2/install.sh | bash</strong></p></li>
				<li>This could take anywhere from a few seconds to a few minutes, but once your installation <a id="_idIndexMarker392"/>has completed, issue the following command to install the LTS version of Node.js:<p class="source-code"><strong class="bold">nvm install 14.16.0 </strong></p></li>
			</ol>
			<p>With Node.js installed, we're ready to build our web application with React.</p>
			<h2 id="_idParaDest-91"><a id="_idTextAnchor097"/>Getting started with React</h2>
			<p>In this <a id="_idIndexMarker393"/>section, you will set up your React <a id="_idIndexMarker394"/>environment. To do so, apply the following steps: </p>
			<ol>
				<li value="1">Open your terminal and navigate to your workspace. Then, install <strong class="source-inline">create react app</strong> with the <a id="_idIndexMarker395"/>following command. The <strong class="bold">command-line interface</strong> (<strong class="bold">CLI</strong>) simplifies the setup process of a React environment:<p class="source-code"><strong class="bold">npm install -g create-react-app</strong></p></li>
				<li>Then, create a React project with the CRA CLI. The project name is <strong class="source-inline">recipes-web</strong>, as we can see here:<p class="source-code"><strong class="bold">create-react-app recipes-web</strong></p><p>Here is the command output:</p><div id="_idContainer176" class="IMG---Figure"><img src="image/Figure_5.15_B17115.jpg" alt="Figure 5.15 – Setup of new React project&#13;&#10;"/></div><p class="figure-caption">Figure 5.15 – Setup of a new React project</p><p>After<a id="_idIndexMarker396"/> running the preceding<a id="_idIndexMarker397"/> command, the project structure will look like this. The project is created with all of the proper behind-the-scenes configurations automatically hooked up:</p><div id="_idContainer177" class="IMG---Figure"><img src="image/Figure_5.16_B17115.jpg" alt="Figure 5.16 – React project structure&#13;&#10;"/></div><p class="figure-caption">Figure 5.16 – React project structure</p><p class="callout-heading">Note</p><p class="callout">Make sure to create a GitHub repository for your web application and push all the changes to the remote repository.</p></li>
				<li>Navigate to<a id="_idIndexMarker398"/> the <strong class="source-inline">recipes-web</strong> folder <a id="_idIndexMarker399"/>and enter the following commands to launch the application:<p class="source-code"><strong class="bold">cd recipes-web</strong></p><p class="source-code"><strong class="bold">npm start</strong></p><p>The project will be built, and a local web server will be exposed on port <strong class="source-inline">3000</strong>, as illustrated in the following screenshot:</p><div id="_idContainer178" class="IMG---Figure"><img src="image/Figure_5.17_B17115.jpg" alt="Figure 5.17 – Local development server&#13;&#10;"/></div><p class="figure-caption">Figure 5.17 – Local development server</p></li>
				<li>Head to your browser and navigate to <strong class="source-inline">Localhost:3000.</strong> <strong class="source-inline">Apart</strong> <strong class="source-inline">from;</strong> you will see something similar to the following screenshot:</li>
			</ol>
			<div>
				<div id="_idContainer179" class="IMG---Figure">
					<img src="image/Figure_5.18_B17115.jpg" alt="Figure 5.18 – React “Hello World” application&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 5.18 – React "Hello World" application</p>
			<p>Right now, your application doesn't do a whole lot. It doesn't look like much, either. Let's build<a id="_idIndexMarker400"/> the recipe listing, using React<a id="_idIndexMarker401"/> components.</p>
			<h2 id="_idParaDest-92"><a id="_idTextAnchor098"/>Exploring React components</h2>
			<p>One of the<a id="_idIndexMarker402"/> basic<a id="_idIndexMarker403"/> foundations when building a SPA is the usage of components. Throughout this section, we'll explore how to build a <strong class="bold">Recipes</strong> dashboard based on React components.</p>
			<p>The first thing you're going to do is create an <strong class="source-inline">App</strong> component to list the <strong class="source-inline">recipes</strong> array by referencing a <strong class="source-inline">Recipe</strong> element. To do so, proceed as follows: </p>
			<ol>
				<li value="1">Update the <strong class="source-inline">App.js</strong> file with the following content:<p class="source-code">import React from 'react';</p><p class="source-code">import './App.css';</p><p class="source-code">import Recipe from './Recipe';</p><p class="source-code">class App extends React.Component {</p><p class="source-code"> constructor(props) {</p><p class="source-code">   super(props)</p><p class="source-code">   this.state = {</p><p class="source-code">     recipes: [</p><p class="source-code">       {</p><p class="source-code">         "name": "Oregano Marinated Chicken",</p><p class="source-code">         "tags": [</p><p class="source-code">           "main",</p><p class="source-code">           "chicken"</p><p class="source-code">         ],</p><p class="source-code">         "ingredients": [],</p><p class="source-code">         "instructions": []</p><p class="source-code">       },</p><p class="source-code">       {</p><p class="source-code">         "name": "Green pea soup with cheddar </p><p class="source-code">                  scallion panini",</p><p class="source-code">         "tags": [</p><p class="source-code">           "soup",</p><p class="source-code">           "main",</p><p class="source-code">           "panini"</p><p class="source-code">         ],</p><p class="source-code">         "ingredients": [],</p><p class="source-code">         "instructions": []</p><p class="source-code">       }</p><p class="source-code">     ]</p><p class="source-code">   }</p><p class="source-code"> }</p><p class="source-code"> render() {</p><p class="source-code">   return (&lt;div&gt;</p><p class="source-code">     {this.state.recipes.map((recipe, index) =&gt; (</p><p class="source-code">       &lt;Recipe recipe={recipe} /&gt;</p><p class="source-code">     ))}</p><p class="source-code">   &lt;/div&gt;);</p><p class="source-code"> }</p><p>The <a id="_idIndexMarker404"/>component<a id="_idIndexMarker405"/> constructor defines a <strong class="source-inline">recipes</strong> array in the <strong class="source-inline">state</strong> object. The array stores a list of hardcoded recipes.</p></li>
				<li>Next, create a <strong class="source-inline">Recipe</strong> component to display the recipe properties (name, steps, ingredients, and so on). In the <strong class="source-inline">src</strong> directory, create a new file named <strong class="source-inline">Recipe.js</strong> and add the following content to it:<p class="source-code">import React from 'react';</p><p class="source-code">import './Recipe.css';</p><p class="source-code">class Recipe extends React.Component {</p><p class="source-code">   render() {</p><p class="source-code">       return (</p><p class="source-code">           &lt;div class="recipe"&gt;</p><p class="source-code">               &lt;h4&gt;{this.props.recipe.name}&lt;/h4&gt;</p><p class="source-code">               &lt;ul&gt;</p><p class="source-code">                   {this.props.recipe.ingredients &amp;&amp;</p><p class="source-code">                    this.props.recipe.ingredients.map(</p><p class="source-code">                    (ingredient, index) =&gt; {</p><p class="source-code">                       return &lt;li&gt;{ingredient}&lt;/li&gt;</p><p class="source-code">                   })}</p><p class="source-code">               &lt;/ul&gt;</p><p class="source-code">           &lt;/div&gt;</p><p class="source-code">       )</p><p class="source-code">   }</p><p class="source-code">}</p><p class="source-code">export default Recipe;</p></li>
				<li>Create a<a id="_idIndexMarker406"/> style sheet<a id="_idIndexMarker407"/> called <strong class="source-inline">Recipe.css</strong> and add the appropriate style rules to improve the look and feel of the UI elements. Then, import the style sheet in <strong class="source-inline">Recipe.js</strong>.</li>
				<li>Once you've done this, save all of your changes and preview it in your browser, and you'll see something that looks like this:</li>
			</ol>
			<div>
				<div id="_idContainer180" class="IMG---Figure">
					<img src="image/Figure_5.19_B17115.jpg" alt="Figure 5.19 – Rendering App component &#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 5.19 – Rendering the App component </p>
			<p>Great! You have successfully built a SPA to list recipes.</p>
			<p>Right now, the list of recipes is static. You will fix that by calling the <strong class="source-inline">Recipes</strong> API, built in the previous chapter. To do so, proceed as follows:</p>
			<ol>
				<li value="1">First, look <a id="_idIndexMarker408"/>here at the<a id="_idIndexMarker409"/> architecture you're going to build:<div id="_idContainer181" class="IMG---Figure"><img src="image/Figure_5.20_B17115.jpg" alt="Figure 5.20 – Application architecture&#13;&#10;"/></div><p class="figure-caption">Figure 5.20 – Application architecture</p><p>The <strong class="source-inline">Recipes</strong> API is exposed on port <strong class="source-inline">8080</strong>, therefore define a <strong class="source-inline">getRecipes</strong> method in <strong class="source-inline">App.js</strong> to call the <strong class="source-inline">/recipes</strong> endpoint and save the returned results in the <strong class="source-inline">recipes</strong> array, as follows:</p><p class="source-code">getRecipes() {</p><p class="source-code">   fetch('http://localhost:8080/recipes')</p><p class="source-code">     .then(response =&gt; response.json())</p><p class="source-code">     .then(data =&gt; this.setState({ recipes: data }));</p><p class="source-code">}</p></li>
				<li>Next, call the method on the <strong class="source-inline">App</strong> component constructor with the following instruction:<p class="source-code">constructor(props) {</p><p class="source-code">   super(props)</p><p class="source-code">   this.state = {</p><p class="source-code">     recipes: []</p><p class="source-code">   }</p><p class="source-code">   this.getRecipes();</p><p class="source-code">}</p></li>
				<li>Make<a id="_idIndexMarker410"/> sure the API is<a id="_idIndexMarker411"/> being served on port <strong class="source-inline">8080</strong>, as follows:<div id="_idContainer182" class="IMG---Figure"><img src="image/Figure_5.21_B17115.jpg" alt="Figure 5.21 – Recipes API logs&#13;&#10;"/></div><p class="figure-caption">Figure 5.21 – Recipes API logs</p></li>
				<li>Head back to your browser, and you should see a blank page. If you open the browser debugging console, you'll see that the call to the API has been blocked by a CORS policy, as illustrated in the following screenshot:</li>
			</ol>
			<div>
				<div id="_idContainer183" class="IMG---Figure">
					<img src="image/B17115_05_22_v2.jpg" alt="Figure 5.22 – CORS errors&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 5.22 – CORS errors</p>
			<p>Because the <strong class="source-inline">Recipes</strong> API and web application are running in different ports, you need to set some headers on the API to allow the <strong class="bold">Cross-Origin Resource Sharing (CORS)</strong>. </p>
			<h2 id="_idParaDest-93"><a id="_idTextAnchor099"/>Resolving cross-origin requests</h2>
			<p>By default, the <a id="_idIndexMarker412"/>API uses a<a id="_idIndexMarker413"/> same-origin policy to limit the ability for the API to interact with resources outside of the source domain. We can bypass the same-origin policy with CORS.</p>
			<p>To resolve the CORS issues, proceed as follows:</p>
			<ol>
				<li value="1">Download the Gin official CORS middleware with the following command:<p class="source-code"><strong class="bold">go get github.com/gin-contrib/cors</strong></p></li>
				<li>Then, update the <strong class="source-inline">main.go</strong> file of the <strong class="source-inline">Recipes</strong> API project to allow all origins by defining the <strong class="source-inline">cors.Default()</strong> method as a middleware, as follows:<p class="source-code">router.Use(cors.Default())</p></li>
				<li>The middleware will be executed before handling the incoming HTTP request. The <strong class="source-inline">cors.Default()</strong> method will allow all HTTP methods and origins, but you can restrict the requests to trusted origins. Define the origins and allow incoming HTTP methods with the following code:<p class="source-code">router.Use(cors.New(cors.Config{</p><p class="source-code">   AllowOrigins:     []string{"http://localhost</p><p class="source-code">                      :3000"},</p><p class="source-code">   AllowMethods:     []string{"GET", "OPTIONS"},</p><p class="source-code">   AllowHeaders:     []string{"Origin"},</p><p class="source-code">   ExposeHeaders:    []string{"Content-Length"},</p><p class="source-code">   AllowCredentials: true,</p><p class="source-code">   MaxAge: 12 * time.Hour,</p><p class="source-code">}))</p></li>
				<li>Rerun the API server and head back to your browser, and refresh the web application page.</li>
			</ol>
			<p>This time, the HTTP<a id="_idIndexMarker414"/> request should be <a id="_idIndexMarker415"/>successful, and you should see a list of recipes, as follows:</p>
			<div>
				<div id="_idContainer184" class="IMG---Figure">
					<img src="image/Figure_5.23_B17115.jpg" alt="Figure 5.23 – List of recipes&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 5.23 – List of recipes</p>
			<p>Now, you <a id="_idIndexMarker416"/>can take the project further <a id="_idIndexMarker417"/>and add an authentication layer with Auth0, as follows:</p>
			<p class="callout-heading">Note</p>
			<p class="callout">For a step-by-step guide on how to enable authentication with Auth0, check the previous chapter.</p>
			<ol>
				<li value="1">Navigate to the <strong class="bold">Auth0 dashboard</strong> (<a href="https://manage.auth0.com/dashboard">https://manage.auth0.com/dashboard</a>), and create an application of type <strong class="bold">Single Page Web Applications</strong>, as illustrated in the <a id="_idIndexMarker418"/>following<a id="_idIndexMarker419"/> screenshot:<div id="_idContainer185" class="IMG---Figure"><img src="image/Figure_5.24_B17115.jpg" alt="Figure 5.24 – SPA on Auth0&#13;&#10;"/></div><p class="figure-caption">Figure 5.24 – SPA on Auth0</p></li>
				<li>Next, click on <strong class="bold">Create</strong>, and set the <strong class="bold">Allowed Callback URLs</strong> field to <strong class="source-inline">Localhost:3000.</strong> <strong class="source-inline">Apart</strong> <strong class="source-inline">from,</strong> as illustrated in the following screenshot. The URL will be used by Auth0 to redirect users after they have authenticated:<p class="figure-caption">  </p><div id="_idContainer186" class="IMG---Figure"><img src="image/Figure_5.25_B17115.jpg" alt="Figure 5.25 – Configuring allowed callback URLs&#13;&#10;"/></div><p class="figure-caption">Figure 5.25 – Configuring allowed callback URLs</p></li>
				<li>Set the <strong class="bold">Allowed Origins</strong> field to <strong class="source-inline">localhost:3000</strong> to authorize the application to make requests to the Auth0 API.</li>
				<li>Now, to<a id="_idIndexMarker420"/> integrate <a id="_idIndexMarker421"/>Auth0 into your web application, install <a id="_idIndexMarker422"/>the Auth0 React <strong class="bold">software development kit</strong> (<strong class="bold">SDK</strong>). Run the following command within your project folder to install the SDK:<p class="source-code"><strong class="bold">npm install @auth0/auth0-react</strong></p></li>
				<li>Next, wrap the root component of the application with <strong class="source-inline">Auth0Provider</strong>. Update the <strong class="source-inline">index.js</strong> file, as follows:<p class="source-code">import { Auth0Provider } from "@auth0/auth0-react";</p><p class="source-code">ReactDOM.render(</p><p class="source-code"> &lt;Auth0Provider</p><p class="source-code">   domain="AUTH0_DOMAIN"</p><p class="source-code">   clientId="AUTH_CLIENT_ID"</p><p class="source-code">   redirectUri={window.location.origin}</p><p class="source-code"> &gt;</p><p class="source-code">   &lt;App /&gt;</p><p class="source-code"> &lt;/Auth0Provider&gt;,</p><p class="source-code"> document.getElementById("root")</p><p class="source-code">);</p><p>The Auth0 component takes the following properties:</p><p><strong class="source-inline">a.</strong> <strong class="source-inline">domain</strong>: The Auth0 domain. The value is available under the <strong class="bold">Settings</strong> page of the SPA you created earlier.</p><p><strong class="source-inline">b.</strong> <strong class="source-inline">clientId</strong>: The <a id="_idIndexMarker423"/>Auth0 <a id="_idIndexMarker424"/>client ID. The value is also available under the <strong class="bold">Settings</strong> page.</p><p><strong class="source-inline">c.</strong> <strong class="source-inline">redirectUri</strong>: The <strong class="bold">Uniform Resource Identifier</strong> (<strong class="bold">URI</strong>) where you would like to <a id="_idIndexMarker425"/>redirect users after they authenticate with Auth0.</p><p>The <strong class="source-inline">ReactDOM.render</strong> method looks for the root element defined in <strong class="source-inline">index.html</strong> (located inside the <strong class="source-inline">public</strong> folder) and loads the Auth0 component on it.</p></li>
				<li>Then, create a <strong class="source-inline">Navbar</strong> component with a login button. When the user clicks on the login button, the <strong class="source-inline">loginWithRedirect</strong> method from the <strong class="source-inline">useAuth0()</strong> hook will be called. The method will redirect the user to the Auth0 login page, where they can authenticate. Upon successful authentication, Auth0 will redirect the user back to the application based on the redirection URL defined earlier. The code<a id="_idIndexMarker426"/> is <a id="_idIndexMarker427"/>illustrated in the following snippet:<p class="source-code">import React from 'react';</p><p class="source-code">import { useAuth0 } from "@auth0/auth0-react";</p><p class="source-code">import Profile from './Profile';</p><p class="source-code">const Navbar = () =&gt; {</p><p class="source-code">   const { isAuthenticated, loginWithRedirect, logout,</p><p class="source-code">           user } = useAuth0();</p><p class="source-code">   return (</p><p class="source-code">       &lt;nav class="navbar navbar-expand-lg navbar-</p><p class="source-code">           light bg-light"&gt;</p><p class="source-code">           &lt;a class="navbar-brand" </p><p class="source-code">               href="#"&gt;Recipes&lt;/a&gt;</p><p class="source-code">           &lt;button class="navbar-toggler" </p><p class="source-code">           type="button" data-toggle="collapse" data-</p><p class="source-code">           target="#navbarTogglerDemo02" aria-</p><p class="source-code">           controls="navbarTogglerDemo02" aria-</p><p class="source-code">           expanded="false" aria-label="Toggle </p><p class="source-code">           navigation"&gt;</p><p class="source-code">               &lt;span class="navbar-toggler-</p><p class="source-code">                            icon"&gt;&lt;/span&gt;</p><p class="source-code">           &lt;/button&gt;</p><p class="source-code">           &lt;div class="collapse navbar-collapse" </p><p class="source-code">                       id="navbarTogglerDemo02"&gt;</p><p class="source-code">               &lt;ul class="navbar-nav ml-auto"&gt;</p><p class="source-code">                   &lt;li class="nav-item"&gt;</p><p class="source-code">                       {isAuthenticated ? (&lt;Profile </p><p class="source-code">                           /&gt;) : (</p><p class="source-code">                           &lt;a class="nav-link active" </p><p class="source-code">                                     onClick={() =&gt; </p><p class="source-code">                                 loginWithRedirect()}&gt; </p><p class="source-code">                                Login&lt;/a&gt;</p><p class="source-code">                       )}</p><p class="source-code">                   &lt;/li&gt;</p><p class="source-code">               &lt;/ul&gt;</p><p class="source-code">           &lt;/div&gt;</p><p class="source-code">       &lt;/nav &gt;</p><p class="source-code">   )</p><p class="source-code">}</p><p class="source-code">export default Navbar;</p><p class="callout-heading">Note</p><p class="callout">To prevent any<a id="_idIndexMarker428"/> rendering<a id="_idIndexMarker429"/> errors, the <strong class="source-inline">isAuthenticated</strong> property is used to check if Auth0 has authenticated the user before displaying the logged-in username and picture using the <strong class="source-inline">Profile</strong> component.</p></li>
				<li>In the code, we're using existing UI elements provided by the Bootstrap framework. The framework can be installed with the following command:<p class="source-code"><strong class="bold">npm install bootstrap</strong></p></li>
				<li>Once installed, reference the framework with an <strong class="source-inline">import</strong> statement on top of <strong class="source-inline">index.js</strong>, as follows:<p class="source-code">import 'bootstrap/dist/css/bootstrap.min.css';</p><p class="source-code">import 'bootstrap/dist/js/bootstrap.min.js';</p></li>
				<li>Then, add the <strong class="source-inline">Navbar</strong> component to <strong class="source-inline">App.js</strong>, as follows:<p class="source-code">render() {</p><p class="source-code">   return (&lt;div&gt;</p><p class="source-code">     &lt;Navbar /&gt;</p><p class="source-code">     {this.state.recipes.map((recipe, index) =&gt; (</p><p class="source-code">       &lt;Recipe recipe={recipe} /&gt;</p><p class="source-code">     ))}</p><p class="source-code">   &lt;/div&gt;);</p><p class="source-code">}</p></li>
				<li>Preview<a id="_idIndexMarker430"/> your <a id="_idIndexMarker431"/>application after this change, and it should look like this:<div id="_idContainer187" class="IMG---Figure"><img src="image/Figure_5.26_B17115.jpg" alt="Figure 5.26 – Rendering list of recipes&#13;&#10;"/></div><p class="figure-caption">Figure 5.26 – Rendering list of recipes</p></li>
				<li>Now, click on <strong class="bold">Login</strong>. You'll be redirected to the Auth0 login page, where you can sign up<a id="_idIndexMarker432"/> for a new account or sign in with an existing account, as illustrated in the<a id="_idIndexMarker433"/> following screenshot:</li>
			</ol>
			<div>
				<div id="_idContainer188" class="IMG---Figure">
					<img src="image/Figure_5.27_B17115.jpg" alt="Figure 5.27 – Auth0 universal login page&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 5.27 – Auth0 universal login page</p>
			<p>Your authentication has been successful! You'll be redirected to the home page, where you can<a id="_idIndexMarker434"/> browse<a id="_idIndexMarker435"/> through the list of recipes returned by the <strong class="source-inline">Recipes</strong> API, as illustrated in the following screenshot: </p>
			<div>
				<div id="_idContainer189" class="IMG---Figure">
					<img src="image/Figure_5.28_B17115.jpg" alt="Figure 5.28 – Page listing recipes for a logged-in user&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 5.28 – Page listing recipes for a logged-in user</p>
			<p>The application also displays the logged-in username and profile picture. The information is available through the <strong class="source-inline">user</strong> property exposed by the <strong class="source-inline">useAuth0()</strong> hook. You have now successfully created a SPA. </p>
			<p>Your web application is pretty simple in what it does, but by building it from scratch, we covered <a id="_idIndexMarker436"/>almost every little<a id="_idIndexMarker437"/> interesting detail React brings to the table. You can take this further and implement a new recipe form for logged-in users to post new recipes.</p>
			<h1 id="_idParaDest-94"><a id="_idTextAnchor100"/>Summary</h1>
			<p>In this chapter, we learned how to serve HTML templates with the Gin framework and how to create reusable templates and serve static assets. We covered how to implement a SPA with the React framework to consume a Gin RESTful API and how to resolve CORS issues with Gin.</p>
			<p>We have also explored how Auth0 allows you to quickly add authentication to your React application. Finally, we learned how to build a self-contained web application by embedding the application assets during build time.</p>
			<p>In the next chapter, we will explore tips and best practices to architect a scalable, distributed web application with Gin.</p>
			<h1 id="_idParaDest-95"><a id="_idTextAnchor101"/>Questions</h1>
			<ol>
				<li value="1">How would you create reusable templates for the header and footer?</li>
				<li>How would you create a <strong class="source-inline">NewRecipe</strong> component with React?</li>
				<li>How would you build a self-contained binary for Windows, Mac, and Linux?</li>
			</ol>
			<h1 id="_idParaDest-96"><a id="_idTextAnchor102"/>Further reading</h1>
			<ul>
				<li><em class="italic">Full-Stack React Projects - Second Edition</em><strong class="source-inline">,</strong> by Shama Hoque, Packt Publishing</li>
				<li><em class="italic">Full-Stack React, TypeScript, and Node</em>, by David Choi, Packt Publishing</li>
			</ul>
		</div>
	</body></html>