<html><head></head><body>
<div class="book" title="Go in a nutshell">
<div class="book" title="Testing and code coverage"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_12"><a id="ch01lvl2sec20" class="calibre1"/>Testing and code coverage</h2></div></div></div><p class="calibre10">While other languages usually rely on third-party tools for testing, Go includes both a built-in API and tools designed specifically for automated testing, benchmarking, and code coverage. Similar to other features in Go, the test tools use simple conventions to automatically inspect and instrument the test functions found in your code.</p><p class="calibre10">The following function is a simplistic implementation of the Euclidean division algorithm that returns a quotient and a remainder value (as variables <code class="email">q</code> and <code class="email">r</code>) for positive integers:</p><pre class="programlisting">func DivMod(dvdn, dvsr int) (q, r int) { 
  r = dvdn 
  for r &gt;= dvsr { 
    q += 1 
    r = r - dvsr 
  } 
  return 
} 
</pre><p class="calibre10">golang.fyi/ch01/testexample/divide.go</p><p class="calibre10">In a separate source file, we can write a test function to validate the algorithm by checking the remainder value returned by the tested function using the Go test API as shown in the following code:</p><pre class="programlisting">package testexample 
import "testing" 
func TestDivide(t *testing.T) { 
  dvnd := 40 
    for dvsor := 1; dvsor &lt; dvnd; dvsor++ { 
      q, r := DivMod(dvnd, dvsor) 
  if (dvnd % dvsor) != r { 
    t.Fatalf("%d/%d q=%d, r=%d, bad remainder.", dvnd, dvsor, q, r) 
    } 
  } 
}  
</pre><p class="calibre10">golang.fyi/ch01/testexample/divide_test.go</p><p class="calibre10">To exercise the test source code, simply run Go's test tool as shown in the following example:</p><pre class="programlisting">
<span class="strong"><strong class="calibre2">$&gt; go test . </strong></span>
<span class="strong"><strong class="calibre2">ok   github.com/vladimirvivien/learning-go/ch01/testexample  0.003s</strong></span>
</pre><p class="calibre10">The test tool reports a summary of the test result indicating the package that was tested and its pass/fail outcome. The Go Toolchain comes with many more features designed to help programmers create testable code, including:</p><div class="book"><ul class="itemizedlist"><li class="listitem">Automatically instrument code to gather coverage statistics during tests</li><li class="listitem">Generating HTML reports for covered code and tested paths</li><li class="listitem">A benchmark API that lets developers collect performance metrics from tests</li><li class="listitem">Benchmark reports with valuable metrics for detecting performance issues</li></ul></div><p class="calibre10">You can read all about testing and its related tools in <a class="calibre1" title="Chapter 12. Code Testing" href="part0083_split_000.html#2F4UM1-9c484ed022e64a0fb0e1aebf8e05d4fd">Chapter 12</a>, <span class="strong"><em class="calibre11">Code Testing</em></span>.</p></div></div></body></html>