<html><head></head><body>
<div class="book" title="Go variables">
<div class="book" title="Variable scope and visibility"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_7"><a id="ch02lvl2sec36" class="calibre1"/>Variable scope and visibility</h2></div></div></div><p class="calibre10">Go uses lexical scoping based on code blocks to determine the visibility of variables within a package. Depending on the location where a variable is declared, within the source text, will determine its scope. As a general rule, a variable is only accessible from within the block where it is declared and visible to all nested sub-blocks.</p><p class="calibre10">The following screenshot illustrates the scope of several variables declared within a source text. Each variable declaration is marked with its scope (<code class="email">package</code>, <code class="email">function</code>, <code class="email">for</code> loop, and <code class="email">if...else</code> block):</p><div class="mediaobject"><img src="../images/00007.jpeg" alt="Variable scope and visibility" class="calibre14"/><div class="caption"><p class="calibre16">golang.fyi/ch02/makenums.go</p></div></div><p class="calibre15"> </p><p class="calibre10">As explained earlier, variable visibility works top-down. Variables with package scope, such as <code class="email">mapFile</code> and <code class="email">numbersFile</code>, are globally visible to all other elements in the package. Moving down the scope ladder, function-block variables such as <code class="email">data</code> and <code class="email">err</code> are visible to all elements in the function and including sub-blocks. Variables <code class="email">i</code> and <code class="email">b</code> in the inner <code class="email">for</code> loop block are only visible within that block. Once the loop is done, <code class="email">i</code> and <code class="email">b</code> would go out of scope.</p><div class="informaltable" title="Note"><h3 class="title2"><a id="note4" class="calibre1"/>Note</h3><p class="calibre10">One source of confusion to newcomers to Go is the visibility of package-scoped variables. When a variable is declared at package level (outside of a function or method block), it is globally visible to the entire package, not just to the source file where the variable is declared. This means a package-scoped variable identifier can only be declared once in a group of files that make up a package, a fact that may not be obvious to developers starting out with Go. Refer to <a class="calibre1" title="Chapter 6. Go Packages and Programs" href="part0042_split_000.html#181NK2-9c484ed022e64a0fb0e1aebf8e05d4fd">Chapter 6</a>, <span class="strong"><em class="calibre11">Go Packages and Programs</em></span>, for details on package organization.</p></div></div></div></body></html>