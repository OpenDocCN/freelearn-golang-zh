<html><head></head><body>
<div class="book" title="The for statements">
<div class="book" title="The traditional for statement"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch03lvl2sec62" class="calibre1"/>The traditional for statement</h2></div></div></div><p class="calibre10">Go also supports the traditional form of the <code class="email">for</code> statement, which includes an initialization statement, a conditional expression, and an update statement, all separated by a semi-colon. This is the form of the statement that is traditionally found in other C-like languages. The following source snippet illustrates the use of a traditional for statement in the function <code class="email">sortByNumber</code>:</p><pre class="programlisting">type Curr struct {  
  Currency string  
  Name     string  
  Country  string  
  Number   int  
}  
 
var currencies = []Curr{  
  Curr{"KES", "Kenyan Shilling", "Kenya", 404},  
  Curr{"AUD", "Australian Dollar", "Australia", 36},  
... 
} 
 
func sortByNumber() {  
  N := len(currencies)  
  for i := 0; i &lt; N-1; i++ {  
     currMin := i  
     for k := i + 1; k &lt; N; k++ {  
    if currencies[k].Number &lt; currencies[currMin].Number {  
         currMin = k  
    }  
     }  
     // swap  
     if currMin != i {  
        temp := currencies[i]  
    currencies[i] = currencies[currMin]  
    currencies[currMin] = temp  
     } 
  }  
} 
</pre><p class="calibre10">golang.fyi/ch03/forstmt.go</p><p class="calibre10">The previous example implements a selection sort that sorts the <code class="email">slice</code> currencies by comparing the <code class="email">Number</code> field of each <code class="email">struct</code> value. The different sections of the <code class="email">for</code> statement are highlighted using the following snippet of code (from the preceding function):</p><div class="mediaobject"><img src="../images/00008.jpeg" alt="The traditional for statement" class="calibre14"/></div><p class="calibre15"> </p><p class="calibre10">It turns out that the traditional <code class="email">for</code> statement is a superset of the other forms of the loop discussed so far, as summarized in the following table:</p><div class="informaltable"><table border="1" class="calibre17"><colgroup class="calibre18"><col class="calibre19"/><col class="calibre19"/></colgroup><tbody class="calibre20"><tr class="calibre21"><td class="calibre22">
<p class="calibre23"><span><strong class="calibre24">For statement</strong></span></p>
</td><td class="calibre22">
<p class="calibre23"><span><strong class="calibre24">Description</strong></span></p>
</td></tr><tr class="calibre21"><td class="calibre22">
<pre class="programlisting1">k:=initialize()
for ; k &lt; 10; 
++{
...
}</pre>
</td><td class="calibre22">
<p class="calibre23">The initialization statement is omitted. Variable <code class="literal">k</code> is initialized outside of the <code class="literal">for</code> statement. The idiomatic way, however, is to initialize your variables with the <code class="literal">for</code> statement.</p>
</td></tr><tr class="calibre21"><td class="calibre22">
<pre class="programlisting1">for k:=0; k &lt; 10;{
...
}</pre>
</td><td class="calibre22">
<p class="calibre23">The <code class="literal">update</code> statement (after the last semi-colon) is omitted here. The developer must provide update logic elsewhere or you risk creating an infinite loop.</p>
</td></tr><tr class="calibre21"><td class="calibre22">
<pre class="programlisting1">for ; k &lt; 10;{
...
}</pre>
</td><td class="calibre22">
<p class="calibre23">This is equivalent to the <code class="literal">for</code> condition form (discussed earlier) <code class="literal">for k &lt; 10 { ... }</code>. Again, the variable <code class="literal">k</code> is expected to be declared prior to the loop. Care must be taken to update <code class="literal">k</code> or you risk creating an infinite loop.</p>
</td></tr><tr class="calibre21"><td class="calibre22">
<pre class="programlisting1">for k:=0; ;k++{
...
}</pre>
</td><td class="calibre22">
<p class="calibre23">Here, the conditional expression is omitted. As before, this evaluates the conditional to <code class="literal">true</code>, which will produce an infinite loop if proper termination logic is not introduced in the loop.</p>
</td></tr><tr class="calibre21"><td class="calibre22">
<pre class="programlisting1">for ; ;{ ... }</pre>
</td><td class="calibre22">
<p class="calibre23">This is equivalent to the form <code class="literal">for{ ... }</code> and produces an infinite loop.</p>
</td></tr></tbody></table></div><p class="calibre10">The initialization and the <code class="email">update</code> statements, in the <code class="email">for</code> loop, are regular Go statements. As such, they can be used to initialize and update multiple variables, as is supported by Go. To illustrate this point, the next example initializes and updates two variables, <code class="email">w1</code> and <code class="email">w2</code>, at the same time in the statement clauses:</p><pre class="programlisting">import ( 
  "fmt" 
  "math/rand" 
) 
 
var list1 = []string{ 
"break", "lake", "go",  
"right", "strong",  
"kite", "hello"}  
 
var list2 = []string{ 
"fix", "river", "stop",  
"left", "weak", "flight",  
"bye"}  
 
func main() {  
  rand.Seed(31)  
  for w1, w2:= nextPair();  
  w1 != "go" &amp;&amp; w2 != "stop";  
  w1, w2 = nextPair() {  
 
    fmt.Printf("Word Pair -&gt; [%s, %s]\n", w1, w2)  
  }  
}  
 
func nextPair() (w1, w2 string) {  
  pos := rand.Intn(len(list1))  
  return list1[pos], list2[pos]  
} 
</pre><p class="calibre10">golang.fyi/ch03/forstmt2.go</p><p class="calibre10">The initialization statements initialize variables <code class="email">w1</code> and <code class="email">w2</code> by calling the function <code class="email">nextPair()</code>. The condition uses a compound logical expression that will keep the loop running as long as it is evaluated to true. Lastly, variables <code class="email">w1</code> and <code class="email">w2</code> are both updated with each iteration of the loop by calling <code class="email">nextPair()</code>.</p></div></div></body></html>