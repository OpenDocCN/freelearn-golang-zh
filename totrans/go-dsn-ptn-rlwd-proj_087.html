<html><head></head><body>
<div class="book" title="The for statements">
<div class="book" title="The for range"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch03lvl2sec63" class="calibre1"/>The for range</h2></div></div></div><p class="calibre10">Lastly, the <code class="email">for</code> statement supports one additional form that uses the keyword <code class="email">range</code> to iterate over an expression that evaluates to an array, slice, map, string, or channel. The for-range loop has this generic form:</p><p class="calibre10"><span class="strong"><em class="calibre11">for [&lt;identifier-list&gt; :=] range &lt;expression&gt; { ... }</em></span></p><p class="calibre10">Depending on the type produced by the <code class="email">range</code> expression, there can be up to two variables emitted by each iteration, as summarized in the following table:</p><div class="informaltable"><table border="1" class="calibre17"><colgroup class="calibre18"><col class="calibre19"/><col class="calibre19"/></colgroup><tbody class="calibre20"><tr class="calibre21"><td class="calibre22">
<p class="calibre23"><span><strong class="calibre24">Range Expression</strong></span></p>
</td><td class="calibre22">
<p class="calibre23"><span><strong class="calibre24">Range Variables</strong></span></p>
</td></tr><tr class="calibre21"><td class="calibre22">
<p class="calibre23">Loop over array or slice:
</p><pre class="programlisting1">for i, v := range []V{1,2,3} {
...
}</pre>
</td><td class="calibre22">
<p class="calibre23">The range produces two values, where <code class="literal">i</code> is the loop index and <code class="literal">v</code> is the value <code class="literal">v[i]</code> from the collection. Further discussions on array and slice are covered in <a class="link" title="Chapter 7. Composite Types" href="part0051_split_000.html#1GKCM2-9c484ed022e64a0fb0e1aebf8e05d4fd">Chapter 7</a>, <span><em class="calibre25">Composite Types</em></span>.</p>
</td></tr><tr class="calibre21"><td class="calibre22">
<p class="calibre23">Loop over string value:
</p><pre class="programlisting1">for i, v := range "Hello" {
...
}</pre>
</td><td class="calibre22">
<p class="calibre23">The range produces two values, where <code class="literal">i</code> is the index of byte in the string and <code class="literal">v</code> is the value of the UTF-8 encoded byte at <code class="literal">v[i]</code> returned as a rune. Further discussion on the string type is covered in in <a class="link" title="Chapter 4. Data Types" href="part0027_split_000.html#PNV61-9c484ed022e64a0fb0e1aebf8e05d4fd">Chapter 4</a>, <span><em class="calibre25">Data Types</em></span>.</p>
</td></tr><tr class="calibre21"><td class="calibre22">
<p class="calibre23">Loop over map:
</p><pre class="programlisting1">for k, v := range map[K]V {
...
}</pre>
</td><td class="calibre22">
<p class="calibre23">The <code class="literal">range</code> produces two values, where <code class="literal">k</code> is assigned the value of the map key of type <code class="literal">K</code> and <code class="literal">v</code> gets stored at <code class="literal">map[k]</code> of type <code class="literal">V</code>. Further discussion on map is covered in <a class="link" title="Chapter 7. Composite Types" href="part0051_split_000.html#1GKCM2-9c484ed022e64a0fb0e1aebf8e05d4fd">Chapter 7</a>, <span><em class="calibre25">Composite Types</em></span>.</p>
</td></tr><tr class="calibre21"><td class="calibre22">
<p class="calibre23">Loop on channel values:
</p><pre class="programlisting1">var ch chan T
for c := range ch {
...
}</pre>
</td><td class="calibre22">
<p class="calibre23">An adequate discussion of channels is covered in <a class="link" title="Chapter 9. Concurrency" href="part0061_split_000.html#1Q5IA1-9c484ed022e64a0fb0e1aebf8e05d4fd">Chapter 9</a>, <span><em class="calibre25">Concurrency</em></span>. A channel is a two-way conduit able to receive and emit values. The <code class="literal">for...range</code> statement assigns each value received from the channel to variable <code class="literal">c</code> with each iteration.</p>
</td></tr></tbody></table></div><p class="calibre10">You should be aware that the value emitted with each iteration is a copy of the original item stored in the source. For instance, in the following program, the values in the slice do not get updated after the loop completes:</p><pre class="programlisting">import "fmt" 
 
func main() { 
  vals := []int{4, 2, 6} 
  for _, v := range vals { 
    v-- 
  } 
  fmt.Println(vals) 
} 
</pre><p class="calibre10">To update the original value using the <code class="email">for...range</code> loop, use the index expression to access the original value, as illustrated in the following.</p><pre class="programlisting">func main() { 
  vals := []int{4, 2, 6} 
  for i, v := range vals { 
    vals[i] = v - 1 
  } 
  fmt.Println(vals) 
} 
</pre><p class="calibre10">In the previous example, value <code class="email">i</code> is used in a slice index expression  <code class="email">vals[i]</code> to update the original value stored in the slice. It is possible to omit the iteration value (the second variable in the assignment) if you only need access to the index value of an array, slice, or string (or key for a map). For instance, in the following example, the <code class="email">for...range</code> statement only emits the current index value with each iteration:</p><pre class="programlisting">func printCurrencies() { 
  for i := range currencies { 
    fmt.Printf("%d: %v\n", i, currencies[i]) 
  } 
} 
</pre><p class="calibre10">golang.fyi/ch03/for-range-stmt.go</p><p class="calibre10">Finally, there are some situations where you may not be interested in any of the values generated by the iteration, but rather the iteration mechanic itself. The next form of the for statement was introduced (as of Version 1.4 of Go) to express a for range without any variable declaration as shown in the following code snippet:</p><pre class="programlisting">func main() { 
  for range []int{1,1,1,1} { 
    fmt.Println("Looping") 
  } 
}  
</pre><p class="calibre10">The previous code will print <code class="email">"Looping"</code> four times on the standard output. This form of the <code class="email">for...range</code> loop is used sometimes when the range expression is over a channel. It is used to simply notify of the presence of a value in the channel.</p></div></div></body></html>