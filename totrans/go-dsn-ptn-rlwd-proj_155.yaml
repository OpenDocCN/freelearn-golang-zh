- en: Package initialization
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 包初始化
- en: '[PRE0]'
  id: totrans-1
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '[PRE1]'
  id: totrans-2
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Go also makes use of a special function named `init` that takes no arguments
    and returns no result values. It is used to encapsulate custom initialization
    logic that is invoked when the package is imported. For instance, the following
    source code shows an `init` function used in the `resistor` package to initialize
    function variable `Rpi`:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: Go 也使用了一个名为 `init` 的特殊函数，它不接受任何参数也不返回任何结果值。它用于封装在包导入时调用的自定义初始化逻辑。例如，以下源代码展示了在
    `resistor` 包中使用的 `init` 函数，用于初始化函数变量 `Rpi`：
- en: '[PRE2]'
  id: totrans-4
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: golang.fyi/ch06/resistor/res_power.go
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: golang.fyi/ch06/resistor/res_power.go
- en: 'In the preceding code, the `init` function is invoked after the package-level
    variables are initialized. Therefore, the code in the `init` function can safely
    rely on the declared variable values to be in a stable state. The `init` function
    is special in the following ways:'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的代码中，`init` 函数是在包级变量初始化之后调用的。因此，`init` 函数中的代码可以安全地依赖于声明的变量值处于稳定状态。`init`
    函数具有以下特殊之处：
- en: A package can have more than one `init` functions defined
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个包可以定义多个 `init` 函数
- en: You cannot directly access declared `init` functions at runtime
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你不能在运行时直接访问声明的 `init` 函数
- en: They are executed in the lexical order they appear within each source file
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它们按照在源文件中出现的词法顺序执行
- en: The `init` function is a great way to inject logic into a package that gets
    executed prior to any other functions or methods.
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`init` 函数是将逻辑注入到在所有其他函数或方法执行之前执行的包中的绝佳方式。'
