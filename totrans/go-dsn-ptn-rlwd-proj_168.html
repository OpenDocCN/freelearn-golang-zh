<html><head></head><body>
<div class="book" title="Chapter&#xA0;7.&#xA0;Composite Types">
<div class="book" title="The array type">
<div class="book" title="Array as parameters"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_7"><a id="ch07lvl2sec113" class="calibre1"/>Array as parameters</h2></div></div></div><p class="calibre10">Arrays values are treated as a single unit. An array variable is not a pointer to a location in memory, but rather represents the entire block of memory containing the array elements. This has the implications of creating a new copy of an array value when the array variable is reassigned or passed in as a function parameter.</p><p class="calibre10">This could have unwanted side effects on memory consumption for a program. One fix for is to use pointer types to reference array values. In the following example, a named type, <code class="email">numbers</code>, is declared to represent array type <code class="email">[1024 * 1024]]int</code>. Instead of taking the array value directly as parameters, functions<code class="email"> initialize()</code> and <code class="email">max()</code> receive a pointer of type <code class="email">*numbers</code>, as shown in the following source snippet:</p><pre class="programlisting">type numbers [1024 * 1024]int 
func initialize(nums *numbers) { 
   rand.Seed(time.Now().UnixNano()) 
   for i := 0; i &lt; size; i++ { 
         nums[i] = rand.Intn(10000) 
   } 
} 
func max(nums *numbers) int { 
   temp := nums[0] 
   for _, val := range nums { 
         if val &gt; temp { 
               temp = val 
         } 
   } 
   return temp 
} 
func main() { 
   var nums *numbers = new(numbers) 
   initialize(nums) 
} 
</pre><p class="calibre10">golang.fyi/ch07/arrptr.go</p><p class="calibre10">The previous code uses the built-in function <code class="email">new(numbers)</code> to initialize the array elements with their zero values and obtain a pointer to that array as shown in <code class="email">main()</code>. So when the functions <code class="email">initialize</code> and <code class="email">max</code> are invoked, they will receive the address (a copy of it) of the array instead of the entire 100K-sized array.</p><p class="calibre10">Before changing the subject, it should be noted that a composite literal array value can be initialized with the address operator <code class="email">&amp;</code>Â to initialize and return a pointer for the array, as shown in the following example. In the snippet, composite literal <code class="email">&amp;galaxies{...}</code> returns pointer <code class="email">*galaxies</code>, initialized with the specified element values:</p><pre class="programlisting">type galaxies [14]string 
func main() { 
   namedGalaxies = &amp;galaxies{ 
         "Andromeda", 
         "Black Eye", 
         "Bode's", 
          ...   
   } 
   printGalaxies(namedGalaxies) 
} 
</pre><p class="calibre10">golang.fyi/ch07/arraddr.go</p><p class="calibre10">The array type is a low-level storage construct in Go. Arrays, for instance, are usually used as the basis for storage primitives, where there are strict memory allocation requirements to minimize space consumption. In more common cases however, the slice, covered in the next section, is often used as the more idiomatic way of working with sequenced indexed collections.</p></div></div></div></body></html>