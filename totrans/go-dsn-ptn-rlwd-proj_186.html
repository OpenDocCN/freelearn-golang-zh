<html><head></head><body>
<div class="book" title="The map type">
<div class="book" title="Using maps"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch07lvl2sec129" class="calibre1"/>Using maps</h2></div></div></div><p class="calibre10">As is done with slice and arrays, index expressions are used to access and update the elements stored in maps. To set or update a <code class="email">map</code> element, use the index expression, on the left side of an assignment, to specify the key of the element to update. The following snippet shows an element with the <code class="email">"Jan"</code> key being updated with the value <code class="email">100</code>:</p><pre class="programlisting">hist := make(map[int]string) 
hist["Jan"] = 100 
</pre><p class="calibre10">Accessing an element with a given key is done with an index expression, placed on the right side of an assignment, as shown in the following example, where the value indexed with the <code class="email">"Mar"</code> key is assigned the <code class="email">val</code> variable:</p><pre class="programlisting">val := hist["Mar"] 
</pre><p class="calibre10">Earlier it was mentioned that accessing a non-existent key will return the zero-value for that element. For instance, the previous code would return 0 if the element with the key <code class="email">"Mar"</code> does not exist in the map. As you can imagine, this can be a problem. How would you know whether you are getting an actual value or the zero-value? Fortunately, Go provides a way to explicitly test for the absence of an element by returning an optional Boolean value as part of the result of an index expression, as shown in the following snippet:</p><pre class="programlisting">func save(store map[string]int, key string, value int) { 
   val, ok := store[key] 
   if !ok { 
         store[key] = value 
   }else{ 
         panic(fmt.Sprintf("Slot %d taken", val)) 
   } 
} 
</pre><p class="calibre10">golang.fyi/ch07/map_use.go</p><p class="calibre10">The function in the preceding snippet tests the existence of a key before updating its value. Called the <span class="strong"><em class="calibre11">comma-ok</em></span> idiom, the Boolean value stored in the <code class="email">ok</code> variable is set to false when the value is not actually found. This allows the code to distinguish between the absence of a key and the zero value of the element.</p></div></div></body></html>