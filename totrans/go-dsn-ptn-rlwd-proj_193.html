<html><head></head><body>
<div class="book" title="The struct type">
<div class="book" title="The anonymous field"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch07lvl2sec135" class="calibre1"/>The anonymous field</h2></div></div></div><p class="calibre10">Previous definitions of struct types involved the use of named fields. However, it is also possible to define a field with only its type, omitting the identifier. This is known as an anonymous field. It has the effect of embedding the type directly into the struct.</p><p class="calibre10">This concept is demonstrated in the following code snippet. Both types, <code class="email">diameter</code> and the name, are embedded as <code class="email">anonymous</code> fields in the <code class="email">planet</code> type:</p><pre class="programlisting">type diameter int 
 
type name struct { 
   long   string 
   short  string 
   symbol rune 
} 
    
type planet struct { 
   diameter 
   name 
   desc string 
} 
 
func main() { 
   earth := planet{ 
         diameter: 7926, 
         name: name{ 
               long:   "Earth", 
               short:  "E", 
               symbol: '\u2641', 
         }, 
         desc: "Third rock from the Sun", 
   } 
   ... 
} 
</pre><p class="calibre10">golang.fyi/ch07/struct_embed.go</p><p class="calibre10">The <code class="email">main</code> function in the previous snippet shows how the anonymous fields are accessed and updated, as is done in the <code class="email">planet</code> struct. Notice the names of the embedded types become the field identifiers in the composite literal value for the struct.</p><p class="calibre10">To simplify field name resolution, Go follows the following rules when using anonymous fields:</p><div class="book"><ul class="itemizedlist"><li class="listitem">The name of the type becomes the name of the field</li><li class="listitem">The name of an anonymous field may not clash with other field names</li><li class="listitem">Use only the unqualified (omit package) type name of imported types</li></ul></div><p class="calibre10">These rules also hold when accessing the fields of embedded structs directly using selector expressions, as is shown in the following code snippet. Notice the name of the embedded types are resolved as fields names:</p><pre class="programlisting">func main(){ 
   jupiter := planet{} 
   jupiter.diameter = 88846 
   jupiter.name.long = "Jupiter" 
   jupiter.name.short = "J" 
   jupiter.name.symbol = '\u2643' 
   jupiter.desc = "A ball of gas" 
   ... 
} 
</pre><p class="calibre10">golang.fyi/ch07/struct_embed.go</p><div class="book" title="Promoted fields"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch07lvl3sec8" class="calibre1"/>Promoted fields</h3></div></div></div><p class="calibre10">Fields of an embedded struct can be <span class="strong"><em class="calibre11">promoted</em></span>Â to its enclosing type. Promoted fields appear in selector expressions without the qualified name of their types, as shown in the following example:</p><pre class="programlisting">func main() {
...
saturn := planet{}
saturn.diameter = 120536
saturn.<span class="strong"><strong class="calibre2">long</strong></span> = "Saturn"
saturn.<span class="strong"><strong class="calibre2">short</strong></span> = "S"
saturn.<span class="strong"><strong class="calibre2">symbol</strong></span> = '\u2644'
saturn.desc = "Slow mover"
...
}</pre><p class="calibre10">golang.fyi/ch07/struct_embed.go</p><p class="calibre10">In the previous snippet, the highlighted fields are promoted from the embedded type <code class="email">name</code> by omitting it from the selector expression. The values of the fields <code class="email">long</code>, <code class="email">short</code>, and <code class="email">symbol</code> come from embedded type <code class="email">name</code>. Again, this will only work if the promotion does not cause any identifier clashes. In case of ambiguity, the fully qualified selector expression can be used.</p></div></div></div></body></html>