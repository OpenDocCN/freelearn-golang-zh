<html><head></head><body>
<div class="book" title="Objects in Go">
<div class="book" title="Object composition"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch08lvl2sec140" class="calibre1"/>Object composition</h2></div></div></div><p class="calibre10">Let us start with the following simple example to demonstrate how the <code class="email">struct</code> type may be used as an object that can achieve polymorphic composition. The following source code snippet implements a typical structure that models components of motorized transportation including <code class="email">fuel, engine</code>, <code class="email">vehicle</code>, <code class="email">truck</code>, and <code class="email">plane</code>:</p><pre class="programlisting">type fuel int 
const ( 
    GASOLINE fuel = iota 
    BIO 
    ELECTRIC 
    JET 
) 
type vehicle struct { 
    make string 
    model string 
} 
 
type engine struct { 
   fuel fuel 
   thrust int 
} 
func (e *engine) start() { 
   fmt.Println ("Engine started.") 
} 
 
type truck struct { 
   vehicle 
   engine 
   axels int 
   wheels int 
   class int 
} 
func (t *truck) drive() { 
   fmt.Printf("Truck %s %s, on the go!\n", t.make, t.model)           
} 
 
type plane struct { 
   vehicle 
   engine 
   engineCount int 
   fixedWings bool 
   maxAltitude int 
} 
func (p *plane) fly() { 
   fmt.Printf( 
          "Aircraft %s %s clear for takeoff!\n", 
          p.make, p.model, 
       ) 
} 
</pre><p class="calibre10">golang.fyi/ch08/structobj.go</p><p class="calibre10">The components and their relationships declared in the previous code snippet are illustrated in the following figure to visualize the type mapping and their compositions:</p><div class="mediaobject"><img src="../images/00019.jpeg" alt="Object composition" class="calibre14"/></div><p class="calibre15"> </p><p class="calibre10">Go uses the <span class="strong"><em class="calibre11">composition over inheritance</em></span> principle to achieve polymorphism using the type embedding mechanism supported by the <code class="email">struct</code> type. In Go, there is no support for polymorphism via type inheritance. Recall that each type is independent and is considered to be different from all others. In fact, the semantics in the model above is slightly broken. Types <code class="email">truck</code> and <code class="email">plane</code> are shown to be composed of (or has-a) the <code class="email">vehicle</code> type, which does not sound correct. Instead, the proper, or at least a more correct, representation would be to show that the types <code class="email">truck</code> and <code class="email">plane</code> <span class="strong"><em class="calibre11">is a</em></span> <code class="email">vehicle</code> via a subtype relationship. Later in the chapter, we will see how this can be achieved using the <code class="email">interface</code> type.</p></div></div></body></html>