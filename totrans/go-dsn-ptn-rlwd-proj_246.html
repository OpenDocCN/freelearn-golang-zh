<html><head></head><body>
<div class="book" title="Working with files" id="24L8G1-9c484ed022e64a0fb0e1aebf8e05d4fd">
<div class="book" title="Function os.OpenFile"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch10lvl2sec167" class="calibre1"/>Function os.OpenFile</h2></div></div></div><p class="calibre10">The <code class="email">os.OpenFile</code> function provides generic low-level functionalities to create a new file or open an existing file with fine-grained control over the file's behavior and its permission. Nevertheless, the <code class="email">os.Open</code> and <code class="email">os.Create</code> functions are usually used instead as they provide a simpler abstraction then the <code class="email">os.OpenFile</code> function.</p><p class="calibre10">The <code class="email">os.OpenFile</code> function take three parameters. The first one is the path of the file, the second parameter is a masked bit-field value to indicate the behavior of the operation (for example, read-only, read-write, truncate, and so on) and the last parameter is a posix-compliant permission value for the file.</p><p class="calibre10">The following abbreviated source snippet re-implements the file copy code, from earlier. This time, however, it uses the <code class="email">os.FileOpen</code> function to demonstrate how it works:</p><pre class="programlisting">func main() { 
   f1, err := os.OpenFile("./file0.go", os.O_RDONLY, 0666) 
   if err != nil {...} 
   defer f1.Close() 
 
   f2, err := os.OpenFile("./file0.bkp", os.O_WRONLY, 0666) 
   if err != nil {...} 
   defer f2.Close() 
 
   n, err := io.Copy(f2, f1) 
   if err != nil {...} 
 
   fmt.Printf("Copied %d bytes from %s to %s\n",  
      n, f1.Name(), f2.Name()) 
} 
</pre><p class="calibre10">golang.fyi/ch10/file1.go</p><div class="informaltable" title="Note"><h3 class="title2"><a id="note23" class="calibre1"/>Note</h3><p class="calibre10">If you already have a reference to an OS file descriptor, you can also use the <code class="email">os.NewFile</code> function to create a file handle in your program. The <code class="email">os.NewFile</code> function is rarely used, as files are usually initialized using the file functions discussed previously.</p></div></div></div></body></html>