<html><head></head><body>
<div class="book" title="Formatted IO with fmt" id="25JP21-9c484ed022e64a0fb0e1aebf8e05d4fd">
<div class="book" title="Reading from io.Reader"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch10lvl2sec172" class="calibre1"/>Reading from io.Reader</h2></div></div></div><p class="calibre10">The <code class="email">fmt</code> package also supports formatted reading of textual data from <code class="email">io.Reader</code> interfaces. The <code class="email">fmt.Fscan</code>Â and <code class="email">fmt.Fscanln</code> functions can be used to read multiple values, separated by spaces, into specified parameters. The <code class="email">fmt.Fscanf</code> function supports format specifiers for a richer and flexible parsing of data input from <code class="email">io.Reader</code> implementations.</p><p class="calibre10">The following abbreviated code snippet uses the function <code class="email">fmt.Fscanf</code> for the formatted input of a space-delimited file (<code class="email">planets.txt</code>) containing planetary data:</p><pre class="programlisting">func main() { 
   var name, hasRing string 
   var diam, moons int 
 
   // read data 
   data, err := os.Open("./planets.txt") 
   if err != nil { 
         fmt.Println("Unable to open planet data:", err) 
         return 
   } 
   defer data.Close() 
 
   for { 
         _, err := fmt.Fscanf( 
               data, 
               "%s %d %d %s\n", 
               &amp;name, &amp;diam, &amp;moons, &amp;hasRing, 
         ) 
         if err != nil { 
               if err == io.EOF { 
                     break 
               } else { 
                     fmt.Println("Scan error:", err) 
                     return 
               } 
         } 
         fmt.Printf( 
               "%-10s %-10d %-6d %-6s\n", 
               name, diam, moons, hasRing, 
         ) 
   } 
</pre><p class="calibre10">golang.fyi/ch10/fmtfscan0.go</p><p class="calibre10">The code reads from the <code class="email">io.File</code> variable <code class="email">data</code>, until it encounters an <code class="email">io.EOF</code> error indicating the end of the file. Each line of text it reads is parsed using format specifiers <code class="email">"%s %d %d %s\n"</code> which matches the space-delimited layout of the records stored in the file. Each parsed token is then assigned to its respective variable <code class="email">name</code>, <code class="email">diam</code>, <code class="email">moons</code>, and <code class="email">hasRing,</code> which are printed to the standard output using the <code class="email">fm.Printf </code>function.</p></div></div></body></html>