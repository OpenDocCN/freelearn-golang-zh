<html><head></head><body>
<div class="book" title="Buffered IO" id="26I9K1-9c484ed022e64a0fb0e1aebf8e05d4fd">
<div class="book" title="Scanning the buffer"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch10lvl2sec174" class="calibre1"/>Scanning the buffer</h2></div></div></div><p class="calibre10">The <code class="email">bufio</code> package also makes available primitives that are used to scan and tokenize buffered input data from an <code class="email">io.Reader</code> source. The <code class="email">bufio.Scanner</code> type scans input data using the <span class="strong"><em class="calibre11">Split</em></span> method to define tokenization strategies. The following code snippet shows a reimplementation of the planetary example (from earlier). This time, the code uses <code class="email">bufio.Scanner</code> (instead of the <code class="email">fmt.Fscan</code> function) to scan the content of the text file using the <code class="email">bufio.ScanLines</code> function:</p><pre class="programlisting">func main() { 
   file, err := os.Open("./planets.txt") 
   if err != nil { 
         fmt.Println("Unable to open file:", err) 
         return 
   } 
   defer file.Close() 
 
   fmt.Printf( 
         "%-10s %-10s %-6s %-6s\n", 
         "Planet", "Diameter", "Moons", "Ring?", 
   ) 
   scanner := bufio.NewScanner(file) 
   scanner.Split(bufio.ScanLines) 
   for scanner.Scan() { 
         fields := strings.Split(scanner.Text(), " ") 
         fmt.Printf( 
               "%-10s %-10s %-6s %-6s\n", 
               fields[0], fields[1], fields[2], fields[3], 
         ) 
   } 
} 
</pre><p class="calibre10">golang.fyi/ch10/bufscan0.go</p><p class="calibre10">Using <code class="email">bufio.Scanner</code> is done in four steps as shown in the previous example:</p><div class="book"><ul class="itemizedlist"><li class="listitem">First, use <code class="email">bufio.NewScanner(io.Reader) </code>to create a scanner</li><li class="listitem">Call the <code class="email">scanner.Split</code> method to configure how the content is tokenized</li><li class="listitem">Traverse the generated tokens with the <code class="email">scanner.Scan </code>method</li><li class="listitem">Read the tokenized data with the <code class="email">scanner.Text </code>method</li></ul></div><p class="calibre10">The code uses the pre-defined function <code class="email">bufio.ScanLines</code> to parse the buffered content using a line-delimiter. The <code class="email">bufio</code> package comes with several pre-defined splitter functions including <span class="strong"><em class="calibre11">ScanBytes</em></span> to scan each byte as a token, <span class="strong"><em class="calibre11">ScanRunes</em></span> to scan UTF-8 encoded tokens, and <span class="strong"><em class="calibre11">ScanWords</em></span> which scan each space-separated words as tokens.</p></div></div></body></html>