<html><head></head><body>
<div class="book" title="Encoding and decoding data">
<div class="book" title="Controlling JSON mapping with struct tags"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch10lvl2sec177" class="calibre1"/>Controlling JSON mapping with struct tags</h2></div></div></div><p class="calibre10">By default, the name of a struct field is used as the key for the generated JSON object. This can be controlled using <code class="email">struct</code> type tags to specify how JSON object key names are mapped during encoding and decoding of the data. For instance, the following code snippet declares struct fields with the <code class="email">json:</code> tag prefix to specify how object keys are to be encoded and decoded:</p><pre class="programlisting">type Book struct { 
   Title       string      `json:"book_title"` 
   PageCount   int         `json:"pages,string"` 
   ISBN        string      `json:"-"` 
   Authors     []Name      `json:"auths,omniempty"` 
   Publisher   string      `json:",omniempty"` 
   PublishDate time.Time   `json:"pub_date"` 
} 
</pre><p class="calibre10">golang.fyi/ch10/json2.go</p><p class="calibre10">The tags and their meaning are summarized in the following table:</p><div class="informaltable"><table border="1" class="calibre17"><colgroup class="calibre18"><col class="calibre19"/><col class="calibre19"/></colgroup><tbody class="calibre20"><tr class="calibre21"><td class="calibre22">
<p class="calibre23"><span><strong class="calibre24">Tags</strong></span></p>
</td><td class="calibre22">
<p class="calibre23"><span><strong class="calibre24">Description</strong></span></p>
</td></tr><tr class="calibre21"><td class="calibre22">
<p class="calibre23"><code class="literal">Title string `json:"book_title"`</code></p>
</td><td class="calibre22">
<p class="calibre23">Maps the <code class="literal">Title</code> struct field to the JSON object key, <code class="literal">"book_title"</code>.</p>
</td></tr><tr class="calibre21"><td class="calibre22">
<p class="calibre23"><code class="literal">PageCount int `json:"pages,string"`</code></p>
</td><td class="calibre22">
<p class="calibre23">Maps the <code class="literal">PageCount</code> struct field to the JSON object key, <code class="literal">"pages",</code> and outputs the value as a string instead of a number.</p>
</td></tr><tr class="calibre21"><td class="calibre22">
<p class="calibre23"><code class="literal">ISBN string `json:"-"`</code></p>
</td><td class="calibre22">
<p class="calibre23">The dash causes the <code class="literal">ISBN</code> field to be skipped during encoding and decoding.</p>
</td></tr><tr class="calibre21"><td class="calibre22">
<p class="calibre23"><code class="literal">Authors []Name `json:"auths,omniempty"`</code></p>
</td><td class="calibre22">
<p class="calibre23">Maps the <code class="literal">Authors</code> field to the JSON object key, <code class="literal">"auths"</code>. The annotation, <code class="literal">omniempty,</code> causes the field to be omitted if its value is nil.</p>
</td></tr><tr class="calibre21"><td class="calibre22">
<p class="calibre23"><code class="literal">Publisher string `json:",omniempty"`</code></p>
</td><td class="calibre22">
<p class="calibre23">Maps the struct field name, <code class="literal">Publisher,</code> as the JSON object key name. The annotation, <code class="literal">omniempty,</code> causes the field to be omitted when empty.</p>
</td></tr><tr class="calibre21"><td class="calibre22">
<p class="calibre23"><code class="literal">PublishDate time.Time `json:"pub_date"`</code></p>
</td><td class="calibre22">
<p class="calibre23">Maps the field name, <code class="literal">PublishDate,</code> to the JSON object key, <code class="literal">"pub_date"</code>.</p>
</td></tr></tbody></table></div><p class="calibre10">When the previous struct is encoded, it produces the following JSON output in the <code class="email">books.dat</code> file (formatted for readability):</p><pre class="programlisting">... 
{ 
   "book_title":"The Go Programming Language", 
   "pages":"380", 
   "auths":[ 
         {"First":"Alan","Last":"Donavan"}, 
         {"First":"Brian","Last":"Kernighan"} 
   ], 
   "Publisher":"Addison-Wesley", 
   "pub_date":"2015-10-26T00:00:00Z" 
} 
... 
</pre><p class="calibre10">Notice the JSON object keys are titled as specified in the <code class="email">struct</code> tags. The object key <code class="email">"pages"</code> (mapped to the struct field, <code class="email">PageCount</code>) is encoded as a string. Finally, the struct field, <code class="email">ISBN,</code> is omitted, as annotated in the <code class="email">struct</code> tag.</p></div></div></body></html>