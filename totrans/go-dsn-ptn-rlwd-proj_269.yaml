- en: Listening for incoming connections
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 监听传入连接
- en: 'When creating a service program, one the first steps is to announce the port
    which the service will use to listen for incoming requests from the network. This
    is done by invoking the `net.Listen` function which has the following signature:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在创建服务程序时，第一步是宣布服务将使用的端口，以便监听来自网络的传入请求。这是通过调用 `net.Listen` 函数来完成的，该函数具有以下签名：
- en: '[PRE0]'
  id: totrans-2
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: It takes two parameters where the first parameter specifies a protocol with
    valid values of `"tcp"`, `"tcp4"`, `"tcp6"`, `"unix"`, or `"unixpacket"`.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 它接受两个参数，其中第一个参数指定了一个协议，有效的值有 `"tcp"`、`"tcp4"`、`"tcp6"`、`"unix"` 或 `"unixpacket"`。
- en: The second parameter is the local host address for the service. The local address
    can be specified without an IP address such as `":4040"`. Omitting the IP address
    of the host means that the service is bound to all network card interfaces installed
    on the host. As an alternative, the service can be bound to a specific network
    hardware interface on the host by specifying its IP address on the network, that
    is, `"10.20.130.240:4040"`.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 第二个参数是服务的本地主机地址。本地地址可以指定为没有 IP 地址的形式，例如 `":4040"`。省略主机的 IP 地址意味着服务绑定到主机上安装的所有网络接口卡。作为替代，服务可以通过在网络上指定其
    IP 地址来绑定到主机上的特定网络硬件接口，即 `"10.20.130.240:4040"`。
- en: A successful call to the `net.Listen` function returns a value of the `net.Listener`
    type (or a non-nil error if it fails). The `net.Listener` interface exposes methods
    used to manage the life cycle of incoming client connections. Depending on the
    value of the `network` parameter (`"tcp"`, `"tcp4"`, `"tcp6"`, and so on.), `net.Listen`
    will return either a `net.TCPListener` or `net.UnixListener` *,* both of which
    are concrete implementations of the `net.Listener` interface.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 成功调用 `net.Listen` 函数返回 `net.Listener` 类型的值（或者在失败时返回非 nil 的错误）。`net.Listener`
    接口公开了用于管理传入客户端连接生命周期的方法。根据 `network` 参数的值（`"tcp"`、`"tcp4"`、`"tcp6"` 等），`net.Listen`
    将返回 `net.TCPListener` 或 `net.UnixListener`，两者都是 `net.Listener` 接口的具体实现。
