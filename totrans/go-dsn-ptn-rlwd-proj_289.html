<html><head></head><body>
<div id="page" style="height:0pt"/><div class="book" title="Writing Go tests"><div class="book" id="2G3F82-9c484ed022e64a0fb0e1aebf8e05d4fd"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch12lvl1sec80" class="calibre1"/>Writing Go tests</h1></div></div></div><p class="calibre10">A Go test file is simply a set of functions with the following signature:</p><p class="calibre10"><span class="strong"><em class="calibre11">func Test&lt;Name&gt;(*testing.T)</em></span></p><p class="calibre10">Here, <span class="strong"><em class="calibre11">&lt;Name&gt;</em></span> is an arbitrary name that reflects the purpose of the test. The test functions are intended to exercise a specific functional unit (or unit test) of the source code.</p><p class="calibre10">Before we write the test functions, let us review the code that will be tested. The following source snippet shows a simple implementation of a mathematical vector with <code class="email">Add</code>, <code class="email">Sub</code>, and <code class="email">Scale</code> methods (see the full source code listed at <a class="calibre1" href="https://github.com/vladimirvivien/learning-go/ch12/vector/vec.go">https://github.com/vladimirvivien/learning-go/ch12/vector/vec.go</a>). Notice that each method implements a specific behavior as a unit of functionality, which will make it easy to test:</p><pre class="programlisting">type Vector interface { 
    Add(other Vector) Vector 
    Sub(other Vector) Vector 
    Scale(factor float64) 
    ... 
} 
 
func New(elems ...float64) SimpleVector { 
    return SimpleVector(elems) 
} 
 
type SimpleVector []float64 
 
func (v SimpleVector) Add(other Vector) Vector { 
   v.assertLenMatch(other) 
   otherVec := other.(SimpleVector) 
   result := make([]float64, len(v)) 
   for i, val := range v { 
         result[i] = val + otherVec[i] 
   } 
   return SimpleVector(result) 
} 
 
func (v SimpleVector) Sub(other Vector) Vector { 
   v.assertLenMatch(other) 
   otherVec := other.(SimpleVector) 
   result := make([]float64, len(v)) 
   for i, val := range v { 
         result[i] = val - otherVec[i] 
   } 
   return SimpleVector(result) 
} 
 
func (v SimpleVector) Scale(scale float64) { 
   for i := range v { 
         v[i] = v[i] * scale 
   } 
} 
... 
</pre><p class="calibre10">golang.fyi/ch12/vector/vec.go</p></div></body></html>