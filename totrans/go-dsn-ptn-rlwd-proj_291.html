<html><head></head><body>
<div class="book" title="Writing Go tests">
<div class="book" title="Running the tests"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch12lvl2sec197" class="calibre1"/>Running the tests</h2></div></div></div><p class="calibre10">As mentioned in the introductory section of this chapter, test functions are executed using the <code class="email">go test</code> command-line tool. For instance, if we run the following command from within the package vector, it will automatically run all of the test functions of that package:</p><pre class="programlisting">
<span class="strong"><strong class="calibre2">$&gt; cd vector</strong></span>
<span class="strong"><strong class="calibre2">$&gt; go test .</strong></span>
<span class="strong"><strong class="calibre2">ok    github.com/vladimirvivien/learning-go/ch12/vector     0.001s</strong></span>
</pre><p class="calibre10">The test can also be executed by specifying a sub-package (or all packages with package wildcard <code class="email">./...</code>) relative to where the command is issued, as shown in the following:</p><pre class="programlisting">
<span class="strong"><strong class="calibre2">$&gt; cd $GOPATH/src/github.com/vladimirvivien/learning-go/ch12/</strong></span>
<span class="strong"><strong class="calibre2">$&gt; go test ./vector</strong></span>
<span class="strong"><strong class="calibre2">ok    github.com/vladimirvivien/learning-go/ch12/vector     0.005s</strong></span>
</pre><div class="book" title="Filtering executed tests"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch12lvl3sec13" class="calibre1"/>Filtering executed tests</h3></div></div></div><p class="calibre10">During the development of a large set of test functions, it is often desirable to focus on a function (or set of functions) during debugging phases. The Go test command-line tool supports the <code class="email">-run</code> flag, which specifies a regular expression that executes only functions whose names match the specified expression. The following command will only execute test function <code class="email">TestVectorAdd</code>:</p><pre class="programlisting">
<span class="strong"><strong class="calibre2">$&gt; go test -run=VectorAdd -v</strong></span>
<span class="strong"><strong class="calibre2">=== RUN   TestVectorAdd</strong></span>
<span class="strong"><strong class="calibre2">--- PASS: TestVectorAdd (0.00s)</strong></span>
<span class="strong"><strong class="calibre2">PASS</strong></span>
<span class="strong"><strong class="calibre2">ok    github.com/vladimirvivien/learning-go/ch12/vector     0.025s</strong></span>
</pre><p class="calibre10">The use of the <code class="email">-v</code> flag confirms that only one test function, <code class="email">TestVectorAdd</code>, has been executed. As another example, the following executes all test functions that end with <code class="email">VectorA.*$</code> or match function name <code class="email">TestVectorMag</code>, while ignoring everything else:</p><pre class="programlisting">
<span class="strong"><strong class="calibre2">&gt; go test -run="VectorA.*$|TestVectorMag" -v</strong></span>
<span class="strong"><strong class="calibre2">=== RUN   TestVectorAdd</strong></span>
<span class="strong"><strong class="calibre2">--- PASS: TestVectorAdd (0.00s)</strong></span>
<span class="strong"><strong class="calibre2">=== RUN   TestVectorMag</strong></span>
<span class="strong"><strong class="calibre2">--- PASS: TestVectorMag (0.00s)</strong></span>
<span class="strong"><strong class="calibre2">=== RUN   TestVectorAngle</strong></span>
<span class="strong"><strong class="calibre2">--- PASS: TestVectorAngle (0.00s)</strong></span>
<span class="strong"><strong class="calibre2">PASS</strong></span>
<span class="strong"><strong class="calibre2">ok    github.com/vladimirvivien/learning-go/ch12/vector     0.043s</strong></span>
</pre></div></div></div></body></html>