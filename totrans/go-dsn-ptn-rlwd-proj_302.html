<html><head></head><body>
<div class="book" title="Code benchmark">
<div class="book" title="Running the benchmark"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch12lvl2sec205" class="calibre1"/>Running the benchmark</h2></div></div></div><p class="calibre10">Benchmark functions are not executed unless the test command-line tool receives the flag <code class="email">-bench</code>. The following command runs all the benchmarks functions in the current package:</p><pre class="programlisting">
<span class="strong"><strong class="calibre2">$&gt; go test -bench=.</strong></span>
<span class="strong"><strong class="calibre2">PASS</strong></span>
<span class="strong"><strong class="calibre2">BenchmarkVectorAdd-2           2000000           761 ns/op</strong></span>
<span class="strong"><strong class="calibre2">BenchmarkVectorSub-2           2000000           788 ns/op</strong></span>
<span class="strong"><strong class="calibre2">BenchmarkVectorScale-2         5000000           269 ns/op</strong></span>
<span class="strong"><strong class="calibre2">BenchmarkVectorMag-2           5000000           243 ns/op</strong></span>
<span class="strong"><strong class="calibre2">BenchmarkVectorUnit-2          3000000           507 ns/op</strong></span>
<span class="strong"><strong class="calibre2">BenchmarkVectorDotProd-2       3000000           549 ns/op</strong></span>
<span class="strong"><strong class="calibre2">BenchmarkVectorAngle-2         2000000           659 ns/op</strong></span>
<span class="strong"><strong class="calibre2">ok    github.com/vladimirvivien/learning-go/ch12/vector     14.123s</strong></span>
</pre><p class="calibre10">Before dissecting the benchmark result, let us understand the previously issued command. The <code class="email">go test -bench=.</code> command first executes all the test functions in the package followed by all the benchmark functions (you can verify this by adding the verbose flag <code class="email">-v</code> to the command).</p><p class="calibre10">Similar to the <code class="email">-run</code> flag, the <code class="email">-bench</code> flag specifies a regular expression used to select the benchmark functions that get executed. The <code class="email">-bench=.</code> flag matches the name of all benchmark functions, as shown in the previous example. The following, however, only runs benchmark functions that contain the pattern <code class="email">"VectorA"</code> in their names. This includes the <code class="email">BenchmarkVectroAngle()</code> and <code class="email">BenchmarkVectorAngle()</code>Â functions:</p><pre class="programlisting">
<span class="strong"><strong class="calibre2">$&gt; go test -bench="VectorA"</strong></span>
<span class="strong"><strong class="calibre2">PASS</strong></span>
<span class="strong"><strong class="calibre2">BenchmarkVectorAdd-2     2000000           764 ns/op</strong></span>
<span class="strong"><strong class="calibre2">BenchmarkVectorAngle-2   2000000           665 ns/op</strong></span>
<span class="strong"><strong class="calibre2">ok    github.com/vladimirvivien/learning-go/ch12/vector     4.396s</strong></span>
</pre></div></div></body></html>