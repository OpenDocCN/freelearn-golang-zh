<html><head></head><body>
<div class="book" title="Code benchmark">
<div class="book" title="Adjusting N"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_4"><a id="ch12lvl2sec208" class="calibre1"/>Adjusting N</h2></div></div></div><p class="calibre10">By default, the test framework gradually adjusts <code class="email">N</code> to be large enough to arrive at stable and meaningful metrics over a period of <span class="strong"><em class="calibre11">one second</em></span>. You cannot change <code class="email">N</code> directly. However, you can use flag <code class="email">-benchtime</code> to specify a benchmark run time and thus influence the number of iterations during a benchmark. For instance, the following runs the benchmark for a period of <code class="email">5</code> seconds:</p><pre class="programlisting">
<span class="strong"><strong class="calibre2">&gt; go test -run=Bench -bench="Add|Sub|Scale" -benchtime 5s</strong></span>
<span class="strong"><strong class="calibre2">PASS</strong></span>
<span class="strong"><strong class="calibre2">BenchmarkVectorAdd-2    10000000           784 ns/op</strong></span>
<span class="strong"><strong class="calibre2">BenchmarkVectorSub-2    10000000           810 ns/op</strong></span>
<span class="strong"><strong class="calibre2">BenchmarkVectorScale-2  30000000           265 ns/op</strong></span>
<span class="strong"><strong class="calibre2">ok    github.com/vladimirvivien/learning-go/ch12/vector     25.877s</strong></span>
</pre><p class="calibre10">Notice that even though there is a drastic jump in the number iterations (factor of five or more) for each benchmark, the average performance time for each benchmark function remains reasonably consistent. This information provides valuable insight into the performance of your code. It is a great way to observe the impact of code or load changes on performance, as discussed in the following section.</p></div></div></body></html>