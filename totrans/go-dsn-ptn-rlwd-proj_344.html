<html><head></head><body>
<div class="book" title="Testing and TDD" id="335QG1-9c484ed022e64a0fb0e1aebf8e05d4fd">
<div class="book" title="What is TDD?"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch01lvl2sec024" class="calibre1"/>What is TDD?</h2></div></div></div><p class="calibre10">TDD is the acronym for <span class="strong"><strong class="calibre2">Test Driven Development</strong></span>. It consists of writing the tests first before writing the function (instead of what we did just before when we wrote the <code class="email">sum</code> function first and then we wrote the <code class="email">test</code> function).</p><p class="calibre10">TDD changes the way to write code and structure code so that it can be tested (a lot of code you can find in GitHub, even code that you have probably written in the past is probably very difficult, if not impossible, to test).</p><p class="calibre10">So, how does it work? Let's explain this with a real life example--imagine that you are in summer and you want to be refreshed somehow. You can build a pool, fill it with cold water, and jump into it. But in TDD terms, the steps will be:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">You jump into a place where the pool will be built (you write a test that you know it will fail).</li><li class="listitem" value="2">It hurts... and you aren't cool either (yes... the test failed, as we predicted).</li><li class="listitem" value="3">You build a pool and fill it with cold water (you code the functionality).</li><li class="listitem" value="4">You jump into the pool (you repeat the point 1 test again).</li><li class="listitem" value="5">You're cold now. Awesome! Object completed (test passed).</li><li class="listitem" value="6">Go to the fridge and take a beer to the pool. Drink. Double awesomeness (refactor the code).</li></ol><div class="calibre12"/></div><p class="calibre10">So let's repeat the previous example but with a multiplication. First, we will write the declaration of the function that we're going to test:</p><pre class="programlisting">func multiply(a, b int) int { 
    return 0 
} 
</pre><p class="calibre10">Now let's write the test that will check the correctness of the previous function:</p><pre class="programlisting">import "testing" 
 
func TestMultiply(t *testing.T) { 
    a := 5 
    b := 6 
    expected := 30 
 
    res := multiply(a, b) 
    if res != expected { 
        t.Errorf("Our multiply function doens't work, %d*%d isn't %d\n", a, b, res) 
    } 
} 
</pre><p class="calibre10">And we test it through the command line:</p><pre class="programlisting">
<span class="strong"><strong class="calibre2">$ go test</strong></span>
<span class="strong"><strong class="calibre2">--- FAIL: TestMultiply (0.00s)</strong></span>
<span class="strong"><strong class="calibre2">main_test.go:12: Our multiply function doens't work, 5+6 isn't 0</strong></span>
<span class="strong"><strong class="calibre2">FAIL</strong></span>
<span class="strong"><strong class="calibre2">exit status 1</strong></span>
<span class="strong"><strong class="calibre2">FAIL    github.com/sayden/go-designpatterns/introduction/ex_xx_testing/multiply    
</strong></span>
<span class="strong"><strong class="calibre2">0.002s</strong></span>
</pre><p class="calibre10">Nice. Like in our pool example where the water wasn't there yet, our function returns an incorrect value too. So now we have a function declaration (but isn't defined yet) and the test that fails. Now we have to make the test pass by writing the function and executing the test to check:</p><pre class="programlisting">func multiply(a, b int) int { 
<span class="strong"><strong class="calibre2">    return a*b</strong></span> 
} 
</pre><p class="calibre10">And we execute again our testing suite. After writing our code correctly, the test should pass so we can continue to the refractoring process:</p><pre class="programlisting">
<span class="strong"><strong class="calibre2">$ go test</strong></span>
<span class="strong"><strong class="calibre2">PASS</strong></span>
<span class="strong"><strong class="calibre2">ok      github.com/sayden/go-design-patterns/introduction/ex_xx_testing/multiply    
0.001s</strong></span>
</pre><p class="calibre10">Great! We have developed the <code class="email">multiply</code> function following TDD. Now we must refactor our code but we cannot make it more simple or readable so the loop can be considered closed.</p><p class="calibre10">During this book, we will write many tests that define the functionality that we want to achieve in our patterns. TDD promotes encapsulation and abstraction (just like design patterns do).</p></div></div></body></html>