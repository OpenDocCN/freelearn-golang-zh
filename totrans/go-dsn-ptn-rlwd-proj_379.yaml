- en: Implementation
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 实现
- en: We will start with the `GetPaymentMethod` method. It must receive an integer
    that matches with one of the defined constants of the same file to know which
    implementation it should return.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将从`GetPaymentMethod`方法开始。它必须接收一个整数，该整数与同一文件中定义的某个常量匹配，以便知道它应该返回哪种实现。
- en: '[PRE0]'
  id: totrans-2
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'We use a plain switch to check the contents of the argument `m` (method). If
    it matches any of the known methods--cash or debit card, it returns a new instance
    of them. Otherwise, it will return a nil and an error indicating that the payment
    method has not been recognized. Now we can run our tests again to check the second
    part of the unit tests:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用普通的switch语句来检查参数`m`（方法）的内容。如果它与任何已知的方法匹配——现金或借记卡，它将返回它们的新实例。否则，它将返回nil和一个错误，指示未识别支付方式。现在我们可以再次运行我们的测试，以检查单元测试的第二部分：
- en: '[PRE1]'
  id: totrans-4
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Now we do not get the errors saying it couldn''t find the type of payment methods.
    Instead, we receive a `message not correct` error when it tries to use any of
    the methods that it covers. We also got rid of the `Not implemented` message that
    was being returned when we asked for an unknown payment method. Let''s implement
    the structs now:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们不再收到说它找不到支付方式类型错误的提示。相反，当它尝试使用它所涵盖的任何方法时，我们会收到一个`message not correct`错误。我们还去掉了当我们请求未知支付方式时返回的`Not
    implemented`消息。现在让我们来实现这些结构体：
- en: '[PRE2]'
  id: totrans-6
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'We just get the amount, printing it in a nicely formatted message. With this
    implementation, the tests will all be passing now:'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 我们只获取金额，并以格式良好的消息打印出来。使用这种实现，所有的测试都将通过：
- en: '[PRE3]'
  id: totrans-8
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Do you see the `LOG`: messages? They aren''t errors, we just print some information
    that we receive when using the package under test. These messages can be omitted
    unless you pass the `-v` flag to the test command:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 你看到`LOG`消息了吗？它们不是错误，我们只是在使用测试包时打印出我们接收到的信息。除非你传递`-v`标志给测试命令，否则可以省略这些消息：
- en: '[PRE4]'
  id: totrans-10
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
