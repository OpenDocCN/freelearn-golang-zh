<html><head></head><body>
<div class="book" title="Chapter&#xA0;3.&#xA0;Structural Patterns - Composite, Adapter, and Bridge Design Patterns">
<div class="book" title="Composite design pattern">
<div class="book" title="Composite pattern versus inheritance"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_8"><a id="ch03lvl2sec072" class="calibre1"/>Composite pattern versus inheritance</h2></div></div></div><p class="calibre10">When using the Composite design pattern in Go, you must be very careful not to confuse it with inheritance. For example, when you embed a <code class="email">Parent</code> struct within a <code class="email">Son</code> struct, like in the following example:</p><pre class="programlisting">type Parent struct { 
  SomeField int 
} 
 
type Son struct { 
  Parent 
} 
</pre><p class="calibre10">You cannot consider that the <code class="email">Son</code> struct is also the <code class="email">Parent</code> struct. What this means is that you cannot pass an instance of the <code class="email">Son</code> struct to a function that is expecting a <code class="email">Parent</code> struct like the following:</p><pre class="programlisting">func GetParentField(p *Parent) int{ 
  fmt.Println(p.SomeField) 
} 
</pre><p class="calibre10">When you try to pass a <code class="email">Son</code> instance to the <code class="email">GetParentField</code> method, you will get the following error message:</p><pre class="programlisting">
<span class="strong"><strong class="calibre2">cannot use son (type Son) as type Parent in argument to GetParentField</strong></span>
</pre><p class="calibre10">This, in fact, makes a lot of sense. What's the solution for this? Well, you can simply composite the <code class="email">Son</code>  struct with the parent without embedding so that you can access the <code class="email">Parent</code> instance later:</p><pre class="programlisting">type Son struct { 
  P Parent 
} 
</pre><p class="calibre10">So now you could use the <code class="email">P</code> field to pass it to the <code class="email">GetParentField</code> method:</p><pre class="programlisting">son := Son{} 
GetParentField(son.P) 
</pre></div></div></div></body></html>