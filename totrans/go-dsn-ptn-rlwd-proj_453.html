<html><head></head><body>
<div class="book" title="Facade design pattern">
<div class="book" title="Library created with the Facade pattern"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_7"><a id="ch04lvl2sec0111" class="calibre1"/>Library created with the Facade pattern</h2></div></div></div><p class="calibre10">We have the first milestone for a library for the <code class="email">OpenWeatherMap</code> API using the facade pattern. We have hidden the complexity of accessing the <code class="email">OpenWeatherMap</code> REST API in the <code class="email">doRequest</code> and <code class="email">responseParser</code> functions, and the users of our library have an easy-to-use syntax to query the API. For example, to retrieve the weather for Madrid, Spain, a user will only have to introduce arguments and an API key at the beginning:</p><pre class="programlisting">  weatherMap := CurrentWeatherData{*apiKey} 
 
  weather, err := weatherMap.GetByCityAndCountryCode("Madrid", "ES") 
  if err != nil { 
    t.Fatal(err) 
  } 
 
  fmt.Printf("Temperature in Madrid is %f celsius\n", weather.Main.Temp-273.15) 
</pre><p class="calibre10">The console output for the weather in Madrid at the moment of writing this chapter is the following:</p><pre class="programlisting">
<span class="strong"><strong class="calibre2">$ Temperature in Madrid is 30.600006 celsius</strong></span>
</pre><p class="calibre10">A typical summer day!</p></div></div></body></html>