<html><head></head><body>
<div class="book" title="Chapter&#xA0;6.&#xA0;Behavioral Patterns - Template, Memento, and Interpreter Design Patterns">
<div class="book" title="Template design pattern">
<div class="book" title="Implementing the Template pattern"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_7"><a id="ch06lvl2sec0146" class="calibre1"/>Implementing the Template pattern</h2></div></div></div><p class="calibre10">As defined in the acceptance criteria, we have to return the string <code class="email">hello</code> in the <code class="email">first()</code> method and the string <code class="email">template</code> in the <code class="email">third()</code> method. That's pretty easy to implement:</p><pre class="programlisting">type Template struct{} 
 
func (t *Template) first() string { 
  return "hello" 
} 
 
func (t *Template) third() string { 
  return "template" 
} 
</pre><p class="calibre10">With this implementation, we should be covering the <span class="strong"><em class="calibre11">second</em></span> and <span class="strong"><em class="calibre11">third</em></span> acceptance criteria and partially covering the <span class="strong"><em class="calibre11">first</em></span> criterion (each step in the algorithm must return a string).</p><p class="calibre10">To cover the <span class="strong"><em class="calibre11">fifth</em></span> acceptance criterion, we define an <code class="email">ExecuteAlgorithm</code> method that accepts the <code class="email">MessageRetriever</code> interface as argument and returns the full algorithm: a single string done by joining the strings returned by the <code class="email">first()</code>, <code class="email">Message() string</code> and <code class="email">third()</code> methods:</p><pre class="programlisting">func (t *Template) ExecuteAlgorithm(m MessageRetriever) string { 
  return strings.Join([]string{t.first(), m.Message(), t.third()},  " ") 
} 
</pre><p class="calibre10">The <code class="email">strings.Join</code> function has the following signature:</p><pre class="programlisting">func Join([]string,string) string 
</pre><p class="calibre10">It takes an array of strings and joins them, placing the second argument between each item in the array. In our case, we create a string array on the fly to pass it as the first argument. Then we pass a whitespace as the second argument.</p><p class="calibre10">With this implementation, the tests must be passing already:</p><pre class="programlisting">
<span class="strong"><strong class="calibre2">go test -v . 
=== RUN   TestTemplate_ExecuteAlgorithm 
=== RUN   TestTemplate_ExecuteAlgorithm/Using_interfaces 
--- PASS: TestTemplate_ExecuteAlgorithm (0.00s) 
    --- PASS: TestTemplate_ExecuteAlgorithm/Using_interfaces (0.00s) 
PASS 
ok</strong></span>
</pre><p class="calibre10">The tests passed. The test has checked that the string <code class="email">world</code> is present in the returned result, which is the <code class="email">hello world template</code> message. The <code class="email">hello</code> text was the string returned by the <code class="email">first()</code> method, the <code class="email">world</code> string was returned by our <code class="email">MessageRetriever</code> implementation, and <code class="email">template</code> was the string returned by the <code class="email">third()</code> method. The whitespaces are inserted by Go's <code class="email">strings.Join</code> function. But any use of the <code class="email">TemplateImpl.ExecuteAlgorithm</code> type will always return "hello [something] template" in its result.</p></div></div></div></body></html>