<html><head></head><body>
<div class="book" title="Chapter&#xA0;6.&#xA0;Behavioral Patterns - Template, Memento, and Interpreter Design Patterns">
<div class="book" title="Template design pattern">
<div class="book" title="Looking for the Template pattern in Go's source code"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_10"><a id="ch06lvl2sec0149" class="calibre1"/>Looking for the Template pattern in Go's source code</h2></div></div></div><p class="calibre10">The <code class="email">Sort</code> package in Go's source code can be considered a Template implementation of a sort algorithm. As defined in the package itself, the <code class="email">Sort</code> package provides primitives for sorting slices and user-defined collections.</p><p class="calibre10">Here, we can also find a good example of why Go authors aren't worried about implementing generics. Sorting the lists is maybe the best example of generic usage in other languages. The way that Go deals with this is very elegant too-it deals with this issue with an interface:</p><pre class="programlisting">type Interface interface { 
  Len() int 
  Less(i, j int) bool 
  Swap(i, j int) 
} 
</pre><p class="calibre10">This is the interface for lists that need to be sorted by using the <code class="email">sort</code> package. In the words of Go's authors:</p><div class="blockquote"><blockquote class="blockquote1"><p class="calibre13">
<span class="strong"><em class="calibre11">"A type, typically, is a collection that satisfies sort. Interface can be sorted by the routines in this package. The methods require that the elements of the collection be enumerated by an integer index."</em></span>
</p></blockquote></div><p class="calibre10">In other words, write a type that implements this <code class="email">Interface</code> so that the <code class="email">Sort</code> package can be used to sort any slice. The sorting algorithm is the template and we must define how to retrieve values in our slice.</p><p class="calibre10">If we peek in the <code class="email">sort</code> package, we can also find an example of how to use the sorting template but we will create our own example:</p><pre class="programlisting">package main 
 
import ( 
  "sort" 
  "fmt" 
) 
 
type MyList []int 
 
func (m MyList) Len() int { 
  return len(m) 
} 
 
func (m MyList) Swap(i, j int) { 
  m[i], m[j] = m[j], m[i] 
} 
 
func (m MyList) Less(i, j int) bool { 
  return m[i] &lt; m[j] 
} 
</pre><p class="calibre10">First, we have done a very simple type that stores an <code class="email">int</code> list. This could be any kind of list, usually a list of some kind of struct. Then we have implemented the <code class="email">sort.Interface</code> interface by defining the <code class="email">Len</code>, <code class="email">Swap</code>, and <code class="email">Less</code> methods.</p><p class="calibre10">Finally, the <code class="email">main</code> function creates an unordered list of numbers of the <code class="email">MyList</code> type:</p><pre class="programlisting">func main() { 
  var myList MyList = []int{6,4,2,8,1} 
 
  fmt.Println(myList) 
  sort.Sort(myList) 
  fmt.Println(myList) 
} 
</pre><p class="calibre10">We print the list that we created (unordered) and then we sort it (the <code class="email">sort.Sort</code> method actually modifies our variable instead of returning a new list so beware!). Finally, we print again the resulting list. The console output of this <code class="email">main</code> method is the following:</p><pre class="programlisting">
<span class="strong"><strong class="calibre2">go run sort_example.go </strong></span>
<span class="strong"><strong class="calibre2">[6 4 2 8 1]</strong></span>
<span class="strong"><strong class="calibre2">[1 2 4 6 8]</strong></span>
</pre><p class="calibre10">The <code class="email">sort.Sort</code> function has sorted our list in a transparent way. It has a lot of code written and delegates <code class="email">Len</code>, <code class="email">Swap</code> and <code class="email">Less</code> methods to an interface, like we did in our template delegating to the <code class="email">MessageRetriever</code> interface.</p></div></div></div></body></html>