<html><head></head><body>
<div class="book" title="Callbacks" id="45GEO1-9c484ed022e64a0fb0e1aebf8e05d4fd">
<div class="book" title="Callback hell"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch08lvl2sec0201" class="calibre1"/>Callback hell</h2></div></div></div><p class="calibre10">The term <span class="strong"><strong class="calibre2">callback hell</strong></span> is commonly used to refer to when many callbacks have been stacked within each other. This makes them difficult to reason with and handle when they grow too much. For example, using the same code as before, we could stack another asynchronous call with the contents that we previously printed to the console:</p><pre class="programlisting">func main() { 
  wait.Add(1) 
 
  toUpperAsync("Hello Callbacks!", func(v string) { 
    toUpperAsync(fmt.Sprintf("Callback: %s\n", v), func(v string) { 
      fmt.Printf("Callback within %s", v) 
      wait.Done() 
    }) 
  }) 
  println("Waiting async response...") 
  wait.Wait() 
} 
</pre><p class="calibre10">(We have omitted imports, the package name, and the <code class="email">toUpperAsync</code> function as they have not changed.) Now we have the <code class="email">toUpperAsync</code> function within a <code class="email">toUpperAsync</code> function, and we could embed many more if we want. In this case, we again pass the text that we previously printed on the console to use it in the following callback. The inner callback finally prints it on the console, giving the following output:</p><pre class="programlisting">
<span class="strong"><strong class="calibre2">$ go run main.go </strong></span>
<span class="strong"><strong class="calibre2">Waiting async response...</strong></span>
<span class="strong"><strong class="calibre2">Callback within CALLBACK: HELLO CALLBACKS!</strong></span>
</pre><p class="calibre10">In this case, we can assume that the outer callback will be executed before the inner one. That's why we don't need to add one more to the WaitGroup.</p><p class="calibre10">The point here is that we must be careful when using callbacks. In very complex systems, too many callbacks are hard to reason with and hard to deal with. But with care and rationality, they are powerful tools.</p></div></div></body></html>