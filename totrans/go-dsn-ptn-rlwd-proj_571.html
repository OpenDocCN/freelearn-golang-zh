<html><head></head><body>
<div class="book" title="Channels">
<div class="book" title="Directional channels"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch08lvl2sec0206" class="calibre1"/>Directional channels</h2></div></div></div><p class="calibre10">One cool feature about Go channels is that, when we use them as parameters, we can restrict their directionality so that they can be used only to send or to receive. The compiler will complain if a channel is used in the restricted direction. This feature applies a new level of static typing to Go apps and makes code more understandable and more readable.</p><p class="calibre10">We'll take a simple example with channels:</p><pre class="programlisting">package main 
 
import ( 
  "fmt" 
  "time" 
) 
 
func main() { 
  channel := make(chan string, 1) 
 
<a class="calibre1" href="">  go func(ch chan&lt;- string) {</a> 
    ch &lt;- "Hello World!" 
    println("Finishing goroutine") 
  }(channel) 
 
  time.Sleep(time.Second) 
 
  message := &lt;-channel 
  fmt.Println(message) 
} 
</pre><p class="calibre10">The line where we launch the new Goroutine <code class="email">go func(ch chan&lt;- string)</code> states that the channel passed to this function can only be used as an input channel, and you can't listen to it.</p><p class="calibre10">We can also pass a channel that will be used as a receiver channel only:</p><pre class="programlisting">func receivingCh(ch &lt;-chan string) { 
  msg := &lt;-ch 
  println(msg) 
} 
</pre><p class="calibre10">As you can see, the arrow is on the opposite side of the keyword <code class="email">chan</code>, indicating an extracting operation from the channel. Keep in mind that the channel arrow always points left, to indicate a receiving channel, it must go on the left, and to indicate an inserting channel, it must go on the right.</p><p class="calibre10">If we try to send a value through this <span class="strong"><em class="calibre11">receive only</em></span> channel, the compiler will complain about it:</p><pre class="programlisting">func receivingCh(ch &lt;-chan string) { 
  msg := &lt;-ch 
  println(msg) 
  ch &lt;- "hello" 
} 
</pre><p class="calibre10">This function has a receive only channel that we will try to use to send the message <code class="email">hello</code> through. Let's see what the compiler says:</p><pre class="programlisting">
<span class="strong"><strong class="calibre2">$ go run main.go</strong></span>
<span class="strong"><strong class="calibre2">./main.go:20: invalid operation: ch &lt;- "hello2" (send to receive-only type &lt;-chan string)</strong></span>
</pre><p class="calibre10">It doesn't like it and asks us to correct it. Now the code is even more readable and safe, and we have just placed an arrow in front or behind the <code class="email">chan</code> argument.</p></div></div></body></html>