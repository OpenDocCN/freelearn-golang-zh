<html><head></head><body>
<div class="book" title="Pipeline design pattern">
<div class="book" title="Beginning with tests"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_5"><a id="ch09lvl2sec0229" class="calibre1"/>Beginning with tests</h2></div></div></div><p class="calibre10">We will create only one function that will manage everything. We will call this function <code class="email">LaunchPipeline</code> to simplify things. It will take an integer as an argument, which will be our N number, the number of items in our list. The declaration in the implementation file looks like this:</p><pre class="programlisting">package pipelines 
 
func LaunchPipeline(amount int) int { 
  return 0 
} 
</pre><p class="calibre10">In our test file, we will create a table of tests by using a slice of slices:</p><pre class="programlisting">package pipelines 
 
import "testing" 
 
func TestLaunchPipeline(t *testing.T) { 
  tableTest := [][]int{ 
    {3, 14}, 
    {5, 55}, 
  } 
  // ... 
} 
</pre><p class="calibre10">Our table is a slice of slices of integer types. On each slice, the first integer represents the list size and the second position represents the item within the list. It is, effectively, a matrix. When passing 3, it must return 14. When passing 5, it must return 55. Then we have to iterate over the table and pass the first index of each array to the <code class="email">LaunchPipeline</code> function:</p><pre class="programlisting">  // ... 
 
  var res int 
  for _, test := range tableTest { 
    res = LaunchPipeline(test[0]) 
    if res != test[1] { 
      t.Fatal() 
    } 
 
    t.Logf("%d == %d\n", res, test[1]) 
  } 
} 
</pre><p class="calibre10">Using <code class="email">range</code>, we get every row in the matrix . Each row is contained in a temporary variable called <code class="email">test</code>. <code class="email">test[0]</code> represents <code class="email">N</code> and <code class="email">test[1]</code> the expected result. We compare the expected result with the returning value of the <code class="email">LaunchPipeline</code> function. If they aren't the same, the test fails:</p><pre class="programlisting">
<span class="strong"><strong class="calibre2">go test -v .</strong></span>
<span class="strong"><strong class="calibre2">=== RUN   TestLaunchPipeline</strong></span>
<span class="strong"><strong class="calibre2">--- FAIL: TestLaunchPipeline (0.00s)</strong></span>
<span class="strong"><strong class="calibre2">        pipeline_test.go:15: </strong></span>
<span class="strong"><strong class="calibre2">FAIL</strong></span>
<span class="strong"><strong class="calibre2">exit status 1</strong></span>
<span class="strong"><strong class="calibre2">FAIL</strong></span>
</pre></div></div></body></html>