["```go\nfunc (r *room) run() { \n  for { \n    select { \n    case client := <-r.join: \n      // joining \n      r.clients[client] = true \n    case client := <-r.leave: \n      // leaving \n      delete(r.clients, client) \n      close(client.send) \n    case msg := <-r.forward: \n      // forward message to all clients \n      for client := range r.clients { \n        client.send <- msg \n      } \n    } \n  } \n} \n\n```"]