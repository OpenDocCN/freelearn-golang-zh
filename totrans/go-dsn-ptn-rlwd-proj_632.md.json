["```go\nconst ( \n  socketBufferSize  = 1024 \n  messageBufferSize = 256 \n)  \nvar upgrader = &websocket.Upgrader{ReadBufferSize:  socketBufferSize,\n  WriteBufferSize: socketBufferSize}  \nfunc (r *room) ServeHTTP(w http.ResponseWriter, req *http.Request) { \n  socket, err := upgrader.Upgrade(w, req, nil) \n  if err != nil { \n    log.Fatal(\"ServeHTTP:\", err) \n    return \n  } \n  client := &client{ \n    socket: socket, \n    send:   make(chan []byte, messageBufferSize), \n    room:   r, \n  } \n  r.join <- client \n  defer func() { r.leave <- client }() \n  go client.write() \n  client.read() \n} \n\nTipIf you accessed the chat endpoint in a web browser, you would likely crash the program and see an error like **ServeHTTPwebsocket: version != 13**. This is because it is intended to be accessed via a web socket rather than a web browser.\n```"]