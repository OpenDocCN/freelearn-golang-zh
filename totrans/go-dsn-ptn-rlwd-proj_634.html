<html><head></head><body>
<div class="book" title="Modeling a chat room and clients on the server">
<div class="book" title="Creating and using rooms"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_6"><a id="ch01lvl2sec0014" class="calibre1"/>Creating and using rooms</h2></div></div></div><p class="calibre10">Let's update our <code class="email">main</code> function in <code class="email">main.go</code> to first create and then run a room for everybody to connect to:</p><pre class="programlisting">func main() { 
  r := newRoom() 
  http.Handle("/", &amp;templateHandler{filename: "chat.html"}) 
  http.Handle("/room", r) 
  // get the room going 
  go r.run() 
  // start the web server 
  if err := http.ListenAndServe(":8080", nil); err != nil { 
    log.Fatal("ListenAndServe:", err) 
  } 
} 
</pre><p class="calibre10">We are running the room in a separate goroutine (notice the <code class="email">go</code> keyword again) so that the chatting operations occur in the background, allowing our main goroutine to run the web server. Our server is now finished and successfully built, but remains useless without clients to interact with.</p></div></div></body></html>