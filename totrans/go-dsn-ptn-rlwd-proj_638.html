<html><head></head><body>
<div class="book" title="Tracing code to get a look under the hood">
<div class="book" title="Writing a package using TDD"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="ch01lvl2sec0016" class="calibre1"/>Writing a package using TDD</h2></div></div></div><p class="calibre10">Packages in Go are organized into folders, with one package per folder. It is a build error to have differing package declarations within the same folder because all sibling files are expected to contribute to a single package. Go has no concept of subpackages, which means nested packages (in nested folders) exist only for aesthetic or informational reasons but do not inherit any functionality or visibility from super packages. In our chat application, all of our files contributed to the <code class="email">main</code> package because we wanted to build an executable tool. Our tracing package will never be run directly, so it can and should use a different package name. We will also need to think about the <span class="strong"><strong class="calibre2">Application Programming Interface</strong></span> (<span class="strong"><strong class="calibre2">API</strong></span>) of our package, considering how to model a package so that it remains as extensible and flexible as possible for users. This includes the fields, functions, methods, and types that should be exported (visible to the user) and remain hidden for simplicity's sake.</p><div class="informaltable" title="Note"><h3 class="title2"><a id="note0019" class="calibre1"/>Note</h3><p class="calibre10">Go uses capitalization of names to denote which items are exported such that names that begin with a capital letter (for example, <code class="email">Tracer</code>) are visible to users of a package, and names that begin with a lowercase letter (for example, <code class="email">templateHandler</code>) are hidden or private.</p></div><p class="calibre10">Create a new folder called <code class="email">trace</code>, which will be the name of our tracing package, alongside the <code class="email">chat</code> folder so that the folder structure now looks like this:</p><pre class="programlisting">/chat 
  client.go 
  main.go 
  room.go 
/trace 
</pre><p class="calibre10">Before we jump into code, let's agree on some design goals for our package by which we can measure success:</p><div class="book"><ul class="itemizedlist"><li class="listitem">The package should be easy to use</li><li class="listitem">Unit tests should cover the functionality</li><li class="listitem">Users should have the flexibility to replace the tracer with their own implementation</li></ul></div></div></div></body></html>