<html><head></head><body>
<div id="page" style="height:0pt"/><div class="book" title="Implementing external logging in"><div class="book" id="4REBM2-9c484ed022e64a0fb0e1aebf8e05d4fd"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="ch02lvl1sec0017" class="calibre1"/>Implementing external logging in</h1></div></div></div><p class="calibre10">In order to make use of the projects, clients, or accounts that we created on the authorization provider sites, we have to tell <code class="email">gomniauth</code> which providers we want to use and how we will interact with them. We do this by calling the <code class="email">WithProviders</code> function on the primary <code class="email">gomniauth</code> package. Add the following code snippet to <code class="email">main.go</code> (just underneath the <code class="email">flag.Parse()</code> line toward the top of the <code class="email">main</code> function):</p><pre class="programlisting">// setup gomniauth 
gomniauth.SetSecurityKey("PUT YOUR AUTH KEY HERE") 
gomniauth.WithProviders( 
  facebook.New("key", "secret", 
    "http://localhost:8080/auth/callback/facebook"), 
  github.New("key", "secret", 
    "http://localhost:8080/auth/callback/github"), 
  google.New("key", "secret", 
    "http://localhost:8080/auth/callback/google"), 
) 
</pre><p class="calibre10">You should replace the <code class="email">key</code> and <code class="email">secret</code> placeholders with the actual values you noted down earlier. The third argument represents the callback URL that should match the ones you provided when creating your clients on the provider's website. Notice the second path segment is <code class="email">callback</code>; while we haven't implemented this yet, this is where we handle the response from the authorization process.</p><p class="calibre10">As usual, you will need to ensure all the appropriate packages are imported:</p><pre class="programlisting">import ( 
  "github.com/stretchr/gomniauth/providers/facebook" 
  "github.com/stretchr/gomniauth/providers/github" 
  "github.com/stretchr/gomniauth/providers/google" 
) 
</pre><div class="informaltable" title="Note"><h3 class="title2"><a id="note0032" class="calibre1"/>Note</h3><p class="calibre10">Gomniauth requires the <code class="email">SetSecurityKey</code> call because it sends state data between the client and server along with a signature checksum, which ensures that the state values are not tempered with while being transmitted. The security key is used when creating the hash in a way that it is almost impossible to recreate the same hash without knowing the exact security key. You should replace <code class="email">some long key</code> with a security hash or phrase of your choice.</p></div></div></body></html>