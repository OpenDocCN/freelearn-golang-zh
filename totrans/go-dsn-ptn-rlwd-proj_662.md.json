["```go\ntype message struct { \n  Name      string \n  Message   string \n  When      time.Time \n  AvatarURL string \n} \n\n```", "```go\nfunc (c *client) read() { \n  defer c.socket.Close() \n  for { \n    var msg *message \n    err := c.socket.ReadJSON(&msg) \n    if err != nil { \n      return \n    } \n    msg.When = time.Now() \n    msg.Name = c.userData[\"name\"].(string) \n    if avatarURL, ok := c.userData[\"avatar_url\"]; ok { \n      msg.AvatarURL = avatarURL.(string) \n    } \n    c.room.forward <- msg \n  } \n} \n\n```"]