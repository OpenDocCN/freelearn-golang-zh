- en: Transmitting the avatar URL
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 传输头像URL
- en: 'We need to update our `message` type so that it can also carry the avatar URL
    with it. In `message.go`, add the `AvatarURL` string field:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要更新我们的`message`类型，使其也能携带头像URL。在`message.go`中添加`AvatarURL`字符串字段：
- en: '[PRE0]'
  id: totrans-2
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'So far, we have not actually assigned a value to `AvatarURL` like we do for
    the `Name` field; so, we must update our `read` method in `client.go`:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们实际上并没有像对`Name`字段那样为`AvatarURL`分配值；因此，我们必须更新`client.go`中的`read`方法：
- en: '[PRE1]'
  id: totrans-4
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: All we have done here is take the value from the `userData` field that represents
    what we put into the cookie and assigned it to the appropriate field in `message`
    if the value was present in the map. We now take the additional step of checking
    whether the value is present because we cannot guarantee that the auth service
    would provide a value for this field. And since it could be `nil`, it might cause
    panic to assign it to a `string` type if it's actually missing.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在这里所做的一切就是从代表我们放入cookie中的值的`userData`字段中取出值，并将其分配给`message`中的相应字段，如果该值存在于映射中。我们现在采取额外的步骤来检查该值是否存在，因为我们不能保证认证服务会为这个字段提供一个值。而且，由于它可能是`nil`，如果实际上缺失，将其分配给`string`类型可能会引起恐慌。
