- en: Adding the avatar to the user interface
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Now that our JavaScript client gets an avatar URL value via the socket, we
    can use it to display the image alongside the messages. We do this by updating
    the `socket.onmessage` code in `chat.html`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: When we receive a message, we will insert an `img` tag with the source set to
    the `AvatarURL` field. We will use jQuery's `css` method to force a width of `50`
    pixels. This protects us from massive pictures spoiling our interface and allows
    us to align the image to the middle of the surrounding text.
  prefs: []
  type: TYPE_NORMAL
- en: If we build and run our application having logged in with a previous version,
    you will find that the `auth` cookie that doesn't contain the avatar URL is still
    there. We are not asked to authenticate again (since we are already logged in),
    and the code that adds the `avatar_url` field never gets a chance to run. We could
    delete our cookie and refresh the page, but we would have to keep doing this whenever
    we make changes during development. Let's solve this problem properly by adding
    a logout feature.
  prefs: []
  type: TYPE_NORMAL
