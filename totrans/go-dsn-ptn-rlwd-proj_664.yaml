- en: Logging out
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'The simplest way to log out a user is to get rid of the `auth` cookie and redirect
    the user to the chat page, which will in turn cause a redirect to the login page
    (since we just removed the cookie). We do this by adding a new `HandleFunc` call
    to `main.go`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: The preceding handler function uses `http.SetCookie` to update the cookie setting
    `MaxAge` to `-1`, which indicates that it should be deleted immediately by the
    browser. Not all browsers are forced to delete the cookie, which is why we also
    provide a new `Value` setting of an empty string, thus removing the user data
    that would previously have been stored.
  prefs: []
  type: TYPE_NORMAL
- en: Tip
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'As an additional assignment, you can bulletproof your app a little by updating
    the first line in `ServeHTTP` for your `authHandler` method in `auth.go` to make
    it cope with the empty value case as well as the missing cookie case:'
  prefs: []
  type: TYPE_NORMAL
- en: '`if cookie, err := r.Cookie("auth"); err == http.ErrNoCookie || cookie.Value
    == ""`'
  prefs: []
  type: TYPE_NORMAL
- en: Instead of ignoring the return of `r.Cookie`, we keep a reference to the returned
    cookie (if there was actually one) and also add an additional check to see whether
    the `Value` string of the cookie is empty or not.
  prefs: []
  type: TYPE_NORMAL
- en: 'Before we continue, let''s add a `Sign Out` link to make it even easier to
    get rid of the cookie and also allow our end users to log out. In `chat.html`,
    update the `chatbox` form to insert a simple HTML link to the new `/logout` handler:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'Now build and run the application and open a browser to `localhost:8080/chat`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'Log out if you need to and log back in. When you click on **Send**, you will
    see your avatar picture appear next to your messages:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Logging out](img/00051.jpeg)'
  prefs: []
  type: TYPE_IMG
