<html><head></head><body>
<div class="book" title="Uploading an avatar picture">
<div class="book" title="An upload form"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch03lvl2sec0035" class="calibre1"/>An upload form</h2></div></div></div><p class="calibre10">If our users are to upload a file as their avatar, they need a way to browse their local hard drive and submit the file to the server. We facilitate this by adding a new template-driven page. In the <code class="email">chat/templates</code> folder, create a file called <code class="email">upload.html</code>:</p><pre class="programlisting">&lt;html&gt; 
  &lt;head&gt; 
    &lt;title&gt;Upload&lt;/title&gt; 
    &lt;link rel="stylesheet"        
    href="//netdna.bootstrapcdn.com/bootstrap/3.6.6/css/bootstrap.min.css"&gt; 
  &lt;/head&gt; 
  &lt;body&gt; 
    &lt;div class="container"&gt; 
      &lt;div class="page-header"&gt; 
        &lt;h1&gt;Upload picture&lt;/h1&gt; 
      &lt;/div&gt; 
      &lt;form role="form" action="/uploader" enctype="multipart/form-data"  
       method="post"&gt; 
        &lt;input type="hidden" name="userid" value="{{.UserData.userid}}" /&gt; 
        &lt;div class="form-group"&gt; 
          &lt;label for="avatarFile"&gt;Select file&lt;/label&gt; 
          &lt;input type="file" name="avatarFile" /&gt; 
        &lt;/div&gt; 
        &lt;input type="submit" value="Upload" class="btn" /&gt; 
      &lt;/form&gt; 
    &lt;/div&gt; 
  &lt;/body&gt; 
&lt;/html&gt; 
</pre><p class="calibre10">We used Bootstrap again to make our page look nice and also to make it fit in with the other pages. However, the key point to note here is the HTML form that will provide the user interface required to upload files. The action points to <code class="email">/uploader</code>, the handler for which we have yet to implement, and the <code class="email">enctype</code> attribute must be <code class="email">multipart/form-data</code> so that the browser can transmit binary data over HTTP. Then, there is an <code class="email">input</code> element of the type <code class="email">file</code>, which will contain a reference to the file we want to upload. Also, note that we have included the <code class="email">userid</code> value from the <code class="email">UserData</code> map as a hidden input this will tell us which user is uploading a file. It is important that the <code class="email">name</code> attributes be correct, as this is how we will refer to the data when we implement our handler on the server.</p><p class="calibre10">Let's now map the new template to the <code class="email">/upload</code> path in <code class="email">main.go</code>:</p><pre class="programlisting">http.Handle("/upload", &amp;templateHandler{filename: "upload.html"}) 
</pre></div></div></body></html>