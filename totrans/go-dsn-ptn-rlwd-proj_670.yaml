- en: An upload form
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 一个上传表单
- en: 'If our users are to upload a file as their avatar, they need a way to browse
    their local hard drive and submit the file to the server. We facilitate this by
    adding a new template-driven page. In the `chat/templates` folder, create a file
    called `upload.html`:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们的用户要将文件作为他们的头像上传，他们需要一种方式来浏览他们的本地硬盘并将文件提交到服务器。我们通过添加一个新的由模板驱动的页面来简化这个过程。在`chat/templates`文件夹中，创建一个名为`upload.html`的文件：
- en: '[PRE0]'
  id: totrans-2
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: We used Bootstrap again to make our page look nice and also to make it fit in
    with the other pages. However, the key point to note here is the HTML form that
    will provide the user interface required to upload files. The action points to
    `/uploader`, the handler for which we have yet to implement, and the `enctype`
    attribute must be `multipart/form-data` so that the browser can transmit binary
    data over HTTP. Then, there is an `input` element of the type `file`, which will
    contain a reference to the file we want to upload. Also, note that we have included
    the `userid` value from the `UserData` map as a hidden input this will tell us
    which user is uploading a file. It is important that the `name` attributes be
    correct, as this is how we will refer to the data when we implement our handler
    on the server.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 我们再次使用Bootstrap来使我们的页面看起来更美观，并且使其与其他页面保持一致。然而，这里的关键点是那个将提供用户界面以便上传文件的HTML表单。表单的动作指向`/uploader`，我们尚未实现其处理程序，并且`enctype`属性必须是`multipart/form-data`，这样浏览器才能通过HTTP传输二进制数据。然后，有一个类型为`file`的`input`元素，它将包含我们想要上传的文件的引用。此外，请注意，我们已经将`UserData`映射中的`userid`值作为一个隐藏的输入包含在内，这将告诉我们哪个用户正在上传文件。确保`name`属性正确是很重要的，因为这是我们将在服务器上实现处理程序时引用数据的方式。
- en: 'Let''s now map the new template to the `/upload` path in `main.go`:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们将新的模板映射到`main.go`中的`/upload`路径：
- en: '[PRE1]'
  id: totrans-5
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
