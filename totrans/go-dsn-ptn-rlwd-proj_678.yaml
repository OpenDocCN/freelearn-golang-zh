- en: Pipe design for command-line tools
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 命令行工具的管道设计
- en: We are going to build a series of command-line tools that use the standard streams
    (`stdin` and `stdout`) to communicate with the user and with other tools. Each
    tool will take an input line by line via the standard input pipe, process it in
    some way, and then print the output line by line to the standard out pipe for
    the next tool or user.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将构建一系列使用标准流（`stdin`和`stdout`）与用户和其他工具进行通信的命令行工具。每个工具将通过标准输入管道逐行读取输入，以某种方式处理它，然后将输出逐行打印到标准输出管道，以便传递给下一个工具或用户。
- en: 'By default, the standard input is connected to the user''s keyboard, and the
    standard output is printed to the terminal from where the command was run; however,
    both can be redirected using **redirection metacharacters**. It''s possible to
    throw the output away by redirecting it to `NUL` on Windows or `/dev/null` on
    Unix machines, or redirecting it to a file that will cause the output to be saved
    to a disk. Alternatively, you can pipe (using the `|` pipe character) the output
    of one program to the input of another; it is this feature that we will make use
    of in order to connect our various tools together. For example, you could pipe
    the output from one program to the input of another program in a terminal using
    this code:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，标准输入连接到用户的键盘，标准输出从运行命令的终端打印出来；然而，两者都可以使用**重定向元字符**进行重定向。可以将输出丢弃，通过将其重定向到Windows上的`NUL`或Unix机器上的`/dev/null`，或者将其重定向到将输出保存到磁盘的文件。或者，您可以使用（使用`|`管道字符）将一个程序的输出管道到另一个程序的输入；我们将利用这一特性将我们的各种工具连接起来。例如，您可以在终端使用以下代码将一个程序的输出管道到另一个程序的输入：
- en: '[PRE0]'
  id: totrans-3
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'The output of the `echo` command will be the string `Hello` (without the quotes),
    which is then **piped** to the `md5` command; this command will in turn calculate
    the MD5 hash of `Hello`:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: '`echo`命令的输出将是字符串`Hello`（不带引号），然后**管道**到`md5`命令；该命令将计算`Hello`的MD5哈希值：'
- en: '[PRE1]'
  id: totrans-5
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Our tools will work with lines of strings where each line (separated by a linefeed
    character) represents one string. When run without any pipe redirection, we will
    be able to interact directly with the programs using the default in and out, which
    will be useful when testing and debugging our code.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的工具将处理由字符串组成的行，其中每一行（由换行符分隔）代表一个字符串。在没有使用任何管道重定向的情况下运行，我们将能够直接通过默认的输入和输出与程序交互，这在测试和调试我们的代码时将非常有用。
