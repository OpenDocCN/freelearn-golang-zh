<html><head></head><body>
<div class="book" title="Chapter&#xA0;5.&#xA0; Building Distributed Systems and Working with Flexible Data" id="55U1S1-9c484ed022e64a0fb0e1aebf8e05d4fd">
<div class="book" title="The system design">
<div class="book" title="The database design"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch05lvl2sec0046" class="calibre1"/>The database design</h2></div></div></div><p class="calibre10">We will call our MongoDB database <code class="email">ballots</code>. It will contain a single collection called <code class="email">polls</code>, which is where we will store the poll details, such as the title, the options, and the results (in a single JSON document). The code for a poll will look something like this:</p><pre class="programlisting">{ 
  "_id": "???", 
  "title": "Poll title", 
  "options": ["one", "two", "three"], 
  "results": { 
    "one": 100, 
    "two": 200, 
    "three": 300 
  } 
} 
</pre><p class="calibre10">The <code class="email">_id</code> field is a unique string for each item that is automatically generated by MongoDB. The <code class="email">options</code> field contains an array of string options; these are the hash tags we will look for on Twitter. The <code class="email">results</code> field is a map where the key represents the option, and the value represents the total number of votes for each item.</p></div></div></div></body></html>