["```go\nfunc publishVotes(votes <-chan string) <-chan struct{} { \n  stopchan := make(chan struct{}, 1) \n  pub, _ := nsq.NewProducer(\"localhost:4150\",\n   nsq.NewConfig()) \n  go func() { \n    for vote := range votes { \n      pub.Publish(\"votes\", []byte(vote)) // publish vote \n    } \n    log.Println(\"Publisher: Stopping\") \n    pub.Stop() \n    log.Println(\"Publisher: Stopped\") \n    stopchan <- struct{}{} \n  }() \n  return stopchan \n} \n\n```"]