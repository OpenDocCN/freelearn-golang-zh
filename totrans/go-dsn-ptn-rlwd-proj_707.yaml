- en: Running our solution
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 运行我们的解决方案
- en: 'It''s time to see our code in action. Ensure that you have `nsqlookupd`, `nsqd`,
    and `mongod` running in separate terminal windows with the following:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 是时候看到我们的代码在实际中发挥作用了。确保你在不同的终端窗口中运行了`nsqlookupd`、`nsqd`和`mongod`，具体操作如下：
- en: '[PRE0]'
  id: totrans-2
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'If you haven''t already done so, make sure the `twittervotes` program is running
    too. Then, in the `counter` folder, build and run our counting program:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你还没有这样做，请确保`twittervotes`程序也在运行。然后，在`counter`文件夹中，构建并运行我们的计数程序：
- en: '[PRE1]'
  id: totrans-4
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'You should see a periodic output describing what work `counter` is doing, such
    as the following:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 你应该会看到周期性的输出，描述`counter`正在做什么工作，例如以下内容：
- en: '[PRE2]'
  id: totrans-6
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Tip
  id: totrans-7
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: The output will, of course, vary since we are actually responding to real, live
    activity on Twitter.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，输出会变化，因为我们实际上是在响应Twitter上的真实活动。
- en: 'We can see that our program is receiving vote data from NSQ and reports to
    update the database with the results. We can confirm this by opening the MongoDB
    shell and querying the poll data to see whether the `results` map is being updated.
    In another terminal window, open the MongoDB shell:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以看到我们的程序正在从NSQ接收投票数据，并向数据库报告更新结果。我们可以通过打开MongoDB shell并查询投票数据来确认这一点，查看`results`映射是否正在更新。在另一个终端窗口中打开MongoDB
    shell：
- en: '[PRE3]'
  id: totrans-10
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Ask it to use the ballots database:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 让它使用投票数据库：
- en: '[PRE4]'
  id: totrans-12
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Use the `find` method with no arguments to get all polls (add the `pretty`
    method to the end to get nicely formatted JSON):'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 使用不带参数的`find`方法来获取所有投票（在末尾添加`pretty`方法以获取格式良好的JSON）：
- en: '[PRE5]'
  id: totrans-14
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: The `results` map is indeed updated, and at any point in time, it contains the
    total number of votes for each option.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '`results`映射确实已更新，并且在任何时间点，它都包含每个选项的总票数。'
