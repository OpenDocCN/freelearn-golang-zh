- en: Chapter 6.  Exposing Data and Functionality through a RESTful Data Web Service
    API
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第6章. 通过RESTful数据Web服务API公开数据和功能
- en: In the previous chapter, we built a service that reads tweets from Twitter,
    counts the hash tag votes, and stores the results in a MongoDB database. We also
    used the MongoDB shell to add polls and see the poll results. This approach is
    fine if we are the only ones using our solution, but it would be madness if we
    released our project and expected users to connect directly to our MongoDB instance
    in order to use the service we built.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一章中，我们构建了一个服务，该服务从Twitter读取推文，统计标签投票，并将结果存储在MongoDB数据库中。我们还使用了MongoDB shell来添加投票并查看投票结果。如果我们是唯一使用我们解决方案的人，这种方法是可以的，但如果我们发布了我们的项目并期望用户直接连接到我们的MongoDB实例以使用我们构建的服务，那就疯了。
- en: Therefore, in this chapter, we are going to build a RESTful data service through
    which the data and functionality will be exposed. We will also put together a
    simple website that consumes the new API. Users may then either use our website
    to create and monitor polls or build their own application on top of the web services
    we release.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，在本章中，我们将构建一个RESTful数据服务，通过该服务将公开数据和功能。我们还将构建一个简单的网站，该网站消费新的API。用户可以使用我们的网站创建和监控投票，或者在我们发布的Web服务之上构建自己的应用程序。
- en: Tip
  id: totrans-3
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 小贴士
- en: Code in this chapter depends on the code in [Chapter 5](part0174_split_000.html#55U1S1-9c484ed022e64a0fb0e1aebf8e05d4fd
    "Chapter 5.  Building Distributed Systems and Working with Flexible Data"), *Building
    Distributed Systems and Working with Flexible Data*, so it is recommended that
    you complete that chapter first, especially since it covers setting up the environment
    that the code in this chapter runs on.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 本章中的代码依赖于[第5章](part0174_split_000.html#55U1S1-9c484ed022e64a0fb0e1aebf8e05d4fd
    "第5章. 构建分布式系统和处理灵活数据")中的代码，即《构建分布式系统和处理灵活数据》，因此建议您首先完成该章节，特别是因为它涵盖了本章代码运行的环境设置。
- en: 'Specifically, you will learn:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 具体来说，您将学习：
- en: How wrapping `http.HandlerFunc` types can give us a simple but powerful pipeline
    of execution for our HTTP requests
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何通过包装`http.HandlerFunc`类型为我们的HTTP请求提供一个简单但强大的执行管道
- en: How to safely share data between HTTP handlers using the `context` package
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何使用`context`包安全地在HTTP处理程序之间共享数据
- en: Best practices for the writing of handlers responsible for exposing data
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 负责公开数据的手柄编写的最佳实践
- en: Where small abstractions can allow us to write the simplest possible implementations
    now but leave room to improve them later without changing the interface
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 小抽象如何允许我们现在编写最简单的实现，同时为将来在不更改接口的情况下改进它们留下空间
- en: How adding simple helper functions and types to our project will prevent us
    from (or at least defer) adding dependencies on external packages
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何通过向我们的项目添加简单的辅助函数和类型来防止我们（或至少推迟）添加对外部包的依赖
