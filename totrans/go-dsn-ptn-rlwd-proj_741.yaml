- en: Handlers that use query parameters
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用查询参数的处理程序
- en: 'Now we need to wire up our `/recommendations` call, so head back to `main.go`
    in the `cmd/meander` folder and add the following code inside the `main` function:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们需要设置我们的`/recommendations`调用，因此回到`cmd/meander`文件夹中的`main.go`文件，并在`main`函数内添加以下代码：
- en: '[PRE0]'
  id: totrans-2
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: This handler is responsible for preparing the `meander.Query` object and calling
    its `Run` method before responding with the results. The `http.Request` type's
    URL value exposes the `Query` data that provides a `Get` method which, in turn,
    looks up a value for a given key.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 此处理程序负责在响应结果之前准备`meander.Query`对象并调用其`Run`方法。`http.Request`类型的URL值暴露了`Query`数据，该数据提供了一个`Get`方法，该方法反过来查找给定键的值。
- en: The journey string is translated from the `bar|cafe|movie_theater` format to
    a slice of strings by splitting on the pipe character. Then, a few calls to functions
    in the `strconv` package turn the string latitude, longitude, and radius values
    into numerical types. If the values are in an incorrect format, we will get an
    error, which we will then write out to the client using the `http.Error` helper
    with an `http.StatusBadRequest` status.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 路径字符串从`bar|cafe|movie_theater`格式通过管道字符分割成字符串切片。然后，通过调用`strconv`包中的几个函数，将字符串纬度、经度和半径值转换为数值类型。如果值格式不正确，我们将得到一个错误，然后使用带有`http.StatusBadRequest`状态的`http.Error`辅助函数将其写入客户端。
