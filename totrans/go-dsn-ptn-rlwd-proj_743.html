<html><head></head><body>
<div class="book" title="Generating random recommendations">
<div class="book" title="Testing our API"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_7"><a id="ch07lvl2sec0078" class="calibre1"/>Testing our API</h2></div></div></div><p class="calibre10">Now that we are ready to test our API, head to a console and navigate to the <code class="email">cmd/meander</code>Â folder. Because our program imports the <code class="email">meander</code> package, building the program will automatically build our <code class="email">meander</code> package too.</p><p class="calibre10">Build and run the program:</p><pre class="programlisting">
<span class="strong"><strong class="calibre2">go build -o meanderapi</strong></span>
<span class="strong"><strong class="calibre2">./meanderapi</strong></span>
</pre><p class="calibre10">To see meaningful results from our API, let's take a minute to find your actual latitude and longitude. Head over to <a class="calibre1" href="http://mygeoposition.com/">http://mygeoposition.com/</a> and use the web tools to get the <code class="email">x,y</code> values for a location you are familiar with.</p><p class="calibre10">Or, pick from these popular cities:</p><div class="book"><ul class="itemizedlist"><li class="listitem">London, England: <code class="email">51.520707 x 0.153809</code></li><li class="listitem">New York, USA: <code class="email">40.7127840 x -74.0059410</code></li><li class="listitem">Tokyo, Japan: <code class="email">35.6894870 x 139.6917060</code></li><li class="listitem">San Francisco, USA: <code class="email">37.7749290 x -122.4194160</code></li></ul></div><p class="calibre10">Now, open a web browser and access the <code class="email">/recommendations</code> endpoint with some appropriate values for the fields:</p><pre class="programlisting">http://localhost:8080/recommendations? 
  lat=51.520707&amp;lng=-0.153809&amp;radius=5000&amp; 
  journey=cafe|bar|casino|restaurant&amp; 
  cost=$...$$$ 
</pre><p class="calibre10">The following screenshot shows what a sample recommendation around London might look like:</p><p class="calibre10">
</p><div class="mediaobject"><img src="../images/00062.jpeg" alt="Testing our API" class="calibre14"/></div><p class="calibre15"> </p><p class="calibre10">
</p><p class="calibre10">Feel free to play around with the values in the URL to see how powerful the simple API is by trying various journey strings, tweaking the locations, and trying different cost range value strings.</p><div class="book" title="Web application"><div class="book"><div class="book"><div class="book"><h3 class="title2"><a id="ch07lvl3sec0027" class="calibre1"/>Web application</h3></div></div></div><p class="calibre10">We are going to download a complete web application built to the same API specifications and point it at our implementation to see it come to life before our eyes. Head over to <a class="calibre1" href="https://github.com/matryer/goblueprints/tree/master/chapter7/meanderweb">https://github.com/matryer/goblueprints/tree/master/chapter7/meanderweb</a> and download the <code class="email">meanderweb</code> project into your <code class="email">GOPATH</code> folder (alongside your root meander folder will do).</p><p class="calibre10">In a terminal, navigate to the <code class="email">meanderweb</code> folder and build and run it:</p><pre class="programlisting">
<span class="strong"><strong class="calibre2">go build -o meanderweb</strong></span>
<span class="strong"><strong class="calibre2">./meanderweb</strong></span>
</pre><p class="calibre10">This will start a website running on <code class="email">localhost:8081</code>, which is hardcoded to look for the API running at <code class="email">localhost:8080</code>. Because we added the CORS support, this won't be a problem despite them running on different domains.</p><p class="calibre10">Open a browser to <code class="email">http://localhost:8081/</code> and interact with the application; while somebody else built the UI, it would be pretty useless without the API that we built in order to power it.</p></div></div></div></body></html>