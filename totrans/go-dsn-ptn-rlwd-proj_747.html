<html><head></head><body>
<div class="book" title="Chapter&#xA0;8.&#xA0;Filesystem Backup" id="5PUTM1-9c484ed022e64a0fb0e1aebf8e05d4fd">
<div class="book" title="Solution design">
<div class="book" title="The project structure"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch08lvl2sec0079" class="calibre1"/>The project structure</h2></div></div></div><p class="calibre10">It is common in Go solutions to have, in a single project, both a package that allows other Go programmers to use your capabilities and a command-line tool that allows end users to use your programs.</p><p class="calibre10">As we saw in the last chapter, a convention to structure such projects is emerging whereby we have the package in the main project project folder and the command-line tool inside a subfolder called <code class="email">cmd</code> or <code class="email">cmds</code> if you have multiple commands. Because all packages are equal in Go (regardless of the directory tree), you can import the package from the command subpackages, knowing you'll never need to import the commands from the project package (which is illegal as you can't have cyclical dependencies). This may seem like an unnecessary abstraction, but it is actually quite a common pattern and can be seen in the standard Go tool chain with examples such as <code class="email">gofmt</code> and <code class="email">goimports</code>.</p><p class="calibre10">For example, for our project, we are going to write a package called <code class="email">backup</code> and two command-line tools: the daemon and the user interaction tool. We will structure our project in the following way:</p><pre class="programlisting">/backup - package 
/backup/cmds/backup - user interaction tool 
/backup/cmds/backupd - worker daemon 
</pre><div class="informaltable" title="Tip"><h3 class="title2"><a id="tip122" class="calibre1"/>Tip</h3><p class="calibre10">The reason we don't just put code directly inside the <code class="email">cmd</code> folder (even if we only had one command) is that when <code class="email">go install</code> builds projects, it uses the name of the folder as the command name, and it wouldn't be very useful if all of our tools were called <code class="email">cmd</code>.</p></div></div></div></div></body></html>