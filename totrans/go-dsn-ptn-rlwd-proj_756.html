<html><head></head><body>
<div class="book" title="The user command-line tool">
<div class="book" title="Using our new tool"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_3"><a id="ch08lvl2sec0086" class="calibre1"/>Using our new tool</h2></div></div></div><p class="calibre10">We have completed our simple <code class="email">backup</code> command-line tool. Let's look at it in action. Create a folder called <code class="email">backupdata</code> inside <code class="email">backup/cmds/backup</code>; this will become the <code class="email">filedb</code> database.</p><p class="calibre10">Build the tool in a terminal by navigating to the <code class="email">main.go</code> file and running this:</p><pre class="programlisting">
<span class="strong"><strong class="calibre2">go build -o backup</strong></span>
</pre><p class="calibre10">If all is well, we can now add a path:</p><pre class="programlisting">
<span class="strong"><strong class="calibre2">./backup -db=./backupdata add ./test ./test2</strong></span>
</pre><p class="calibre10">You should see the expected output:</p><pre class="programlisting">
<span class="strong"><strong class="calibre2">+ ./test [Not yet archived]</strong></span>
<span class="strong"><strong class="calibre2">+ ./test2 [Not yet archived]</strong></span>
</pre><p class="calibre10">Now let's add another path:</p><pre class="programlisting">
<span class="strong"><strong class="calibre2">./backup -db=./backupdata add ./test3</strong></span>
</pre><p class="calibre10">You should now see the complete list:</p><pre class="programlisting">
<span class="strong"><strong class="calibre2">./backup -db=./backupdata list</strong></span>
</pre><p class="calibre10">Our program should yield the following:</p><pre class="programlisting">
<span class="strong"><strong class="calibre2">= ./test [Not yet archived]</strong></span>
<span class="strong"><strong class="calibre2">= ./test2 [Not yet archived]</strong></span>
<span class="strong"><strong class="calibre2">= ./test3 [Not yet archived]</strong></span>
</pre><p class="calibre10">Let's remove <code class="email">test3</code> in order to make sure the <code class="email">remove</code> functionality is working:</p><pre class="programlisting">
<span class="strong"><strong class="calibre2">./backup -db=./backupdata remove ./test3</strong></span>
<span class="strong"><strong class="calibre2">./backup -db=./backupdata list</strong></span>
</pre><p class="calibre10">This will take us back to this:</p><pre class="programlisting">
<span class="strong"><strong class="calibre2">+ ./test [Not yet archived]</strong></span>
<span class="strong"><strong class="calibre2">+ ./test2 [Not yet archived]</strong></span>
</pre><p class="calibre10">We are now able to interact with the <code class="email">filedb</code> database in a way that makes sense for our use case. Next, we build the daemon program that will actually use our <code class="email">backup</code> package to do the work.</p></div></div></body></html>