- en: Updating filedb records
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: All that is left is for us is implement the `check` function that should call
    the `Now` method on the `Monitor` type and update the database with new hashes
    if there are any.
  prefs: []
  type: TYPE_NORMAL
- en: 'Underneath the `main` function, add the following code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: The `check` function first tells the user that a check is happening before immediately
    calling `Now`. If the `Monitor` type did any work for us, which is to ask whether
    it archived any files, we output them to the user and go on to update the database
    with the new values. The `SelectEach` method allows us to change each record in
    the collection if we so wish by returning the replacement bytes. So we unmarshal
    the bytes to get the path structure, update the hash value, and return the marshaled
    bytes. This ensures that the next time we start a `backupd` process, it will do
    so with the correct hash values.
  prefs: []
  type: TYPE_NORMAL
