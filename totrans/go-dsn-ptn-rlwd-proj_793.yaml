- en: Parsing path parameters
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 解析路径参数
- en: Some of our API endpoints will need to pull IDs out of the path string, but
    we don't want to add any dependencies to our project (such as an external router
    package); instead, we are going to write a simple function that will parse path
    parameters for us.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的一些 API 端点将需要从路径字符串中提取 ID，但我们不想向我们的项目添加任何依赖（例如外部路由包）；相反，我们将编写一个简单的函数来为我们解析路径参数。
- en: 'Let''s first write a test that will explain how we want our path parsing to
    work. Create a file called http_test.go and add the following unit test:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，让我们编写一个测试来解释我们希望我们的路径解析如何工作。创建一个名为 http_test.go 的文件，并添加以下单元测试：
- en: '[PRE0]'
  id: totrans-3
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: We expect to be able to pass in a pattern and have a map returned that discovers
    the values from the path in `http.Request`.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 我们期望能够传递一个模式，并返回一个映射，该映射从 `http.Request` 中的路径发现值。
- en: Run the test (with `go test -v`) and note that it fails.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 运行测试（使用 `go test -v`），并注意它失败了。
- en: 'At the bottom of `http.go`, add the following implementation to make the test
    pass:'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 在 `http.go` 的底部，添加以下实现以使测试通过：
- en: '[PRE1]'
  id: totrans-7
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'The function breaks the path from the specific `http.Request` and builds a
    map of the values with keys taken from breaking the pattern path. So for a pattern
    of `/questions/id` and a path of `/questions/123`, it would return the following
    map:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 该函数将路径从特定的 `http.Request` 中拆分，并构建一个包含从拆分模式路径中获取的键的值映射。因此，对于模式 `/questions/id`
    和路径 `/questions/123`，它将返回以下映射：
- en: '[PRE2]'
  id: totrans-9
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Of course, we'd ignore the `questions` key, but `id` will be useful.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，我们会忽略 `questions` 键，但 `id` 将是有用的。
