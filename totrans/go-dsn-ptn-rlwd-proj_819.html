<html><head></head><body>
<div class="book" title="Creating a server command">
<div class="book" title="Running the HTTP server"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_2"><a id="ch10lvl2sec00125" class="calibre1"/>Running the HTTP server</h2></div></div></div><p class="calibre10">Now we will add the goroutine to make and run the JSON/HTTP server to the main function body:</p><pre class="programlisting">  // HTTP transport 
  go func() { 
    log.Println("http:", *httpAddr) 
    handler := vault.NewHTTPServer(ctx, endpoints) 
    errChan &lt;- http.ListenAndServe(*httpAddr, handler) 
  }() 
</pre><p class="calibre10">All the heavy lifting has already been done for us in our package code by Go kit, so we are left with simply calling the <code class="email">NewHTTPServer</code> function, passing in the background context and the service endpoints we wish for it to expose, before calling the standard library's <code class="email">http.ListenAndServe</code>, which exposes the handler functionality in the specified <code class="email">httpAddr</code>. If an error occurs, we send it down the error channel.</p></div></div></body></html>