- en: Manually testing the rate limiter
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: To see whether our rate limiter is working, and since we set such low thresholds,
    we can test it just using our command-line tool.
  prefs: []
  type: TYPE_NORMAL
- en: 'First, restart the server (so the new code runs) by hitting *Ctrl + C* in the
    terminal window running the server. This signal will be trapped by our code, and
    an error will be sent down `errChan`, causing the program to quit. Once it has
    terminated, restart it:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'Now, in another window, let''s hash some passwords:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'Repeat this command a few timesâ€“in most terminals, you can press the up arrow
    key and return. You''ll notice that the first few requests succeed because it''s
    within the limits, but if you get a little more aggressive and issue more than
    five requests in a second, you''ll notice that we get errors:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: This shows that our rate limiter is working. We see errors until the token bucket
    fills back up, where our requests are fulfilled again.
  prefs: []
  type: TYPE_NORMAL
