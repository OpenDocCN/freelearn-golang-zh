<html><head></head><body><div class="book" title="Cleaning up, building, and running tests on save" id="6RB1C1-9c484ed022e64a0fb0e1aebf8e05d4fd"><div class="book"><div class="book"><div class="book"><h1 class="title" id="calibre_pb_0"><a id="app01lvl1sec0084" class="calibre1"/>Cleaning up, building, and running tests on save</h1></div></div></div><p class="calibre10">Since the Go core team has provided us with such great tools as <code class="email">fmt</code>, <code class="email">vet</code>, <code class="email">test</code>, and <code class="email">goimports</code>, we are going to look at a development practice that has proven to be extremely useful. Whenever we save a <code class="email">.go</code> file, we want to perform the following tasks automatically:</p><div class="book"><ol class="orderedlist"><li class="listitem" value="1">Use <code class="email">goimports</code> and <code class="email">fmt</code> to fix our imports and format the code.</li><li class="listitem" value="2">Vet the code for any faux pas and tell us immediately.</li><li class="listitem" value="3">Attempt to build the current package and output any build errors.</li><li class="listitem" value="4">If the build is successful, run the tests for the package and output any failures.</li></ol><div class="calibre12"/></div><p class="calibre10">Because Go code compiles so quickly (Rob Pike once actually said that it doesn't build quickly, but it's just not slow like everything else), we can comfortably build entire packages every time we save a file. This is also true for running tests to help us if we are developing in a TDD style, and the experience is great. Every time we make changes to our code, we can immediately see whether we have broken something or had an unexpected impact on some other part of our project. We'll never see package import errors again because our <code class="email">import</code> statement will have been fixed for us, and our code will be correctly formatted right in front of our eyes.</p><p class="calibre10">Some editors are likely to not support running code in response to specific events, such as saving a file, which leaves you with two options: you can either switch to a better editor, or you can write your own script file that runs in response to filesystem changes. The latter solution is out of the scope of this book; instead, we will focus on how to implement this functionality in a couple of popular editor codes.</p></div></body></html>