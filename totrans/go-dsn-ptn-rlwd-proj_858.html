<html><head></head><body>
<div class="book" title="Integrated developer environments">
<div class="book" title="Sublime Text 3"><div class="book"><div class="book"><div class="book"><h2 class="title1" id="calibre_pb_1"><a id="app01lvl2sec00150" class="calibre1"/>Sublime Text 3</h2></div></div></div><p class="calibre10">Sublime Text 3 is an excellent editor to write Go code that runs on OS X, Linux, and Windows and has an extremely powerful expansion model, which makes it easy to customize and extend. You can download Sublime Text from <a class="calibre1" href="http://www.sublimetext.com/">http://www.sublimetext.com/</a> and trial-use it for free before deciding whether you want to buy it or not.</p><p class="calibre10">Thanks to <span class="strong"><strong class="calibre2">DisposaBoy</strong></span> (refer to <a class="calibre1" href="https://github.com/DisposaBoy">https://github.com/DisposaBoy</a>), there is already a Sublime expansion package for Go, which actually gives us a wealth of features and power that a lot of Go programmers actually miss out on. We are going to install this <code class="email">GoSublime</code> package and then build upon it to add our desired on-save functionality.</p><p class="calibre10">Before we can install <code class="email">GoSublime</code>, we need to install Package Control into Sublime Text. Head over to <a class="calibre1" href="https://sublime.wbond.net/">https://sublime.wbond.net/</a> and click on the <span class="strong"><strong class="calibre2">Installation</strong></span> link for instructions on how to install Package Control. At the time of writing this, it's simply a case of copying the single, albeit long, line command and pasting it into the Sublime console, which can be opened by navigating to <span class="strong"><strong class="calibre2">View</strong></span> | <span class="strong"><strong class="calibre2">Show Console</strong></span> from the menu.</p><p class="calibre10">Once this is complete, press <span class="strong"><em class="calibre11">shift + command + P</em></span> and type <code class="email">Package Control: Install Package</code> and press <span class="strong"><em class="calibre11">return</em></span> when you have selected the option. After a short delay (where Package Control is updating its listings), a box will appear, allowing you to search for and install GoSublime just by typing it in, selecting it, and pressing <span class="strong"><em class="calibre11">return</em></span>. If all is well, GoSublime will be installed and writing Go code will just become an order of magnitude easier.</p><div class="informaltable" title="Tip"><h3 class="title2"><a id="tip189" class="calibre1"/>Tip</h3><p class="calibre10">Now that you have GoSublime installed, you can open a short help file containing the details of the package by pressing <span class="strong"><em class="calibre11">command + ., command + 2</em></span> (the command key and period at the same time, followed by the command key and number 2).</p></div><p class="calibre10">For some additional help while saving, press <span class="strong"><em class="calibre11">command + ., command + 5</em></span> to open the GoSublime settings and add the following entry to the object:</p><pre class="programlisting">"on_save": [ 
  { 
    "cmd": "gs9o_open",  
    "args": { 
      "run": ["sh", "go build . errors &amp;&amp; go test -i &amp;&amp; go test &amp;&amp; 
       go vet &amp;&amp; golint"], 
      "focus_view": false 
    } 
  } 
] 
</pre><div class="informaltable" title="Tip"><h3 class="title2"><a id="tip190" class="calibre1"/>Tip</h3><p class="calibre10">Note that the settings file is actually a JSON object, so ensure that you add the <code class="email">on_save</code> property without corrupting the file. For example, if you have properties before and after, ensure the appropriate commas are in place.</p></div><p class="calibre10">The preceding setting will tell Sublime Text to build the code looking for errors, install test dependencies, run tests, and vet the code whenever we save the file. Save the settings file (don't close it just yet), and let's see this in action.</p><p class="calibre10">Navigate to <span class="strong"><strong class="calibre2">Choose File</strong></span> | <span class="strong"><strong class="calibre2">Open...</strong></span> from the menu and select a folder to open for now, let's open our <code class="email">tooling</code> folder. The simple user interface of Sublime Text makes it clear that we only have one file in our project right now: <code class="email">main.go</code>. Click on the file and add some extra linefeeds, and add and remove some indenting. Then, navigate to <span class="strong"><strong class="calibre2">File</strong></span> | <span class="strong"><strong class="calibre2">Save</strong></span> from the menu, or press <span class="strong"><em class="calibre11">command + S</em></span>. Note that the code is immediately cleaned up, and provided that you haven't removed the oddly placed return statement from <code class="email">main.go</code>, you will notice that the console has appeared and is reporting the issue thanks to go vet:</p><pre class="programlisting">
<span class="strong"><strong class="calibre2">main.go:8: unreachable code</strong></span>
</pre><p class="calibre10">Holding down <span class="strong"><em class="calibre11">command + shift</em></span> and double-clicking on the unreachable code line in the console will open the file and jump the cursor to the right line in question. You can see how helpful this feature is going to be as you continue to write Go code.</p><p class="calibre10">If you add an unwanted import to the file, you will notice that on using <code class="email">on_save</code>, you are told about the problem, but it wasn't automatically fixed. This is because we have another tweak to make. In the same settings file as the one you added the <code class="email">on_save</code> property to, add the following property:</p><pre class="programlisting">
<span class="strong"><strong class="calibre2">"fmt_cmd": ["goimports"]</strong></span>
</pre><p class="calibre10">This tells GoSublime to use the <code class="email">goimports</code> command instead of <code class="email">go fmt</code>. Save this file again, and head back to <code class="email">main.go</code>. Add <code class="email">net/http</code> to the imports again, remove <code class="email">fmt</code> import, and save the file. Note that the unused package was removed, and <code class="email">fmt</code> was put back again.</p></div></div></body></html>