<html><head></head><body><div id="book-content"><div id="sbo-rt-content"><div id="_idContainer033">
			<h1 id="_idParaDest-67" class="chapter-number"><a id="_idTextAnchor415"/>2</h1>
			<h1 id="_idParaDest-68"><a id="_idTextAnchor416"/>Command and Control</h1>
			<p class="callout-heading"><a id="_idTextAnchor417"/>Overview</p>
			<p class="callout">In this chapter, we’ll use branching logic and loops to demonstrate how logic can be controlled and selectively run. With these tools, you’ll have control of what you do and don’t want to run based on the values <span class="No-Break">of variables.</span></p>
			<p class="callout">By the end of this chapter, you will be able to implement branching logic using <strong class="source-inline">if</strong>, <strong class="source-inline">else</strong>, and <strong class="source-inline">else if</strong>; use <strong class="source-inline">switch</strong> statements to simplify complex branching logic; create looping logic using a <strong class="source-inline">for</strong> loop; loop over complex data collections using <strong class="source-inline">range</strong>; use <strong class="source-inline">continue</strong> and <strong class="source-inline">break</strong> to take control of the flow of loops; and use <strong class="source-inline">goto</strong> statements to jump to a labeled statement within <span class="No-Break">a function.</span></p>
			<h1 id="_idParaDest-69"><a id="_idTextAnchor418"/>Technical requirements</h1>
			<p>For this chapter, you'll require Go version 1.21 or higher. The code for this chapter can be found <span class="No-Break">at: </span><a href="https://github.com/PacktPublishing/Go-Programming-From-Beginner-to-Professional-Second-Edition-/tree/main/Chapter02"><span class="No-Break">https://github.com/PacktPublishing/Go-Programming-From-Beginner-to-Professional-Second-Edition-/tree/main/Chapter02</span></a><span class="No-Break">.</span></p>
			<h1 id="_idParaDest-70"><a id="_idTextAnchor419"/><a id="_idTextAnchor420"/>Introduction</h1>
			<p>In the previous chapter, we looked at variables and values and how we can temporarily store data in a variable and make changes to that data. We’re now going to look at how we can use that data to run logic in code, or not, selectively. “Logic” refers to the sequence of instructions that control how your program operates or processes data. This logic allows you to control how data flows through your software. You can react to and perform different operations based on the values in <span class="No-Break">your variables.</span></p>
			<p>The logic could be for validating your user’s inputs. If we were writing code to manage a bank account and the user asked to withdraw some money, we could check that they asked for a valid amount of money. We would check that they had enough money in their account. If the validation were successful, we would use logic to update their balance, transfer the money, and show a success message. If the validation failed, we’d show a message explaining what <span class="No-Break">went wrong.</span></p>
			<p>If your software is a virtual world, then logic is the physical law of that world. Like the physical laws of our world, those laws must be followed and can’t be broken. If you create a law with a flaw in it, then your virtual world won’t run smoothly and could <span class="No-Break">even explode.</span></p>
			<p>Another form of logic is a loop; using loops allows you to execute the same code multiple times. A common way to use loops is to iterate over a collection of data. For our imaginary banking software, we would use a loop to step through a user’s transactions to display them to the user <span class="No-Break">on request.</span></p>
			<p>Loops and logic allow the software to have complex behavior that responds to changing and <span class="No-Break">dynamic data.</span></p>
			<h1 id="_idParaDest-71"><a id="_idTextAnchor421"/><a id="_idTextAnchor422"/>if statements</h1>
			<p>An <strong class="source-inline">if</strong> statement is <a id="_idIndexMarker121"/>the most basic form of logic in Go. An <strong class="source-inline">if</strong> statement either will or will not run a block of code based on a Boolean expression. The notation looks like this: <strong class="source-inline">if &lt;boolean expression&gt; { &lt;code </strong><span class="No-Break"><strong class="source-inline">block&gt; }</strong></span><span class="No-Break">.</span></p>
			<p>The Boolean expression can be simple code that results in a Boolean value. The code block can be any logic that you could also put in a function and are confined to the code block of that function. The code block runs when the Boolean expression is true. You can only use <strong class="source-inline">if</strong> statements within the scope of a function. In Go, the concept of “function scope” refers to the visibility and accessibility of variables and statements within a <span class="No-Break">function. .</span><a id="_idTextAnchor423"/><a id="_idTextAnchor424"/></p>
			<h2 id="_idParaDest-72"><a id="_idTextAnchor425"/>Exercise 2.01 – a simple if statement</h2>
			<p>In this<a id="_idIndexMarker122"/> exercise, we’ll use an <strong class="source-inline">if</strong> statement to control whether<a id="_idIndexMarker123"/> certain code will or will not run. We’ll define an <strong class="source-inline">int</strong> value that will be hardcoded, but in a real-world application, this could be user input. We’ll then check whether the value is an odd or even number using the <strong class="source-inline">%</strong> operator, also known as a modulus expression, on the variable. The modulus gives you the amount remaining after division. We’ll use the modulus to get the remainder after dividing by 2. If we <a id="_idIndexMarker124"/>get a remainder of 0, then we know the number is even. If the remainder is 1, then we know the number is<a id="_idIndexMarker125"/> odd. The modulus results in an <strong class="source-inline">int</strong> value, so we use <strong class="source-inline">==</strong> (comparison operator) to get a <strong class="source-inline">true</strong> or <strong class="source-inline">false</strong> <span class="No-Break">Boolean value:</span></p>
			<ol>
				<li>Create a new folder and add a <span class="No-Break"><strong class="source-inline">main.go</strong></span><span class="No-Break"> file.</span></li>
				<li>In <strong class="source-inline">main.go</strong>, add the package <span class="No-Break">and import:</span><pre class="source-code">
package main
import "fmt"</pre></li>				<li>Create a <span class="No-Break"><strong class="source-inline">main</strong></span><span class="No-Break"> function:</span><pre class="source-code">
func main() {</pre></li>				<li>Define an <strong class="source-inline">int</strong> variable with an initial value. We are setting it to 5 here, which is an odd number, but we could also set it to 6, which is an <span class="No-Break">even number:</span><pre class="source-code">
  input := 5</pre></li>				<li>Create an <strong class="source-inline">if</strong> statement that uses a modulus expression, then check whether the result is equal <span class="No-Break">to 0:</span><pre class="source-code">
  if input%2 == 0 {</pre></li>				<li>When the Boolean expression results in <strong class="source-inline">true</strong>, that means the number is even. We then print that it’s even to the console using the <span class="No-Break"><strong class="source-inline">fmt</strong></span><span class="No-Break"> package:</span><a id="_idTextAnchor426"/><pre class="source-code">
    fmt.Println(input, "is even")</pre></li>				<li>Close the <span class="No-Break">code block:</span><pre class="source-code">
  }</pre></li>				<li>Now do the same for <span class="No-Break">odd number<a id="_idTextAnchor427"/><a id="_idTextAnchor428"/>s:</span><pre class="source-code">
  if input%2 == 1 {
    fmt.Println(input, "is odd")
  }</pre></li>				<li><span class="No-Break">Close </span><span class="No-Break"><strong class="source-inline">main</strong></span><span class="No-Break">:</span><pre class="source-code">
}</pre></li>				<li>Save the<a id="_idIndexMarker126"/> file, and in the new folder, run the following <span class="No-Break">code snippet:</span><pre class="source-code">
go run main.go</pre></li>			</ol>
			<p>The<a id="_idIndexMarker127"/> following is the <span class="No-Break">expected output:</span></p>
			<pre class="console">
5 is odd</pre>			<p>In this exercise, we used logic to run code selectively. Using logic to control which code runs lets you create flows through your code. This allows you to have code that reacts to its data. These flows allow you to be able to reason about what the code is doing with your data, making it easier to understand <span class="No-Break">and maintain.</span></p>
			<p>Try changing the value of the input to 6 to see how the even block gets executed instead of the <span class="No-Break">odd block.</span></p>
			<p>In the next topic, we’ll explore how we can improve this code and make it <span class="No-Break">more effi<a id="_idTextAnchor429"/><a id="_idTextAnchor430"/>cient.</span></p>
			<h2 id="_idParaDest-73"><a id="_idTextAnchor431"/>if else statements</h2>
			<p>In the<a id="_idIndexMarker128"/> previous exercise, we did two evaluations. One evaluation was<a id="_idIndexMarker129"/> to check whether the number was even and the other was to see whether it was odd. As we know, a number can only ever be odd or even. With this knowledge, we can use deduction to know that if a number is not even, then it must <span class="No-Break">be odd.</span></p>
			<p>Using deductive logic such as this is common in programming in order to make programs more efficient by not having to do <span class="No-Break">unnecessary work.</span></p>
			<p>We can represent this kind of logic using an <strong class="source-inline">if else</strong> statement. The notation looks like this: <strong class="source-inline">if &lt;boolean expression&gt; { &lt;code block&gt; } else { &lt;code block&gt; }</strong>. The <strong class="source-inline">if else</strong> statement builds on the <strong class="source-inline">if</strong> statement and gives us a second block. The second block only runs if the first block doesn’t run; both blocks can’t <span class="No-Break">run t<a id="_idTextAnchor432"/><a id="_idTextAnchor433"/>ogether.</span></p>
			<h2 id="_idParaDest-74"><a id="_idTextAnchor434"/>Exercise 2.02 – using an if else statement</h2>
			<p>In this <a id="_idIndexMarker130"/>exercise, we’ll update our previous exercise to use an <strong class="source-inline">if </strong><span class="No-Break"><strong class="source-inline">else</strong></span><span class="No-Break"> statement:</span></p>
			<ol>
				<li>Create a new folder and add a <span class="No-Break"><strong class="source-inline">main.go</strong></span><span class="No-Break"> file.</span></li>
				<li>In <strong class="source-inline">main.go</strong>, add the package <span class="No-Break">and import:</span><pre class="source-code">
package main
import "fmt"</pre></li>				<li>Create a <span class="No-Break"><strong class="source-inline">main</strong></span><span class="No-Break"> function:</span><pre class="source-code">
func main() {</pre></li>				<li>Define an <strong class="source-inline">int</strong> variable with an initial value, and we’ll give it a different value <span class="No-Break">t<a id="_idTextAnchor435"/>his time:</span><pre class="source-code">
  input := 4</pre></li>				<li>Create an <strong class="source-inline">if</strong> statement that uses a modulus expression, and then check whether the result is equa<a id="_idTextAnchor436"/><a id="_idTextAnchor437"/>l <span class="No-Break">to 0:</span><pre class="source-code">
  if input%2 == 0 {
    fmt.Println(input, "is even")</pre></li>				<li>This time, we are not closing the code block but starting a new <strong class="source-inline">else</strong> <span class="No-Break">co<a id="_idTextAnchor438"/><a id="_idTextAnchor439"/>de block:</span><pre class="source-code">
  } else {
    fmt.Println(input, "is odd")
  }</pre></li>				<li><span class="No-Break">Close </span><span class="No-Break"><strong class="source-inline">main</strong></span><span class="No-Break">:</span><pre class="source-code">
}</pre></li>				<li>Save the file, and in the new folder, run the following <span class="No-Break">code snippet:</span><pre class="source-code">
go run main.go</pre></li>			</ol>
			<p>The following is the <span class="No-Break">expected output:</span></p>
			<pre class="console">
4 is even</pre>			<p>In this exercise, we <a id="_idIndexMarker131"/>were able to simplify our previous code by using an <strong class="source-inline">if else</strong> statement. As well as making the code more efficient, it also makes the code easier to understand <span class="No-Break">and maintain.</span></p>
			<p>In the next topic, we’ll demonstrate how we can add as many code blocks as we want while still only letting <span class="No-Break">on<a id="_idTextAnchor440"/><a id="_idTextAnchor441"/>e execute.</span></p>
			<h2 id="_idParaDest-75"><a id="_idTextAnchor442"/>else if statements</h2>
			<p><strong class="source-inline">if else</strong> solves<a id="_idIndexMarker132"/> the problem of running code for only one or<a id="_idIndexMarker133"/> two possible logical outcomes. With that covered, what if our preceding exercise’s code was intended to only work for non-negative numbers? We’d need something that could evaluate more than one Boolean expression but only execute one of the code blocks; that is, the code block for negative numbers, even numbers, or <span class="No-Break">odd numbers.</span></p>
			<p>In that case, we can’t use an <strong class="source-inline">if else</strong> statement on its own; however, we could cover it with another extension to <strong class="source-inline">if</strong> statements. In this extension, you can give the <strong class="source-inline">else</strong> statement its own Boolean expression. This is how the notation looks: <strong class="source-inline">if &lt;boolean expression&gt; { &lt;code block&gt; } else if &lt;boolean expression&gt; { &lt;code block&gt; }</strong>. You can also combine it with a final <strong class="source-inline">else</strong> statement at the end, which would look like this: <strong class="source-inline">if &lt;boolean expression&gt; { &lt;code block&gt; } else if &lt;boolean expression&gt; { &lt;code block&gt; } else { &lt;code block&gt; }</strong>. After the initial <strong class="source-inline">if</strong> statement, you can have as many <strong class="source-inline">else if</strong> statements as you need. Go evaluates Boolean expressions from the top of statements and works its way through each Boolean expression until one results in <strong class="source-inline">true</strong> or it finds an <strong class="source-inline">else</strong> instance. If there is no <strong class="source-inline">else</strong> instance and none of the Boolean expressions results in <strong class="source-inline">true</strong>, then no block is executed and Go moves on. When Go gets a Boolean <strong class="source-inline">true</strong> result, it executes the code block for that statement only, and it then stops evaluating any Boolean expressions of the <span class="No-Break"><strong class="source-inline">i<a id="_idTextAnchor443"/><a id="_idTextAnchor444"/>f</strong></span><span class="No-Break"> statement.</span></p>
			<h2 id="_idParaDest-76"><a id="_idTextAnchor445"/>Exercise 2.03 – using an else if statement</h2>
			<p>In this <a id="_idIndexMarker134"/>exercise, we’ll update our previous exercise. We’re going to add a check for negative numbers. This check must run before the even and odd checks, as only one of the code blocks <span class="No-Break">can run:</span></p>
			<ol>
				<li>Create a new folder and add a <span class="No-Break"><strong class="source-inline">main.go</strong></span><span class="No-Break"> file.</span></li>
				<li>In <strong class="source-inline">main.go</strong>, add the package <span class="No-Break">and import:</span><pre class="source-code">
package main
import "fmt"</pre></li>				<li>Create a <span class="No-Break"><strong class="source-inline">main</strong></span><span class="No-Break"> function:</span><pre class="source-code">
func main() {</pre></li>				<li>Define an <strong class="source-inline">int</strong> variable with an initial value, and we’ll give it a <span class="No-Break">negative value:</span><pre class="source-code">
  input := -10</pre></li>				<li>Our first Boolean expression is to check for negative numbers. If we find a negative number, we’ll print a message saying that they are <span class="No-Break">not allowed:</span><pre class="source-code">
  if in<a id="_idTextAnchor446"/>put &lt; 0 {
    fmt.Println("input can't be a negative number")</pre></li>				<li>We need to move our even check to an <strong class="source-inline">else <a id="_idTextAnchor447"/><a id="_idTextAnchor448"/></strong><span class="No-Break"><strong class="source-inline">if</strong></span><span class="No-Break"> statement:</span><pre class="source-code">
  } else if input%2 == 0 {
    fmt.Println(input, "is even")</pre></li>				<li>The <strong class="source-inline">else</strong> statement stays the same, and we the<a id="_idTextAnchor449"/><a id="_idTextAnchor450"/>n <span class="No-Break">close </span><span class="No-Break"><strong class="source-inline">main</strong></span><span class="No-Break">:</span><pre class="source-code">
  } else {
    fmt.Println(input, "is odd")
  }
}</pre></li>				<li>Save the file, and in the new folder, run the following <span class="No-Break">code snippet:</span><pre class="source-code">
go run main.go</pre></li>			</ol>
			<p>The following is the <span class="No-Break">expected output:</span></p>
			<pre class="console">
input can't be a negative number</pre>			<p>In this exercise, we<a id="_idIndexMarker135"/> added even more complex logic to our <strong class="source-inline">if</strong> statement. We added an <strong class="source-inline">else if</strong> statement to it, which allowed complex evaluation. This addition took what is usually a simple fork in the road that gives you many roads to go down but still with the restriction of only going down one <span class="No-Break">of them.</span></p>
			<p>In the next topic, we’ll use a subtle but powerful feature of <strong class="source-inline">if</strong> statements that lets you keep your code <a id="_idTextAnchor451"/><a id="_idTextAnchor452"/>nice <span class="No-Break">and tidy.</span></p>
			<h2 id="_idParaDest-77"><a id="_idTextAnchor453"/>initial if statements</h2>
			<p>It’s common to <a id="_idIndexMarker136"/>need to <a id="_idIndexMarker137"/>call a function but not care too much about the returned value. Often, you’ll want to check that it executed correctly and then discard the returned value; for example, sending an email, writing to a file, or inserting data into a database: most of the time, if these types of operations execute successfully, you don’t need to worry about the variables they return. Unfortunately, the variables don’t go anywhere as they are still <span class="No-Break">in scope.</span></p>
			<p>To stop these unwanted variables from hanging around, we can use what we know about scope rules to get rid of them. The best way to check for errors is to use <strong class="source-inline">initial</strong> statements on <strong class="source-inline">if</strong> statements. The notation looks like this: <strong class="source-inline">if &lt;initial statement&gt;; &lt;boolean expression&gt; { &lt;code block&gt; }</strong>. The initial statement is in the same section as the Boolean expression, with <strong class="source-inline">;</strong> to <span class="No-Break">divide them.</span></p>
			<p>Go only allows what it calls simple statements in the initial statement section, including <span class="No-Break">the following:</span></p>
			<ul>
				<li>Assignment and short <span class="No-Break">variable assignments:</span><pre class="source-code">
i := 0</pre></li>				<li>Expressions such as math or <span class="No-Break">logic expressions:</span><pre class="source-code">
i = (j * 10) == 40</pre></li>				<li>Sending statements for working with channels, which we’ll cover later in <a href="B18621_17.xhtml#_idTextAnchor1790"><span class="No-Break"><em class="italic">Chapter 17</em></span></a> where we focus <span class="No-Break">on concurrency</span></li>
				<li>Increment and <span class="No-Break">decrement expressions:</span><pre class="source-code">
<strong class="source-inline">i++</strong></pre></li>			</ul>
			<p>A common <a id="_idIndexMarker138"/>mistake is<a id="_idIndexMarker139"/> trying to define a variable using <strong class="source-inline">var</strong>. That’s not allowed; you can use a short assign<a id="_idTextAnchor454"/><a id="_idTextAnchor455"/>ment in <span class="No-Break">its place.</span></p>
			<h2 id="_idParaDest-78"><a id="_idTextAnchor456"/>Exercise 2.04 – implementing initial if statements</h2>
			<p>In this <a id="_idIndexMarker140"/>exercise, we’re going to continue to build on our previous exercises. We’re going to add even more rules about which numbers can be checked as to whether they are odd or even. With so many rules, putting them all in a single Boolean expression is hard to understand. We’ll move all the validation logic to a function that returns an error. This is a built-in Go type used for errors. If the value of the error is <strong class="source-inline">nil</strong>, then everything is okay. If not, you have an error, and you need to deal with it. We’ll call the function in our initial statement and then check <span class="No-Break">for errors:</span></p>
			<ol>
				<li>Create a new folder and add a <span class="No-Break"><strong class="source-inline">main.go</strong></span><span class="No-Break"> file.</span></li>
				<li>In <strong class="source-inline">main.go</strong>, add the pa<a id="_idTextAnchor457"/><a id="_idTextAnchor458"/>ckage <span class="No-Break">and imports:</span><pre class="source-code">
package main
import (
  "errors"
  "fmt"
)</pre></li>				<li>Create a function to do the validation. This function takes a single integer an<a id="_idTextAnchor459"/>d returns <span class="No-Break">an error:</span><pre class="source-code">
func validate(input int) error {</pre></li>				<li>We define some rules, and if any are <strong class="source-inline">true</strong>, we return a new error using the <strong class="source-inline">New</strong> function in th<a id="_idTextAnchor460"/><a id="_idTextAnchor461"/>e <span class="No-Break"><strong class="source-inline">errors</strong></span><span class="No-Break"> package:</span><pre class="source-code">
  if input &lt; 0 {
    return errors.New("input can't be a negative number")
  } else if input &gt; 100 {
    return errors.New("input can't be over 100")
  } else if input%7 == 0 {
    return errors.New("input can't be divisible by 7")</pre></li>				<li>If the<a id="_idIndexMarker141"/> input passes all the<a id="_idTextAnchor462"/><a id="_idTextAnchor463"/> checks, <span class="No-Break">return </span><span class="No-Break"><strong class="source-inline">nil</strong></span><span class="No-Break">:</span><pre class="source-code">
  } else {
    return nil
  }
}</pre></li>				<li>Create our <span class="No-Break"><strong class="source-inline">main</strong></span><span class="No-Break"> function:</span><pre class="source-code">
func main() {</pre></li>				<li>Define a variable w<a id="_idTextAnchor464"/>ith a value <span class="No-Break">of </span><span class="No-Break"><strong class="source-inline">21</strong></span><span class="No-Break">:</span><pre class="source-code">
  input := 21</pre></li>				<li>Call the function using the initial statement; use the short variable assignment to capture the returned error. In the Boolean expression, check that the error is not equa<a id="_idTextAnchor465"/><a id="_idTextAnchor466"/>l to <strong class="source-inline">nil</strong> <span class="No-Break">using </span><span class="No-Break"><strong class="source-inline">!=</strong></span><span class="No-Break">:</span><pre class="source-code">
  if err := validate(input); err != nil {
    fmt.Println(err)
}</pre></li>				<li>The rest is<a id="_idTextAnchor467"/><a id="_idTextAnchor468"/> the same <span class="No-Break">as before:</span><pre class="source-code">
else if input%2 == 0 {
    fmt.Println(input, "is even")
  } else {
    fmt.Println(input, "is odd")
  }
}</pre></li>				<li>Save <a id="_idIndexMarker142"/>the file, and in the new folder, run the following <span class="No-Break">code snippet:</span><pre class="source-code">
go run main.go</pre></li>			</ol>
			<p>The following is the expected output, which displays an <span class="No-Break">error statement:</span></p>
			<pre class="console">
input can't be divisible by 7</pre>			<p>In this exercise, we used an initial statement to define and initialize a variable. That variable can be used in the Boolean expression and the related code block. Once the <strong class="source-inline">if</strong> statement completes, the variable goes out of scope and is reclaimed by Go’s memo<a id="_idTextAnchor469"/><a id="_idTextAnchor470"/><a id="_idTextAnchor471"/><a id="_idTextAnchor472"/>ry <span class="No-Break">management system.</span></p>
			<h1 id="_idParaDest-79"><a id="_idTextAnchor473"/>Expression switch statements</h1>
			<p>While it’s possible<a id="_idIndexMarker143"/> to add as many <strong class="source-inline">else if</strong> statements to an <strong class="source-inline">if</strong> statement as you want, at some point, it’ll get hard <span class="No-Break">to read.</span></p>
			<p>When this happens, you can use Go’s logic alternative: <strong class="source-inline">switch</strong>. For situations where you would need a big <strong class="source-inline">if</strong> statement, <strong class="source-inline">switch</strong> can be a more <span class="No-Break">compact alternative.</span></p>
			<p>The notation for <strong class="source-inline">switch</strong> is shown in the following <span class="No-Break">code snippet:</span></p>
			<pre class="source-code">
switch &lt;initial statement&gt;; &lt;expression&gt; {
case &lt;expression&gt;:
  &lt;statements&gt;
case &lt;expression&gt;, &lt;expression&gt;:
  &lt;statements&gt;
default:
  &lt;statements&gt;
}</pre>			<p>The <em class="italic">initial</em> statement<a id="_idIndexMarker144"/> works the same in <strong class="source-inline">switch</strong> as it does in the preceding <strong class="source-inline">if</strong> statements. The expression is not the same because <strong class="source-inline">if</strong> is a Boolean expression. You can have more than just a Boolean in this expression. The <strong class="source-inline">cases</strong> are where you check to see whether the statements get executed. Statements are like code blocks in <strong class="source-inline">if</strong> statements, but with no need for the curly <span class="No-Break">braces here.</span></p>
			<p>Both the initial statement and expression are optional. To have just the expression, it would look like this: <strong class="source-inline">switch &lt;expression&gt; {…</strong>. To have only the initial statement, you would write <strong class="source-inline">switch &lt;initial statment&gt;; {…</strong>. You can leave them both off, and you’ll end up with <strong class="source-inline">switch {…</strong>. When the expression is missing, it’s as if you put the value of <span class="No-Break"><strong class="source-inline">true</strong></span><span class="No-Break"> there.</span></p>
			<p>There are two main ways of using <strong class="source-inline">case</strong> expressions. They can be used just like <strong class="source-inline">if</strong> statements or Boolean expressions where you use logic to control whether the statements get executed. The alternative is to put a literal value there. In this case, the value is compared to the value in the <strong class="source-inline">switch</strong> expression. If they match, then the statements run. You can have as many case expressions as you want by separating them with <strong class="source-inline">,</strong>. The case expressions get checked from the top case and then from left to right if a case has <span class="No-Break">multiple expressions.</span></p>
			<p>When a case matches, only its statements are run, which is different from many other languages. To get the fall-through behavior found in those languages, a <strong class="source-inline">fallthrough</strong> statement must be added to the end of each case where you want that behavior. If you call <strong class="source-inline">fallthrough</strong> before the end of the case, it will fall through at that moment and move on to the <span class="No-Break">next case.</span></p>
			<p>An optional <strong class="source-inline">default</strong> case can be added anywhere in a <strong class="source-inline">switch</strong> statement, but it’s best practice to add it to the end. The <strong class="source-inline">default</strong> case works just like using an <strong class="source-inline">else</strong> statement in an <span class="No-Break"><strong class="source-inline">if</strong></span><span class="No-Break"> statement.</span></p>
			<p>This form of <strong class="source-inline">switch</strong> statement is called an <em class="italic">expression</em> <strong class="source-inline">switch</strong> statement. There is also another form of <strong class="source-inline">switch</strong> statement, called a <em class="italic">type</em> <strong class="source-inline">switch</strong> statement, which we’l<a id="_idTextAnchor474"/><a id="_idTextAnchor475"/>l look at in <a href="B18621_04.xhtml#_idTextAnchor715"><span class="No-Break"><em class="italic">Chapter 4</em></span></a><span class="No-Break">.</span></p>
			<h2 id="_idParaDest-80"><a id="_idTextAnchor476"/>Exercise 2.05 – using a switch statement</h2>
			<p>In this <a id="_idIndexMarker145"/>exercise, we need to create a program that prints a particular message based on the day someone was born. We are using the <strong class="source-inline">time</strong> package for the set of days of the week constants. We’ll use a <strong class="source-inline">switch</strong> statement to make a more compact <span class="No-Break">logic structure:</span></p>
			<ol>
				<li>Load the <span class="No-Break"><strong class="source-inline">main</strong></span><span class="No-Break"> package:</span><pre class="source-code">
package main</pre></li>				<li>Import the <strong class="source-inline">fmt</strong> and <span class="No-Break"><strong class="source-inline">time</strong></span><span class="No-Break"> packages:</span><pre class="source-code">
import (
  "fmt"
  "time"
)</pre></li>				<li>Define a <span class="No-Break"><strong class="source-inline">main</strong></span><span class="No-Break"> function:</span><pre class="source-code">
func main() {</pre></li>				<li>Define a variable that is the day of the week someone was born. Use the constants from the <strong class="source-inline">time</strong> package to do it. We’ll set it to Monday, bu<a id="_idTextAnchor477"/>t it could be <span class="No-Break">any day:</span><pre class="source-code">
  dayBorn := time.Monday</pre></li>				<li>Create a <strong class="source-inline">switch</strong> statement that uses the var<a id="_idTextAnchor478"/>iable as <span class="No-Break">its expression:</span><pre class="source-code">
  switch dayBorn {</pre></li>				<li>Each <strong class="source-inline">case</strong> expression will try to match its expression value against the <a id="_idTextAnchor479"/><a id="_idTextAnchor480"/><strong class="source-inline">switch</strong> <span class="No-Break">expression value:</span><pre class="source-code">
  case time.Monday:
  fmt.Println("Monday's child is fair of face")
  case time.Tuesday:
  fmt.Println("Tuesday's child is full of grace")
  case time.Wednesday:
  fmt.Println("Wednesday's child is full of woe")
  case time.Thursday:
  fmt.Println("Thursday's child has far to go")
  case time.Friday:
  fmt.Println("Friday's child is loving and giving")
  case time.Saturday:
  fmt.Println("Saturday's child works hard for a living")
  case time.Sunday:
  fmt.Println("Sunday's child is bonny and blithe")</pre></li>				<li>We’ll use <a id="_idIndexMarker146"/>the <strong class="source-inline">default</strong> case here a<a id="_idTextAnchor481"/>s a form <a id="_idTextAnchor482"/><a id="_idTextAnchor483"/><span class="No-Break">of validation:</span><pre class="source-code">
  default:
  fmt.Println("Error, day born not valid")
  }</pre></li>				<li>Close the <span class="No-Break"><strong class="source-inline">main</strong></span><span class="No-Break"> function:</span><pre class="source-code">
}</pre></li>				<li>Save the file, and in the new folder, run the following <span class="No-Break">code snippet:</span><pre class="source-code">
go run main.go</pre></li>			</ol>
			<p>The following is the <span class="No-Break">expected output:</span></p>
			<pre class="console">
Monday's child is fair of face</pre>			<p>In this exercise, we used <strong class="source-inline">switch</strong> to create a compact logic structure that matches lots of different possible values to give a specific message to our users. It’s quite common to see <strong class="source-inline">switch</strong> statements used with a constant as we did here, using the day-of-the-week constants from the <span class="No-Break"><strong class="source-inline">time</strong></span><span class="No-Break"> package.</span></p>
			<p>Next, we’ll use the <strong class="source-inline">case</strong> feature that lets <a id="_idTextAnchor484"/><a id="_idTextAnchor485"/>us match <span class="No-Break">multiple values.</span></p>
			<h2 id="_idParaDest-81"><a id="_idTextAnchor486"/>Exercise 2.06 – switch statements and multiple case values</h2>
			<p>In this <a id="_idIndexMarker147"/>exercise, we’re going to print out a message that tells us whether the day someone was born was a weekday or at the weekend. We only need two cases as each case can support checking <span class="No-Break">multiple values:</span></p>
			<ol>
				<li>Load the <span class="No-Break"><strong class="source-inline">main</strong></span><span class="No-Break"> package:</span><pre class="source-code">
package main</pre></li>				<li>Import the <strong class="source-inline">fmt</strong> and <span class="No-Break"><strong class="source-inline">time</strong></span><span class="No-Break"> packages:</span><pre class="source-code">
import (
  "fmt"
  "time"
)</pre></li>				<li>Define a <span class="No-Break"><strong class="source-inline">main</strong></span><span class="No-Break"> function:</span><pre class="source-code">
func main() {</pre></li>				<li>Define our <strong class="source-inline">dayBorn</strong> variable using one of the <strong class="source-inline">t<a id="_idTextAnchor487"/>ime</strong> <span class="No-Break">package’s constants:</span><pre class="source-code">
  dayBorn := time.Sunday</pre></li>				<li><strong class="source-inline">switch</strong> starts the same by using the v<a id="_idTextAnchor488"/>ariable as <span class="No-Break">the expression:</span><pre class="source-code">
  switch dayBorn {</pre></li>				<li>This time, for <strong class="source-inline">case</strong>, we have weekday constants. Go checks each one against the <strong class="source-inline">switch</strong> expression, starting from the left, and sweeps through each one by one. Once Go gets a match, it stops evaluating and runs the stat<a id="_idTextAnchor489"/><a id="_idTextAnchor490"/>ements for that <span class="No-Break">case only:</span><pre class="source-code">
  case time.Monday, time.Tuesday, time.Wednesday, time.Thursday, time.Friday:
   fmt.Println("Born on a weekday")</pre></li>				<li>Then, it does th<a id="_idTextAnchor491"/><a id="_idTextAnchor492"/>e same for <span class="No-Break">weekend days:</span><pre class="source-code">
  case time.Saturday, time.Sunday:
   fmt.Println("Born on the weekend")</pre></li>				<li>We <a id="_idIndexMarker148"/>use <strong class="source-inline">default</strong> for validation again and clos<a id="_idTextAnchor493"/><a id="_idTextAnchor494"/>e out the <span class="No-Break"><strong class="source-inline">switch</strong></span><span class="No-Break"> statement:</span><pre class="source-code">
  default:
   fmt.Println("Error, day born not valid")
  }</pre></li>				<li>Close the <span class="No-Break"><strong class="source-inline">main</strong></span><span class="No-Break"> function:</span><pre class="source-code">
}</pre></li>				<li>Save the file, and in the new folder, run the following <span class="No-Break">code snippet:</span><pre class="source-code">
go run main.go</pre></li>			</ol>
			<p>The following is the <span class="No-Break">expected output:</span></p>
			<pre class="console">
Born on the weekend</pre>			<p>In this exercise, we used cases with multiple values. This allowed a very compact logic structure that could evaluate 7 days of the week with validation checking in a few lines of code. It makes the intention of the logic clear, which, in turn, makes it easier to change <span class="No-Break">and maintain.</span></p>
			<p>Next, we’ll look at using more complex logic in <span class="No-Break"><strong class="source-inline">case</strong></span><span class="No-Break"> expressions.</span></p>
			<p>Sometimes, you’ll see code that doesn’t evaluate anything in the <strong class="source-inline">switch</strong> statement but does che<a id="_idTextAnchor495"/><a id="_idTextAnchor496"/>cks in the <span class="No-Break"><strong class="source-inline">case</strong></span><span class="No-Break"> expression.</span></p>
			<h2 id="_idParaDest-82"><a id="_idTextAnchor497"/>Exercise 2.07 – expressionless switch statements</h2>
			<p>It’s not <a id="_idIndexMarker149"/>always possible to be able to match values using the value of the <strong class="source-inline">switch</strong> expression. Sometimes, you’ll need to match on multiple variables. Other times, you’ll need to match on something more complicated than an equality check. For example, you may need to check whether a number is in a specific range. In these cases, <strong class="source-inline">switch</strong> is still helpful in building compact logic statements, as <strong class="source-inline">case</strong> allows the same range of expressions that you have in <strong class="source-inline">if</strong> <span class="No-Break">Boolean expressions.</span></p>
			<p>In this exercise, let’s build a simple <strong class="source-inline">switch</strong> expression that checks whether a day is at the weekend to show what can be done <span class="No-Break">in </span><span class="No-Break"><strong class="source-inline">case</strong></span><span class="No-Break">:</span></p>
			<ol>
				<li>Load the <span class="No-Break"><strong class="source-inline">main</strong></span><span class="No-Break"> package:</span><pre class="source-code">
package main</pre></li>				<li>Import the <strong class="source-inline">fmt</strong> and <span class="No-Break"><strong class="source-inline">time</strong></span><span class="No-Break"> packages:</span><pre class="source-code">
import (
  "fmt"
  "time"
)</pre></li>				<li>Define a <span class="No-Break"><strong class="source-inline">main</strong></span><span class="No-Break"> function:</span><pre class="source-code">
func main() {</pre></li>				<li>Our <strong class="source-inline">switch</strong> expression is using the initial statement to define our variable. The expression is left em<a id="_idTextAnchor498"/>pty as we won’t be <span class="No-Break">using it:</span><pre class="source-code">
switch dayBorn := time.Sunday; {</pre></li>				<li><strong class="source-inline">case</strong> is using some complex logic to check whethe<a id="_idTextAnchor499"/><a id="_idTextAnchor500"/>r the day is at <span class="No-Break">the weekend:</span><pre class="source-code">
  case dayBorn == time.Sunday || dayBorn == time.Saturday:
   fmt.Println("Born on the weekend")</pre></li>				<li>Add a <strong class="source-inline">default</strong> statement and <a id="_idTextAnchor501"/><a id="_idTextAnchor502"/>close the <span class="No-Break"><strong class="source-inline">switch</strong></span><span class="No-Break"> expression:</span><pre class="source-code">
  default:
   fmt.Println("Born some other day")
  }</pre></li>				<li>Close the <span class="No-Break"><strong class="source-inline">main</strong></span><span class="No-Break"> function:</span><pre class="source-code">
}</pre></li>				<li>Save the file, and in the new folder, run the following <span class="No-Break">code snippet:</span><pre class="source-code">
go run main.go</pre></li>			</ol>
			<p>The<a id="_idIndexMarker150"/> following is the <span class="No-Break">expected output:</span></p>
			<pre class="console">
Born on the weekend</pre>			<p>In this exercise, we learned that you can use complex logic in a case expression when a simple switch statement match is not enough. This still offers a more compact and easier way to manage a logic statement than if you have more than a couple <span class="No-Break">of cases.</span></p>
			<p>Next, we’ll leave logic structures behind and start to look at ways in which we can run the same statements multiple times to<a id="_idTextAnchor503"/><a id="_idTextAnchor504"/> make <a id="_idTextAnchor505"/>processing <span class="No-Break">data easier.</span></p>
			<h1 id="_idParaDest-83"><a id="_idTextAnchor506"/>Loops</h1>
			<p>In real-world <a id="_idIndexMarker151"/>applications, you’re often going to need to run the same logic repeatedly. It’s common to have to deal with multiple inputs and give multiple outputs. Loops are the simplest way of repeating <span class="No-Break">your logic.</span></p>
			<p>Go only has one looping statement, <strong class="source-inline">for</strong>, but it’s a flexible one. There are two distinct forms: the first is used a lot for ordered collections such as arrays and slices, which we’ll cover more later. The sort of loop used for ordered collections looks <span class="No-Break">as follows:</span></p>
			<pre class="source-code">
for &lt;initial statement&gt;; &lt;condition&gt;; &lt;post statement&gt; {
  &lt;statements&gt;
}</pre>			<p>The <strong class="source-inline">initial</strong> statement is just like the one found in <strong class="source-inline">if</strong> and <strong class="source-inline">switch</strong> statements. An <strong class="source-inline">initial</strong> statement runs before everything else and allows the same simple statements that we defined before. The condition is checked before each loop to see whether the statements should be run or whether the loop should stop. As with an <strong class="source-inline">initial</strong> statement, <strong class="source-inline">condition</strong> also allows simple statements. A <strong class="source-inline">post</strong> statement is run after the statements are run at the end of each loop and allows you to run simple statements. The <strong class="source-inline">post</strong> statement is mostly used for incrementing things such as loop counters, which get evaluated on the next loop by <strong class="source-inline">condition</strong>. The statements are any Go code<a id="_idIndexMarker152"/> you want to run as part of <span class="No-Break">the loop.</span></p>
			<p><strong class="source-inline">initial</strong>, <strong class="source-inline">condition</strong>, and <strong class="source-inline">post</strong> statements are all optional, and it’s possible to write a <strong class="source-inline">for</strong> loop <span class="No-Break">like this:</span></p>
			<pre class="source-code">
for {
  &lt;statements&gt;
}</pre>			<p>This form would result in a loop that would run forever, also known as an infinite loop, unless a <strong class="source-inline">break</strong> statement is used to stop the loop manually. In addition to <strong class="source-inline">break</strong>, there is also a <strong class="source-inline">continue</strong> statement that can be used to skip the remainder of an individual run of a loop but doesn’t stop the <span class="No-Break">whole loop.</span></p>
			<p>Another form a <strong class="source-inline">for</strong> loop can take is when reading from a source of data that returns a Boolean when there is more data to read. Examples of this include when reading from databases, files, command-line inputs, and network sockets. This form looks <span class="No-Break">like this:</span></p>
			<pre class="source-code">
for &lt;condition&gt; {
  &lt;statements&gt;
}</pre>			<p>This form is just a simplified version of the form used to read from an ordered list but without the logic needed to control the loop yourself, as the source you’re using is built to work easily in <span class="No-Break"><strong class="source-inline">for</strong></span><span class="No-Break"> loops.</span></p>
			<p>The other form that a <strong class="source-inline">for</strong> loop takes is when looping over unordered data collections such as maps. We’ll cover what maps are in more detail in a later chapter. When looping over these, you’ll use a <strong class="source-inline">range</strong> statement in your loop. With maps, the form looks <span class="No-Break">like this:</span></p>
			<pre class="source-code">
for &lt;key&gt;, &lt;value&gt; :=<a id="_idTextAnchor507"/><a id="_idTextAnchor508"/> range &lt;map&gt; {
  &lt;statements&gt;
}</pre>			<h2 id="_idParaDest-84"><a id="_idTextAnchor509"/>Exercise 2.08 – using a for i loop</h2>
			<p>In this<a id="_idIndexMarker153"/> exercise, we’ll use the three parts of a <strong class="source-inline">for</strong> loop to create a variable and use a variable in the loop. We’ll be able to see how the variable changes after<a id="_idIndexMarker154"/> each iteration of the loop by printing out its value to <span class="No-Break">the console:</span></p>
			<ol>
				<li>Define a package as <strong class="source-inline">main</strong> and add <span class="No-Break">the import:</span><pre class="source-code">
package main
import "fmt"</pre></li>				<li>Create a <span class="No-Break"><strong class="source-inline">main</strong></span><span class="No-Break"> function:</span><pre class="source-code">
func main() {</pre></li>				<li>Define a <strong class="source-inline">for</strong> loop that defines an <strong class="source-inline">i</strong> variable with an initial value of <strong class="source-inline">0</strong> in the <strong class="source-inline">initial</strong> statement section. In the clause, check that <strong class="source-inline">i</strong> is less than <strong class="source-inline">5</strong>. In the <a id="_idTextAnchor510"/><strong class="source-inline">post</strong> statement, increment <strong class="source-inline">i</strong> <span class="No-Break">by </span><span class="No-Break"><strong class="source-inline">1</strong></span><span class="No-Break">:</span><pre class="source-code">
  for i := 0; i &lt; 5; i++ {</pre></li>				<li>In the body of th<a id="_idTextAnchor511"/>e loop, print out the value <span class="No-Break">of </span><span class="No-Break"><strong class="source-inline">i</strong></span><span class="No-Break">:</span><pre class="source-code">
    fmt.Println(i)</pre></li>				<li>Close <span class="No-Break">the loop:</span><pre class="source-code">
  }</pre></li>				<li><span class="No-Break">Close </span><span class="No-Break"><strong class="source-inline">main</strong></span><span class="No-Break">:</span><pre class="source-code">
}</pre></li>				<li>Save the file, and in the new folder, run the following <span class="No-Break">code snippet:</span><pre class="source-code">
go run main.go</pre></li>			</ol>
			<p>The following is the <span class="No-Break">expected output:</span></p>
			<pre class="console">
0
1
2
3
4</pre>			<p>In this <a id="_idIndexMarker155"/>exercise, we used a variable that only exists in a <strong class="source-inline">for</strong> loop. We set up the variable, checked its value, modified it, and output it. Using a loop such as this is very common <a id="_idIndexMarker156"/>when working with ordered, numerically indexed collections such as arrays and slices. In this instance, we hardcoded the value for when to stop looping; however, when looking over arrays and slices, that value would be determined dynamically from the size of <span class="No-Break">the collection.</span></p>
			<p>Next, we’ll use<a id="_idTextAnchor512"/><a id="_idTextAnchor513"/> a <strong class="source-inline">for i</strong> loop to work with <span class="No-Break">a slice.</span></p>
			<h2 id="_idParaDest-85"><a id="_idTextAnchor514"/>Exercise 2.09 – looping over arrays and slices</h2>
			<p>In <a id="_idIndexMarker157"/>this exercise, we’ll loop over a collection of strings. We’ll be <a id="_idIndexMarker158"/>using a slice, but the loop logic will also be the same set <a id="_idIndexMarker159"/>of arrays. We’ll define a collection; we’ll then create a loop that uses the collection to control when to stop looping and a variable to keep track of where we are in <span class="No-Break">the collection.</span></p>
			<p>The way the index of arrays and slices works means that there are never any gaps in the number, and the first number is always 0. The built-in function, <strong class="source-inline">len</strong>, is used to get the length of any collection. We’ll use it as part of the condition to check when we’ve reached the end of <span class="No-Break">the collection:</span></p>
			<ol>
				<li>Create a new folder and add a <span class="No-Break"><strong class="source-inline">main.go</strong></span><span class="No-Break"> file.</span></li>
				<li>In <strong class="source-inline">main.go</strong>, add the package <span class="No-Break">and import:</span><pre class="source-code">
package main
import "fmt"</pre></li>				<li>Create a <span class="No-Break"><strong class="source-inline">main</strong></span><span class="No-Break"> function:</span><pre class="source-code">
func main() {</pre></li>				<li>Define a variable that is a slice of <a id="_idTextAnchor515"/><em class="italic">strings</em> and initialize it <span class="No-Break">with data:</span><pre class="source-code">
  names := []string{"Jim", "Jane", "Joe", "June"}</pre><p class="list-inset">We will cover <strong class="source-inline">collection</strong> and <strong class="source-inline">string</strong> in more detail in the <span class="No-Break">next chapter.</span></p></li>				<li>The <strong class="source-inline">initial</strong> and <strong class="source-inline">post</strong> statements for the loop are the same as before; the difference is in the <strong class="source-inline">condition</strong> statement, where we use <strong class="source-inline">len</strong> to check whether <a id="_idTextAnchor516"/>we are at the end of <span class="No-Break">the collection:</span><pre class="source-code">
  for i := 0; i &lt; len(names);<a id="_idTextAnchor517"/><a id="_idTextAnchor518"/> i++ {</pre></li>				<li>The <a id="_idIndexMarker160"/>rest is the same <span class="No-Break">as before:</span><pre class="source-code">
    fmt.Println(names[i])
  }
}</pre></li>				<li>Save <a id="_idIndexMarker161"/>the <a id="_idIndexMarker162"/>file, and in the new folder, run the following <span class="No-Break">code snippet:</span><pre class="source-code">
go run main.go</pre></li>			</ol>
			<p>The following <a id="_idTextAnchor519"/><a id="_idTextAnchor520"/>is the <span class="No-Break">expected output:</span></p>
			<pre class="console">
Jim
Jane
Joe
June</pre>			<p>In this exercise, we covered how to iterate over objects via indexing. Now, we will look at alternative ways of looping through objects using a <span class="No-Break"><strong class="source-inline">range</strong></span><span class="No-Break"> loop.</span></p>
			<h2 id="_idParaDest-86"><a id="_idTextAnchor521"/>range loop</h2>
			<p>The <strong class="source-inline">array</strong> and <strong class="source-inline">slice</strong> types <a id="_idIndexMarker163"/>always have the number of an index, and <a id="_idIndexMarker164"/>that number always starts at <strong class="source-inline">0</strong>. The <strong class="source-inline">for i</strong> loop we’ve seen so far is the most common choice you’ll see in real-world code for <span class="No-Break">these types.</span></p>
			<p>The other collection type, <strong class="source-inline">map</strong>, doesn’t give the same guarantee. That means you need to use <strong class="source-inline">range</strong>. You’ll use <strong class="source-inline">range</strong> instead of the <strong class="source-inline">condition</strong> statement of a <strong class="source-inline">for</strong> loop, and, on each loop, <strong class="source-inline">range</strong> yields both a key and a value of an element in the collection, then moves on to the <span class="No-Break">next element.</span></p>
			<p>With a <strong class="source-inline">range</strong> loop, you <a id="_idIndexMarker165"/>don’t need to define a condition to stop the loop as <strong class="source-inline">range</strong> takes <a id="_idIndexMarker166"/>care of that <span class="No-Break">for us.</span></p>
			<p class="callout-heading">Callout map order</p>
			<p class="callout">The order of items is randomized to stop developers from relying on the order of the elements in a map, which means you can use it as a<a id="_idTextAnchor522"/><a id="_idTextAnchor523"/> form of pseudo-data randomization <span class="No-Break">if needed.</span></p>
			<h2 id="_idParaDest-87"><a id="_idTextAnchor524"/>Exercise 2.10 – looping over a map</h2>
			<p>In this<a id="_idIndexMarker167"/> exercise, we’re going to create a <strong class="source-inline">map</strong> type that has a string for<a id="_idIndexMarker168"/> its key and a string for the values. We’ll cover <strong class="source-inline">map</strong> types in more detail in a later chapter, so don’t worry if you don’t quite get what <strong class="source-inline">map</strong> types are yet. We’ll then use <strong class="source-inline">range</strong> in the <strong class="source-inline">for</strong> loop to iterate over the map. We’ll then write out the key and value data to <span class="No-Break">the console:</span></p>
			<ol>
				<li>Create a new folder and add a <span class="No-Break"><strong class="source-inline">main.go</strong></span><span class="No-Break"> file.</span></li>
				<li>In <strong class="source-inline">main.go</strong>, add the package <span class="No-Break">and import:</span><pre class="source-code">
package main
import "fmt"</pre></li>				<li>Create a <span class="No-Break"><strong class="source-inline">main</strong></span><span class="No-Break"> function:</span><pre class="source-code">
func main() {</pre></li>				<li>Define a <strong class="source-inline">map</strong> type with a <strong class="source-inline">string</strong> key and a <strong class="source-inline">string</strong> value of the <strong class="source-inline">st<a id="_idTextAnchor525"/><a id="_idTextAnchor526"/>rings</strong> variable and initialize it with <span class="No-Break">the data:</span><pre class="source-code">
  config := map[string]string{
   "debug":  "1",
   "logLevel": "warn",
   "version": "1.2.1",
  }</pre></li>				<li>Use <strong class="source-inline">range</strong> to get the <strong class="source-inline">key</strong> and <strong class="source-inline">value</strong> variables for<a id="_idTextAnchor527"/> a<a id="_idTextAnchor528"/>n array element and assign them <span class="No-Break">to variables:</span><pre class="source-code">
  for key, value := range co<a id="_idTextAnchor529"/>nfig {</pre></li>				<li>Print out the <strong class="source-inline">key</strong> and <span class="No-Break"><strong class="source-inline">value</strong></span><span class="No-Break"> variables:</span><pre class="source-code">
  fmt.Println(key, "=", value)</pre></li>				<li>Close the loop <span class="No-Break">and </span><span class="No-Break"><strong class="source-inline">main</strong></span><span class="No-Break">:</span><pre class="source-code">
  }
}</pre></li>				<li>Save<a id="_idIndexMarker169"/> the file, and in the new folder, run the following <span class="No-Break">code snippet:</span><pre class="source-code">
go run main.go</pre></li>			</ol>
			<p>The following<a id="_idIndexMarker170"/> is the expected output, displaying a map that has a string for its key and a string for <span class="No-Break">the values:</span></p>
			<pre class="console">
debug = 1
logLevel = warn
version = 1.2.1</pre>			<p>In this exercise, we used <strong class="source-inline">range</strong> in a <strong class="source-inline">for</strong> loop to allow us to read out all the data from a <strong class="source-inline">map</strong> collection. <strong class="source-inline">map</strong> types don’t give guarantees like arrays and slices do about starting at zero and having no gaps had we used an integer for the map keys. <strong class="source-inline">range</strong> also controls when to stop <span class="No-Break">a loop.</span></p>
			<p>If you don’t need the <strong class="source-inline">key</strong> or the <strong class="source-inline">value</strong> variable, you can use <strong class="source-inline">_</strong> as the vari<a id="_idTextAnchor530"/>a<a id="_idTextAnchor531"/>ble name to tell the compiler you don’t <span class="No-Break">want it.</span></p>
			<h2 id="_idParaDest-88"><a id="_idTextAnchor532"/>Activity 2.01 – looping over map data using range</h2>
			<p>Suppose you <a id="_idIndexMarker171"/>have been provided with the data in the following table. You have to find the word with the maximum count and print<a id="_idTextAnchor533"/> the word and its count using the <span class="No-Break">following data:</span></p>
			<div>
				<div id="_idContainer031" class="IMG---Figure">
					<img src="image/B18621_02_1.jpg" alt="Figure 2.1: Word and count data to perform the activity" width="866" height="363"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.1: Word and count data to perform the activity</p>
			<p class="callout-heading">Note</p>
			<p class="callout">The preceding words are from the song <em class="italic">Never Gonna Give You Up</em>, sung by <span class="No-Break">Rick Astley<a id="_idTextAnchor534"/><a id="_idTextAnchor535"/>.</span></p>
			<p>The steps<a id="_idIndexMarker172"/> to solve the activity are <span class="No-Break">as follows:</span></p>
			<ol>
				<li>Put the words into a map <span class="No-Break">like this:</span><pre class="source-code">
  words := map[string]int{
   "Gonna": 3,
   "You": 3,
   "Give": 2,
   "Never": 1,
   "Up":  4,
  }</pre></li>				<li>Create a loop and use <strong class="source-inline">range</strong> to capture the word and <span class="No-Break">the count.</span></li>
				<li>Keep track of the word with the highest count using a variable for what the highest count is and its <span class="No-Break">associated word.</span></li>
				<li>Print the <span class="No-Break">variables out.</span></li>
			</ol>
			<p>The following is the expected output, displaying the most popular word with its <span class="No-Break">count value:</span></p>
			<pre class="console">
Most popular word: Up
With a count of: 4</pre>			<p class="callout-heading">Note</p>
			<p class="callout">The solution for this activity can be found in the GitHub repository folder for this <span class="No-Break">chapter: </span><a href="https://github.com/PacktPublishing/Go-Programming-From-Beginner-to-Professional-Second-Edition-/tree/main/Chapter02/Activity02.01"><span class="No-Break">https://github.com/PacktPublishing/Go-Programming-From-Beginner-to-Professional-Second-Edition-/tree/main/Chapter02/Activity02.01</span></a></p>
			<h2 id="_idParaDest-89"><a id="_idTextAnchor536"/>Activity 2.02 – implementing FizzBuzz</h2>
			<p>When <a id="_idIndexMarker173"/>interviewing for a programming job, you’ll be asked to do some coding exercises. These questions have you writing something from scratch<a id="_idIndexMarker174"/> and will have several rules to follow. To give you an idea of what that looks like, we’ll run you through a classic <span class="No-Break">one, </span><span class="No-Break"><em class="italic">FizzBuzz</em></span><span class="No-Break">.</span></p>
			<p>The rules are <span class="No-Break">as follows:</span></p>
			<ul>
				<li>Write a program that prints out the numbers from 1 <span class="No-Break">to 100</span></li>
				<li>If the number is a multiple of 3, <span class="No-Break">print “Fizz”</span></li>
				<li>If the number is a multiple of 5, <span class="No-Break">print “Buzz”</span></li>
				<li>If the number is a multiple of 3 and 5, <span class="No-Break">print “FizzBuzz”</span></li>
			</ul>
			<p>Here are <span class="No-Break">some tips:</span></p>
			<ul>
				<li>You can convert a number to a string <span class="No-Break">using </span><span class="No-Break"><strong class="source-inline">strconv.Itoa()</strong></span></li>
				<li>The first number to evaluate must be 1, and the last number to evaluate must <span class="No-Break">be 100</span></li>
			</ul>
			<p>These steps will help you to complete <span class="No-Break">the activity:</span></p>
			<ol>
				<li>Create a loop that does <span class="No-Break">100 iterations.</span></li>
				<li>Have a variable that keeps count of the number of loops <span class="No-Break">so far.</span></li>
				<li>In the loop, use that count and check whether it’s divisible by 3 or 5 <span class="No-Break">using </span><span class="No-Break"><strong class="source-inline">%</strong></span><span class="No-Break">.</span></li>
				<li>Think carefully about how you’ll deal with the “<span class="No-Break">FizzBuzz” case.</span></li>
			</ol>
			<p>The following screenshot shows the <span class="No-Break">expected output:</span></p>
			<p class="callout-heading">Note</p>
			<p class="callout">Considering that the output is too big to be displayed here, only a part of it will be visible in <span class="No-Break"><em class="italic">Figure 2</em></span><span class="No-Break"><em class="italic">.2</em></span><span class="No-Break">.</span></p>
			<div>
				<div id="_idContainer032" class="IMG---Figure">
					<img src="image/B18621_02_2.jpg" alt="Figure 2.2: The FizzBuzz output" width="751" height="1030"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.2: The FizzBuzz output</p>
			<p class="callout-heading">Note</p>
			<p class="callout">The solution for this activity can be found in the GitHub repository folder for this <span class="No-Break">chapter: </span><a href="https://github.com/PacktPublishing/Go-Programming-From-Beginner-to-Professional-Second-Edition-/tree/main/Chapter02/Activity02.02"><span class="No-Break">https://github.com/PacktPublishing/Go-Programming-From-Beginner-to-Professional-Second-Edition-/tree/main/Chapter02/Activity02.02</span></a></p>
			<p>This <a id="_idIndexMarker175"/>activity<a id="_idIndexMarker176"/> can show you how <strong class="source-inline">switch</strong> statements can improve upon and tame <strong class="source-inline">if else</strong> statements that start to get <span class="No-Break">too big.</span></p>
			<p>Next, we’ll look at how we can take manual control o<a id="_idTextAnchor537"/><a id="_idTextAnchor538"/>f a loop by skipping iterations or stopping <span class="No-Break">the loop.</span></p>
			<h1 id="_idParaDest-90"><a id="_idTextAnchor539"/>break and continue</h1>
			<p>There are going to be times when you need to skip a single loop or stop a loop from running altogether. It’s possible to do this with variables and <strong class="source-inline">if</strong> statements, but there is an <span class="No-Break">easier way.</span></p>
			<p>The <strong class="source-inline">continue</strong> keyword <a id="_idIndexMarker177"/>stops the execution of the current loop and starts a new loop. The <strong class="source-inline">post</strong> loop logic runs, and the loop <strong class="source-inline">condition</strong> statement <span class="No-Break">gets evaluated.</span></p>
			<p>The <strong class="source-inline">break</strong> keyword also <a id="_idIndexMarker178"/>stops the execution of the current loop and stops any new loops <span class="No-Break">from running.</span></p>
			<p>Use <strong class="source-inline">continue</strong> when you want to skip a single item in a collection; for instance, perhaps it’s okay if one of the items in a collection is invalid, but the rest may be okay to process. Use <strong class="source-inline">break</strong> when you need to stop processing when there are any errors in the data and there’s no value in processing the rest of <span class="No-Break">the collection.</span></p>
			<p>Here, we have an example that generates a random number between <strong class="source-inline">0</strong> and <strong class="source-inline">8</strong>. The loop skips on a number divisible by <strong class="source-inline">3</strong> and stops on a number divisible by <strong class="source-inline">2</strong>. It also prints out the <strong class="source-inline">i</strong> variable for each loop to help us see that <strong class="source-inline">continue</strong> and <strong class="source-inline">br<a id="_idTextAnchor540"/><a id="_idTextAnchor541"/>eak</strong> are stopping the execution of the rest of <span class="No-Break">the loop.</span></p>
			<h2 id="_idParaDest-91"><a id="_idTextAnchor542"/>Exercise 2.11 – using break and continue to control loops</h2>
			<p>In this<a id="_idIndexMarker179"/> exercise, we’ll use <strong class="source-inline">continue</strong> and <strong class="source-inline">break</strong> in a loop to show you how you can take control of it. We’re going to create a loop that keeps <a id="_idIndexMarker180"/>going forever. This means we have to stop it with <strong class="source-inline">break</strong> manually. We’ll also randomly skip loops with <strong class="source-inline">continue</strong>. We’ll do this skipping by generating a random number, and if that number is divisible by 3, we’ll skip the rest of <span class="No-Break">the loop:</span></p>
			<ol>
				<li>Create a new folder and add a <span class="No-Break"><strong class="source-inline">main.go</strong></span><span class="No-Break"> file.</span></li>
				<li>In <strong class="source-inline">main.go</strong>, add the package <span class="No-Break">and imports:</span><pre class="source-code">
package main
import (
  "fmt"
  "math/rand"
)</pre></li>				<li>Create a <span class="No-Break"><strong class="source-inline">main</strong></span><span class="No-Break"> function:</span><pre class="source-code">
func main() {</pre></li>				<li>Create <a id="_idIndexMarker181"/>an empty <strong class="source-inline">for</strong> loop. This will loop forever if you don’t <span class="No-Break">stop it:</span><pre class="source-code">
  for {</pre></li>				<li>Use <strong class="source-inline">Intn</strong> from the <strong class="source-inline">rand</strong> package to pick a random number between 0 <span class="No-Break">and 8:</span><pre class="source-code">
    r := rand.Intn(8)</pre></li>				<li>If the<a id="_idIndexMarker182"/> random number is divisible by 3, print <strong class="source-inline">"Skip"</strong> and skip t<a id="_idTextAnchor543"/><a id="_idTextAnchor544"/>he rest of the loop <span class="No-Break">using </span><span class="No-Break"><strong class="source-inline">continue</strong></span><span class="No-Break">:</span><pre class="source-code">
    if r%3 == 0 {
      fmt.Println("Skip")
      continue</pre></li>				<li>If the random number is divis<a id="_idTextAnchor545"/><a id="_idTextAnchor546"/>ible by 2, then print <strong class="source-inline">"Stop"</strong> and stop the loop <span class="No-Break">using </span><span class="No-Break"><strong class="source-inline">break</strong></span><span class="No-Break">:</span><pre class="source-code">
    } else if r%2 == 0 {
      fmt.Println("Stop")
      break
    }</pre></li>				<li>If the number is neither of those things, then print <span class="No-Break">the number:</span><pre class="source-code">
    fmt.Println(r)</pre></li>				<li>Close the loop <span class="No-Break">and </span><span class="No-Break"><strong class="source-inline">main</strong></span><span class="No-Break">:</span><pre class="source-code">
  }
}</pre></li>				<li>Save <a id="_idIndexMarker183"/>the file, and in the new folder, run the following <span class="No-Break">code snippet:</span><pre class="source-code">
go run main.go</pre></li>			</ol>
			<p>The following is<a id="_idIndexMarker184"/> the expected output displaying random numbers, <strong class="source-inline">Skip</strong>, <span class="No-Break">and </span><span class="No-Break"><strong class="source-inline">Stop</strong></span><span class="No-Break">:</span></p>
			<pre class="console">
1
7
7
Skip
1
Skip
1
Stop</pre>			<p>In this exercise, we created a <strong class="source-inline">for</strong> loop that would loop forever, and we then used <strong class="source-inline">continue</strong> and <strong class="source-inline">break</strong> to override normal loop behavior to take control of it ourselves. The ability to do this can allow us to reduce the number of nested <strong class="source-inline">if</strong> statements and variables needed to prevent logic from running when it shouldn’t. Using <strong class="source-inline">break</strong> and <strong class="source-inline">continue</strong> helps to clean up your code and make it easier to <span class="No-Break">work on.</span></p>
			<p>If you use an empty <strong class="source-inline">for</strong> loop like this, the loop continues forever, and you must use <strong class="source-inline">break</strong> to prevent an infinite loop. An infinite loop is a loop in your code that never stops. Once you get an infinite loop, you’ll need a way to kill your application; how you do that will depend on your operating system. If you are running your app in a terminal, closing the terminal normally does the trick. Don’t panic – it happens to us all – your system may slow down, but it won’t do it <span class="No-Break">any harm.</span></p>
			<p>Next, we’ll work on some activit<a id="_idTextAnchor547"/><a id="_idTextAnchor548"/>ies to test out all your ne<a id="_idTextAnchor549"/>w knowledge about logic <span class="No-Break">and loops.</span></p>
			<h2 id="_idParaDest-92"><a id="_idTextAnchor550"/>Activity 2.03 – bubble sort</h2>
			<p>In this activity, we’ll <a id="_idIndexMarker185"/>sort a given slice of numbers by swapping the values. This sorting technique is known as the <em class="italic">bubble sort</em> technique. Go has built-in sorting algorithms in the <strong class="source-inline">sort</strong> package but we don’t want you to use them; we want you to us<a id="_idTextAnchor551"/><a id="_idTextAnchor552"/>e the logic and loops you’ve <span class="No-Break">just learned.</span></p>
			<p>Here are <span class="No-Break">the steps:</span></p>
			<ol>
				<li>Define a slice with unsorted numbers <span class="No-Break">in it.</span></li>
				<li>Print this slice to <span class="No-Break">the console.</span></li>
				<li>Sort the values <span class="No-Break">using swapping.</span></li>
				<li>Once done, print the now sorted numbers to <span class="No-Break">the console.</span></li>
			</ol>
			<p>And here are <span class="No-Break">some tips:</span></p>
			<ul>
				<li>You can do an in-place swap in Go <span class="No-Break">like this:</span><pre class="source-code">
nums[i], nums[i-1] = nums[i-1], nums[i]</pre></li>				<li>You can create a new slice with <span class="No-Break">this code:</span><pre class="source-code">
var nums2 []int</pre></li>				<li>You can add to the end of a slice <span class="No-Break">like so:</span><pre class="source-code">
nums2 = append(nums2, 1)</pre></li>			</ul>
			<p>The following is the <span class="No-Break">expected output:</span></p>
			<pre class="console">
Before: [5, 8, 2, 4, 0, 1, 3, 7, 9, 6]
After : [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</pre>			<p class="callout-heading">Note</p>
			<p class="callout">The solution for this activity can be found in the GitHub repository folder for this <span class="No-Break">chapter: </span><a href="https://github.com/PacktPublishing/Go-Programming-From-Beginner-to-Professional-Second-Edition-/tree/main/Chapter02/Activity02.03"><span class="No-Break">https://github.com/PacktPublishing/Go-Programming-From-Beginner-to-Professional-Second-Edition-/tree/main/Chapter02/Activity02.03</span></a></p>
			<h1 id="_idParaDest-93"><a id="_idTextAnchor553"/>goto statements</h1>
			<p>There may <a id="_idIndexMarker186"/>come a time when you want to skip certain logic within a function and go to a certain location within the function using the <strong class="source-inline">goto</strong> keyword. This may be accomplished using a label within the function and will result in a compilation error if attempting to use the <strong class="source-inline">goto</strong> label outside of the <span class="No-Break">function scope.</span></p>
			<p><strong class="source-inline">goto</strong> statements are a way of adapting the Go control flow; however, they need to be used with caution as they can lead to difficulties in understanding function control flow and decrease code readability if used improperly. <strong class="source-inline">goto</strong> statements are used within the Go standard library in some cases, such as the <strong class="source-inline">math</strong> package, to make logic easier to read and reduce the need for <span class="No-Break">unnecessary variables.</span></p>
			<h2 id="_idParaDest-94"><a id="_idTextAnchor554"/>Exercise 2.12 – using goto statements</h2>
			<p>In this <a id="_idIndexMarker187"/>exercise, we’ll use <strong class="source-inline">goto</strong> in a function to show you how you can take control of it. We’re going to create a loop that keeps looping forever. This means we will have to stop it and exit manually under certain custom criteria. As with the previous exercise, we’ll be generating a random number, and if that number is divisible by 2, we’ll terminate the flow and go to our <span class="No-Break">labeled statement:</span></p>
			<ol>
				<li>Create a new folder and add a <span class="No-Break"><strong class="source-inline">main.go</strong></span><span class="No-Break"> file.</span></li>
				<li>In <strong class="source-inline">main.go</strong>, add the package <span class="No-Break">and imports:</span><pre class="source-code">
package main
import (
  "fmt"
  "math/rand"
)</pre></li>				<li>Create a <span class="No-Break"><strong class="source-inline">main</strong></span><span class="No-Break"> function:</span><pre class="source-code">
func main() {</pre></li>				<li>Create an empty <strong class="source-inline">for</strong> loop. This will loop forever if you don’t <span class="No-Break">stop it:</span><pre class="source-code">
  for {</pre></li>				<li>Use <strong class="source-inline">Intn</strong> fr<a id="_idTextAnchor555"/>om the <strong class="source-inline">rand</strong> package to pick a random number between 0 <span class="No-Break">and 8:</span><pre class="source-code">
    r := rand.Intn(8)</pre></li>				<li>If the<a id="_idIndexMarker188"/> random number is divisible<a id="_idTextAnchor556"/><a id="_idTextAnchor557"/> by 3, print <strong class="source-inline">"Skip"</strong> and skip the rest of the loop <span class="No-Break">using </span><span class="No-Break"><strong class="source-inline">continue</strong></span><span class="No-Break">:</span><pre class="source-code">
    if r%3 == 0 {
      fmt.Println("Skip")
      continue</pre></li>				<li>If the random number is divisible by 2, then print <strong class="source-inline">"Stop"</strong> and stop the loop us<a id="_idTextAnchor558"/><a id="_idTextAnchor559"/>ing the <strong class="source-inline">goto</strong> keyword with the <strong class="source-inline">STOP</strong> custom-defined label to <span class="No-Break">go to:</span><pre class="source-code">
    } else if r%2 == 0 {
      fmt.Println("Stop")
      goto STOP
    }</pre></li>				<li>If <a id="_idTextAnchor560"/>the number is neither of those things, then print <span class="No-Break">the number:</span><pre class="source-code">
    fmt.Println(r)</pre></li>				<li>Close <span class="No-Break">the loop:</span><pre class="source-code">
  }<a id="_idTextAnchor561"/><a id="_idTextAnchor562"/></pre><p class="list-inset">Define a <strong class="source-inline">goto</strong> label named <strong class="source-inline">STOP</strong>, then print <strong class="source-inline">"goto </strong><span class="No-Break"><strong class="source-inline">label reached"</strong></span><span class="No-Break">:</span></p><pre class="source-code">STOP:
        fmt.Println("Goto label reached")
        // Close <strong class="source-inline">main function</strong>
}</pre></li>				<li>Save the file, and in the new folder, run the following <span class="No-Break">code snippet:</span><pre class="source-code">
go run main.go</pre></li>			</ol>
			<p>The following is the expected output displaying random numbers, <strong class="source-inline">Skip</strong>, <span class="No-Break">and </span><span class="No-Break"><strong class="source-inline">Stop</strong></span><span class="No-Break">:</span></p>
			<pre class="console">
1
7
7
Skip
1
Skip
1
Stop
Goto label reached</pre>			<p>In this exercise, we <a id="_idIndexMarker189"/>created a <strong class="source-inline">for</strong> loop that would loop forever, and we then used <strong class="source-inline">goto</strong> to override normal loop behavior to take control of it ourselves and terminate the forever loop under certain criteria. The ability to do this can allow us to adapt a control flow to suit our needs. Using <strong class="source-inline">goto</strong> in the case of this example is not difficult to understand the change in function logic to “go to” other areas of the function logic; however, in more complicated examples, <strong class="source-inline">goto</strong> can lead to challenges with <span class="No-Break">code readabil<a id="_idTextAnchor563"/><a id="_idTextAnchor564"/>ity.</span></p>
			<p>Next, we’ll summarize what we have l<a id="_idTextAnchor565"/>earned from <span class="No-Break">this chapter.</span></p>
			<h1 id="_idParaDest-95"><a id="_idTextAnchor566"/>Summary</h1>
			<p>In this chapter, we discussed logic and loops. These are the foundational building blocks to build complex software. They allow you to have data flow through your code. They let you deal with collections of data by letting you execute the same logic on every element of <span class="No-Break">the data.</span></p>
			<p>Being able to define the rules and laws of your code is the starting point of codifying the real world in software. If you are creating banking software and the bank has rules about what you can and can’t do with money, then you can also define those rules in <span class="No-Break">your code.</span></p>
			<p>Logic and loops are essential tools that you’ll use to build all <span class="No-Break">your software.</span></p>
			<p>In the next chapter, <a id="_idTextAnchor567"/>we’ll look at Go’s type system and the core types it <span class="No-Break">has available.</span></p>
		</div>
	</div></div></body></html>