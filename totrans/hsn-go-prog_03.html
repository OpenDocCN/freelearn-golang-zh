<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">Type Conversions</h1>
                </header>
            
            <article>
                
<p class="mce-root">Converting types from one to the other is a very common operation during daily programming activities, and therefore knowing how to do so is very important. In this chapter, we will go through some practical examples to learn how to convert one type into another effortlessly.</p>
<p class="mce-root">We will cover the following topics in this chapter:</p>
<ul>
<li>Trimming spaces from the beginning and end of strings</li>
<li>Extracting substrings from string values</li>
<li>Replacing parts of a string</li>
<li>Escaping characters in strings</li>
<li>Capitalizing string values</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Converting a Boolean into a String</h1>
                </header>
            
            <article>
                
<p class="mce-root">We're going to start off with learning how to convert a <kbd>Boolean</kbd> value into a <kbd>String</kbd> value:</p>
<ol>
<li class="mce-root">In our editor, after creating a new file, <kbd>main.go</kbd>, and the <kbd>main</kbd> function, as always, let's consider a variable called <kbd>isNew</kbd>, which is a Boolean. Hence the value will be <kbd>true</kbd>.</li>
</ol>
<p> </p>
<ol start="2">
<li class="mce-root">So, let's say that we want to print it out to our console with a message. Check the following screenshot:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-698 image-border" src="assets/2a36f4ec-b575-4739-9391-88b78d5af789.png" style="width:44.42em;height:13.17em;"/></p>
<p class="mce-root" style="padding-left: 60px"><span>As you can see, we encounter a compile-time error. Thus, you cannot use the <kbd>+</kbd> operator and </span><span>we need to convert the <kbd>isNew</kbd> Boolean value to its string representation.</span></p>
<ol start="3">
<li class="mce-root">Let's u<span>se the <kbd>stringconvert</kbd> package, which has various string conversion functions, of which, we're going to use <kbd>FormatBool</kbd>.</span></li>
<li class="mce-root"><span>Taking a <kbd>Boolean</kbd> value returns every string representation of it, and in this case, it's <kbd>isNew</kbd>. If you look at the signature, you'll see that it returns true or false based on the value of the Boolean value passed:</span></li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-699 image-border" src="assets/4f96132a-3597-4cc1-babf-3aaab03d088c.png" style="width:39.58em;height:20.33em;"/></p>
<ol start="5">
<li class="mce-root">So, let<span>'s add <kbd>isNewStr</kbd>, run it and check the output:</span></li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-700 image-border" src="assets/31306e10-e0bd-45eb-9e23-3bc257ac874e.png" style="width:50.33em;height:15.58em;"/></p>
<p class="mce-root" style="padding-left: 60px"><span>There is another way of printing such values to the console and it is called <kbd>Printf</kbd>. It can actually format various types to the console. For instance, we can use the special characters that we went over previously.</span></p>
<div class="mce-root packt_infobox"><span>Note that we won't use <kbd>isNewStr</kbd> for <kbd>Printf</kbd> because now we can use any type and it will find a default representation to string.</span></div>
<ol start="6">
<li class="mce-root">Moreo<span>ver, Go does not accept unused variables and unused packages, and hence, we are going to comment </span><kbd>isNewStr := strconv.FormatBool(isNew)</kbd><span> out and remove <kbd>isNewStr</kbd> too. Now, we can run the following code:</span></li>
</ol>
<pre style="padding-left: 60px">package main<br/>import (<br/>  "fmt"<br/>)<br/>func main(){<br/>  isNew := true<br/>  // isNewStr := strconv.FormatBool(isNew)<br/>  message := "Purchased item is "<br/>  fmt.Printf("%s %v", message, isNew)<br/>}</pre>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mceNonEditable"/>
<ol start="7">
<li class="mce-root">The fol<span>lowing output is obtained:</span></li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-701 image-border" src="assets/0c29abd4-91fa-4719-b8da-074263400aec.png" style="width:27.08em;height:16.58em;"/></p>
<ol start="8">
<li class="mce-root">Now, w<span>e get the same message as before, and that is how you can easily convert a <kbd>Boolean</kbd> type to a <kbd>String</kbd>.</span></li>
</ol>
<p class="mce-root"><span>In the next section, we're going to see how to convert integer and float values into a string.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Converting integer and float values into a string</h1>
                </header>
            
            <article>
                
<p>In this section, we're going to learn how to convert integer and float values into string values. At first, this may seem a little complex, but after this section you will feel comfortable enough to work with those conversions. So let's go back to our editor and see how we can do it.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Converting an integer value into a string value</h1>
                </header>
            
            <article>
                
<p>Let's start with converting an integer value into a string value:</p>
<ol>
<li>Under the string conversion package, which is <kbd>strconv</kbd>, we have a bunch of functions that we can use for these conversions; one of these functions is <kbd>FormatInt</kbd>.</li>
<li>So let's go ahead and use base 10. You can have different bases, such as 16, 10, and 24.</li>
<li>If you look at the signature, you'll see that it returns a string.</li>
<li>Now, the code will not work exactly the way we want, but we're going to see why and we're going to fix it. The following output is obtained when you run the code that has been previously described:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-702 image-border" src="assets/9d422335-6dc0-4b37-bb25-fbb001f9bf1c.png" style="width:103.42em;height:55.17em;"/></p>
<ol start="5">
<li>Now, we know that it accepts integer type 64; let's modify the code and run it again to obtain an output as follows:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-703 image-border" src="assets/6070c681-1066-4311-a206-99eb0050f9e8.png" style="width:96.67em;height:55.25em;"/></p>
<ol start="6">
<li>We get <kbd>100</kbd> as a string value back to our console. You may not want to do this all the time, and hence here's the code that you can run: </li>
</ol>
<pre style="padding-left: 60px">package main<br/>import (<br/>  "strconv"<br/>  "fmt"<br/>)<br/>func main(){<br/>  number := 100<br/>  numberStr := strconv.Itoa(number)<br/>  fmt.Println(numberStr)<br/>}</pre>
<ol start="7">
<li>We have used a different function that automatically converts integers to ASCII. On running the code, we obtain the following output:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-704 image-border" src="assets/6257ebe3-8da2-41da-96e5-1a5d0fc65b4b.png" style="width:21.50em;height:13.58em;"/></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Converting a float value into a string value</h1>
                </header>
            
            <article>
                
<p>Let's move on to the second conversion, which is turning a float value into a string value:</p>
<ol>
<li>Herein, we will have another number for <kbd>numberFloat</kbd>, for instance <kbd>23445221.1223</kbd>, and we will learn to convert this into a shrink value.</li>
<li>We will consider another function, which is <kbd>FormatFloat</kbd>.</li>
<li>So, let's go ahead and look at the signature:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-705 image-border" src="assets/10f21884-0e44-4085-9269-2327420941ea.png" style="width:106.33em;height:55.42em;"/></p>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mceNonEditable"/>
<ol start="4">
<li>The first thing that it expects us to do is pass a float <kbd>64</kbd>, (we have float <kbd>32</kbd> as well); they are <kbd>bitSizes</kbd> and represent how big the float can be. We have the format (<kbd>fmt</kbd>) for which we can use various letters, such as <em>E</em>, <em>F</em>, or <em>G;</em> for instance, <em>G</em> is for large exponents, and <em>F</em> is for no exponent. We have precision, which basically tells us how far we want to go with using the numbers after the dot, and the bit size is float <kbd>32</kbd> or float <kbd>64</kbd>. We can add all of these entities according to the requirements of the situation. Hence, you can run the following code:</li>
</ol>
<pre class="mce-root" style="padding-left: 60px"><span>package main</span><br/>import (<br/> "strconv"<br/> "fmt"<br/>)<br/>func main(){<br/> number := 100<br/> numberStr := strconv.Itoa(number)<br/> fmt.Println(numberStr)<br/> numberFloat := 23445221.1223356<br/> numberFloatStr := strconv.FormatFloat(numberFloat, 'f', 5, 64 )<br/> fmt.Println(numberFloatStr)<br/>}</pre>
<ol start="5">
<li>The output of the preceding code will be as follows:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-706 image-border" src="assets/fe413dfc-1525-4d59-b22c-6982f974ae04.png" style="width:22.08em;height:14.25em;"/></p>
<ol start="6">
<li>Let's play with the precision a little bit more; if we change it to <kbd>3</kbd>, you'll get the following output:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-707 image-border" src="assets/2708bbac-f0b8-405c-80b9-b3efb9d4a79b.png" style="width:25.67em;height:16.25em;"/></p>
<ol start="7">
<li>The output only shows three characters or three numbers after the dot. If you don't know exactly how many digits are required after the dot, you can set the precision as <kbd>-1</kbd> and the output will display all of the digits after the dot; for example, check the following code:</li>
</ol>
<pre style="padding-left: 60px">package main<br/>import (<br/>  "strconv"<br/>  "fmt"<br/>)<br/>func main(){<br/>  number := 100<br/>  numberStr := strconv.Itoa(number)<br/>  fmt.Println(numberStr)<br/>  numberFloat := 23445221.1223356<br/>  numberFloatStr := strconv.FormatFloat(numberFloat, 'f',-1,64 )<br/>  fmt.Println(numberFloatStr)<br/>}</pre>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mceNonEditable"/>
<ol start="8">
<li>The preceding code will give us the following output:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-708 image-border" src="assets/02dec563-88af-4cdb-af5d-5d004f37e6da.png" style="width:26.00em;height:16.58em;"/></p>
<ol start="9">
<li>So, that's why you may want to use a precision of <kbd>-1</kbd> when you want to show everything but don't know the exact number of digits after the dot.</li>
</ol>
<p>This is how you can carry out the conversion of integer and float values into string values in Go. In our next section, we're going to see how to parse string values to Boolean values.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Parsing string values to Boolean values</h1>
                </header>
            
            <article>
                
<p>In this section, we're going to see how to convert a string value into a Boolean value:</p>
<ol>
<li>So, in our editor, we're going to have a variable name <kbd>isNew</kbd>, and this is going to be a string value and is a true value. We're going to use a package called <kbd>strconv</kbd>, which has <kbd>ParseBool</kbd>. It returns two things: one is the Boolean value and the other is an error. So, let's check the following code:</li>
</ol>
<pre style="padding-left: 60px">package main<br/>import (<br/>  "strconv"<br/>  "fmt"<br/>)</pre>
<pre style="padding-left: 60px">func main(){<br/>  isNew := "true"<br/>  isNewBool, err := strconv.ParseBool(isNew)<br/>  if(err != nil){<br/>    fmt.Println("failed")<br/>  }else{<br/>    if(isNewBool){<br/>      fmt.Print("IsNew")<br/>    }else{<br/>      fmt.Println("Not new")<br/>    }<br/>  }<br/>}</pre>
<ol start="2">
<li>You should check whether an error is not nil. This will mean that an error occurred and we will have to handle it. For example, we're just going to output some failure message, that is, <kbd>failed</kbd>.</li>
<li>If it's not nil in other languages, but it's nil here, then we're going to have to check the <kbd>isNew</kbd> Boolean. If it looks fine, we're going to write <kbd>IsNew</kbd> to the output, or <kbd>Not new</kbd>.</li>
<li>On running the code, you obtain the following output:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-709 image-border" src="assets/5c0f7e46-e726-41dc-99ee-1d0285df5de1.png" style="width:26.33em;height:16.58em;"/></p>
<ol start="5">
<li>As you see, it passed and didn't throw an exception. If <kbd>true</kbd> is changed to <kbd>false</kbd>, we will obtain an output of <kbd>Not new</kbd>. Of course, the <kbd>ParseBool</kbd> method is flexible enough to accept various string values. </li>
</ol>
<p> </p>
<ol start="6">
<li>If you look at the signature in the following screenshot, you'll see <kbd>T</kbd>, <kbd>TRUE</kbd>, <kbd>true</kbd>, and so on:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-710 image-border" src="assets/345064b0-4eec-4638-9a0e-4e585f023edf.png" style="width:48.83em;height:20.58em;"/></p>
<ol start="7">
<li>If we type <kbd>1</kbd> instead of <kbd>true</kbd>, the output will still be <kbd>IsNew</kbd>; if we type <kbd>0</kbd>, <kbd>F</kbd>, or <kbd>f</kbd>, it'll translate to <kbd>false</kbd>, and output <kbd>Not new</kbd>.</li>
<li>Let's see what happens if we pass in <kbd>J</kbd>:</li>
</ol>
<pre style="padding-left: 60px">package main<br/>import (<br/>  "strconv"<br/>  "fmt"<br/>)<br/>func main(){<br/>  isNew := "j"<br/>  isNewBool, err := strconv.ParseBool(isNew)<br/>  if(err != nil){<br/>    fmt.Println("failed")<br/>  }else{<br/>    if(isNewBool){<br/>      fmt.Print("IsNew")<br/>    }else{<br/>      fmt.Println("Not new")<br/>    }<br/>  }<br/>}</pre>
<ol start="9">
<li class="mce-root">The code will output the following:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-711 image-border" src="assets/f9d95a80-0719-46aa-9a36-b0b8cecec456.png" style="width:26.33em;height:16.67em;"/></p>
<ol start="10">
<li>As you can see, the output will be <kbd>failed</kbd>.</li>
</ol>
<p>In our next section, we're going to show you how to parse string values to integer and float types.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Parsing string values to integer and float types</h1>
                </header>
            
            <article>
                
<p>In this section, we're going to see how to parse string values to integer and float types.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Parsing string values to integer types</h1>
                </header>
            
            <article>
                
<p>Let's imagine that we have a variable called <kbd>number</kbd>, which has <kbd>2</kbd> as a string. We're going to use <kbd>strconv.ParseInt</kbd> and it returns two variables: the first one is the actual integer that we are expecting and the other is the return variable that arises if any error occurs during conversion.</p>
<p class="mce-root"/>
<p class="mce-root"/>
<p>If you look at the signature, you'll see that it returns integer <kbd>64</kbd> and an error:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-712 image-border" src="assets/1e2ad662-0146-481c-b80f-3a604a7ebedf.png" style="width:49.00em;height:21.00em;"/></p>
<p>So, the first thing we can do is check whether any error occurred during conversion; if it is not nil, we can understand that something happened and we'll type <kbd>Error happened</kbd>.</p>
<div class="packt_tip">There's no <kbd>try...catch</kbd> in Go, so you always have to do error checking if you want to write resilient code.</div>
<p>Now, for <kbd>if</kbd> checking, we can give <kbd>Success</kbd> as an output if the number is <kbd>2</kbd>. Now, let's run the described code as follows:</p>
<pre>package main<br/>import (<br/>  "strconv"<br/>  "fmt"<br/>)<br/>func main(){<br/><br/>  number := "2"<br/>  valueInt, err := strconv.ParseInt(number, 10, 32)<br/>  if err != nil {<br/>    fmt.Print("Error happened.")<br/>  } else {<br/>    if valueInt == 2{<br/>      fmt.Println("Success")<br/>    }<br/>  }<br/>}</pre>
<p>The output for the code will be as follows:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-713 image-border" src="assets/4e0ecf78-6533-42a9-af26-04c200d74fc7.png" style="width:26.67em;height:16.50em;"/></p>
<p>The conversion was successful. You can also try 64-bit, which gives the same results. All right! That was conversion from a string into an integer.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Parsing string values to float numbers</h1>
                </header>
            
            <article>
                
<p>Now, let's check the parsing of string values to float numbers. To begin, we are going to use the same code that we used for parsing string values to float numbers with only minor modifications. The code after the modification will be as follows:</p>
<pre>package main<br/>import (<br/>  "strconv"<br/>  "fmt"<br/>)<br/>func main(){<br/><br/>  numberFloat := "2.2"<br/>  valueFloat, errFloat := strconv.ParseFloat(numberFloat, 64)<br/>  if errFloat != nil {<br/>    fmt.Print("Error happened.")<br/>  } else {<br/>    if valueFloat == 2.2 {<br/>      fmt.Println("Success")</pre>
<pre>    }<br/>  }<br/>}</pre>
<p>On running the code, it returns a <kbd>Success</kbd> message. That means our conversion was successful and we successfully got our <kbd>2.2</kbd> out of our <kbd>ParseFloat</kbd> method.</p>
<p>In the next section, we're going to learn how to convert a byte array into a string.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Converting a byte array into a string</h1>
                </header>
            
            <article>
                
<p>In this section, we're going to learn how to convert a byte array into a string: </p>
<div class="packt_infobox">The most important thing you need to know about this tutorial is that in Go, string variables are just a slice of bytes. Therefore, it is really easy to convert a byte array into a string value and a string value into a byte array.</div>
<ol>
<li>Let's see how we can start this. Imagine that you have a <kbd>helloWorldByte</kbd> array; currently, it is a literal byte array, but you can derive it from any stream, such as a network or a file:</li>
</ol>
<pre class="CDPAlignLeft CDPAlign" style="padding-left: 60px">package main<br/><br/>import "fmt"<br/><br/>func main(){<br/>  helloWorldByte := []byte{72, 101, 108, 108, 111, 44, 32, 87, 111, 114, 108, 100}<br/>  fmt.Println(string(helloWorldByte))<br/>}</pre>
<ol start="2">
<li>We also have the string construct, which makes it really easy to convert a byte array into a string representation of it. We are going to use <kbd>fmt.Println</kbd> for the string representation of this <kbd>helloWorldByte</kbd> and run the code.</li>
<li>So, let's run the code and check the output:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-714 image-border" src="assets/3c225bfd-6b53-484e-a845-38d678d1bda5.png" style="width:25.00em;height:15.67em;"/></p>
<ol start="4">
<li>As you can see, we converted the whole byte array into a string representation  really simply. You can do the same thing by using a byte instead, if you want to convert a string into a byte array. Let's actually do it really quickly. Check the following code:</li>
</ol>
<pre style="padding-left: 60px">package main<br/>import "fmt"<br/>func main(){<br/>  helloWorld := "Hello, World"<br/>  fmt.Println([]byte(helloWorld))<br/>}</pre>
<ol start="5">
<li>After we run the code, we get an output as follows:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-715 image-border" src="assets/7e6ed7ac-7149-469a-a900-6d6c172fa19e.png" style="width:31.17em;height:15.67em;"/></p>
<p>Converting a byte array into a string concludes <a href="c1a19cb8-ee26-4a5d-9a09-9600315fbb8d.xhtml">Chapter 3</a>, <em>Type Conversions</em>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p class="mce-root">In this chapter, we covered trimming spaces from the beginning and end of strings, extracting substrings from string values, replacing parts of a string, escaping characters in strings, and capitalizing string values. In <a href="472b270e-b033-4093-9c12-1521893be2ab.xhtml">Chapter 4</a>, <em>Date and Time</em>, we're going to look at recipes for dates and times, and we're going to start off by learning how to find out today's date and time.</p>


            </article>

            
        </section>
    </body></html>