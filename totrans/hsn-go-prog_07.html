<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">Files and Directories</h1>
                </header>
            
            <article>
                
<p class="mce-root">In the last chapter, you learned how to deal with errors and logging. In this chapter, we are going to see recipes for working with files and directories in the Go language. <span>You will also learn about parsing and using various formats such a XML, YAML, and JSON.</span> This chapter will cover the following topics:</p>
<ul>
<li>Checking the existence of a file</li>
<li>Reading the entire content of a text file</li>
<li>Writing to a file</li>
<li>Creating temporary files</li>
<li>Counting lines in a file</li>
<li>Reading a particular line in a file</li>
<li>Comparing the contents of two files</li>
<li>Deleting a file</li>
<li>Copying or moving a file</li>
<li>Renaming files</li>
<li>Deleting a directory and its contents</li>
<li>Listing all the files under a directory</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Checking the existence of a file</h1>
                </header>
            
            <article>
                
<p class="mce-root">We are going to start off by checking the existence of a file. So, to begin, let's create a file by clicking on <span class="packt_screen">New</span> | <span class="packt_screen">File</span> and naming it <kbd>log.txt</kbd>.</p>
<p class="mce-root"/>
<p class="mce-root">To start checking whether the file exists, we are going to be using the <kbd>os.Stat</kbd> package. It returns two values: the first one is the file info and the second one is the error. We don't need the file information but just the error itself because we are going to check the error to see whether the file exists. If the error is <kbd>nil</kbd> (no error occurs), then the file exists. Check out the following code:</p>
<pre>package main<br/>import (<br/>  "os"<br/>  "fmt"<br/>)<br/>func main(){<br/>  if _, err := os.Stat("log.txt"); err == nil{<br/>    fmt.Println("Log.txt file exists")<br/>  }<br/>}</pre>
<p class="mce-root">On running the preceding code, you'll obtain the following output:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-964 image-border" src="assets/1b6a4608-dc38-45fd-81c2-2a7fcde62f49.png" style="width:20.33em;height:13.83em;"/></p>
<p class="mce-root">To check whether the file exists in an opposite way, we just type <kbd>os.IsNotExist()</kbd> and pass the <kbd>err</kbd> that we captured and print it to the console. Check out the following code:</p>
<pre>package main<br/>import (<br/>  "os"<br/>  "fmt"<br/>)<br/>func main(){<br/>  if _, err := os.Stat("log.txt"); os.IsNotExist(err){<br/>    fmt.Println("Log.txt file does not exist")<br/>  }else{<br/>    fmt.Println("Log.txt file exists")<br/>  }<br/>}</pre>
<p class="mce-root">On running the preceding code, we will get the same output saying <kbd>Log.txt file exists</kbd>. Now, let's try to run the same code, but we delete the <kbd>log.txt</kbd> file this time. You will get the following output:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-965 image-border" src="assets/3f4015dc-873e-4739-878f-bcc035a86f58.png" style="width:26.17em;height:16.83em;"/></p>
<p class="mce-root">You can see that now the output displays <kbd>Log.txt file does not exist</kbd> and that's how you can easily check whether a file exists. In our next section, we're going to see how to read the entire contents of a file.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Reading the entire contents of a text file</h1>
                </header>
            
            <article>
                
<p>In this section, we're going to see how to read the entire contents of a file. We will create a new file called <kbd>names</kbd> and I have a bunch of names, for instance, <kbd>Tarik</kbd>, <kbd>Guney</kbd>, <kbd>Michael</kbd>, <kbd>John</kbd>, and <kbd>Montana</kbd>. We are going to read this file. We're going to use the <kbd>io</kbd> utility package that provides a read file function and it accepts the path of the file, that is, <kbd>names.txt</kbd>. It returns two things: the actual content of the file and errors. If no error occurs, we're going to convert the <kbd>contentBytes</kbd> to a <kbd>string</kbd> representation first. Now let's write the content to the console using the following code:</p>
<pre>package main<br/>import (<br/>  "io/ioutil"<br/>  "fmt"<br/>)<br/>func main(){<br/>  contentBytes, err := ioutil.ReadFile("names.txt")<br/>  if err == nil{</pre>
<pre>    var contentStr string = string(contentBytes)<br/>    fmt.Println(contentStr)<br/>  }<br/>}</pre>
<p>On running the code in the terminal by using <kbd>go run main.go</kbd> command, you'll obtain the following output:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-966 image-border" src="assets/0c58474b-7b23-4b89-9a69-29121a73758b.png" style="width:61.33em;height:10.92em;"/></p>
<p>Thus, you can see that we have read all the names from the file. That's how you can easily read the entire content of a file into your memory.</p>
<p>In our next section, we're going to see how to write to a file.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Writing to a file</h1>
                </header>
            
            <article>
                
<p>In this section, we're going to see how to write to a file. Similar to reading a file, we're going to use the <kbd>ioutil</kbd> package. We will use the <kbd>ioutil.WriteFile</kbd> function and it accepts three parameters. The first parameter is the name of the file that we're going to write into, the second one is the data that we want to write, and the last one is the file permissions. The advantage here is that if the file does not exist, then <kbd>WriteFile</kbd> will create the file with the permissions given through the <kbd>perm</kbd> parameter, and if the file order exists, then it will truncate the file before writing. We are going to go ahead and write something to our file and since our file does not exist yet, it will create a new file for us. We are going to write <kbd>Hello, World</kbd>, which is a <kbd>string</kbd> parameter and we're going to convert it to a <kbd>byte</kbd> array before being able to pass it into the <kbd>WriteFile</kbd>. The name of the file will be <kbd><span>hello_world</span></kbd> and the second parameter will be the byte representation of the <kbd>hello</kbd> variable. This will return an error. If it's not <kbd>nil</kbd>, it means something happened. Let's check the code:</p>
<pre>package main<br/>import (<br/>  "io/ioutil"<br/>  "fmt"<br/>)</pre>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mceNonEditable"/>
<pre>func main() {<br/>  hello := "Hello, World"<br/>  err := ioutil.WriteFile("hello_world", []byte(hello), 0644)<br/>  if err != nil{<br/>    fmt.Println(err)<br/>  }<br/>}</pre>
<p>On running the code, you'll see that no error occurs and that our <kbd>hello_world</kbd> file exists. If you open the file, you'll see <kbd>Hello, World</kbd> has been written in all the same:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-967 image-border" src="assets/e95a2f11-50ae-4abe-964a-7769cdef2f44.png" style="width:28.83em;height:7.25em;"/></p>
<p>If we run the code again with a different <kbd>string</kbd> and <kbd>Hello, World Again</kbd> you will see that the previous content was wiped out and replaced with the new content, which is shown in the following screenshot:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-968 image-border" src="assets/fca14fb8-c3bb-44ec-a633-e81e0859989c.png" style="width:32.08em;height:6.92em;"/></p>
<p>That's basically how you write into a file. In our next section, we're going to see how to create temporary files.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Creating temporary files</h1>
                </header>
            
            <article>
                
<p>In this section, we're going to see how to create a temporary file. Let's also have a variable that contains a string called <kbd>helloWorld := "Hello, World"</kbd>. We're going to use <kbd>ioutil</kbd> package and it provides the <kbd>TempFile()</kbd> method. The first parameter is directory; if you don't pass anything to it, it will use its default temporary directory, which we will be using in this case, and the second one is to give a prefix to your temporary file, which will be <kbd>hello_world_temp</kbd>. It returns two things: the first one is the temporary file that is created and the second one is the error (<kbd>err</kbd>). Now, if any error occurs, then we are going to panic and we'll throw the error as the message.</p>
<p class="mce-root"/>
<p>When you're done with the temporary file, what's recommended is you remove the file, and we can use the <kbd>defer</kbd> function where we have a <kbd>os.Remove()</kbd> method. You just have to provide the name of the file and it will find it and remove it. Now we're going to write the <kbd>helloWorld</kbd> into our file. Let's check the code now:</p>
<pre>package main<br/>import (<br/> "io/ioutil"<br/> "fmt"<br/>)<br/>func main(){<br/> helloWorld := "Hello, World"<br/> file, err := ioutil.TempFile("", "hello_world_temp")<br/> if err != nil{<br/> panic(err)<br/> }<br/> defer os.Remove(file.Name())<br/> if _, err := file.Write([]byte(helloWorld)); err != nil {<br/> panic(err)<br/> }<br/> fmt.Println(file.Name())<br/>}</pre>
<p>On running the preceding code, you'll obtain the following output:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-969 image-border" src="assets/8a87c71d-62b3-4fca-b709-b271a2b0377f.png" style="width:40.75em;height:15.50em;"/></p>
<p>The path is where our file is located and the selected part is the name of our file, which is a temporary file and, of course, this file is deleted. If it was not deleted, we would have seen it in that location. Now, we are not going to delete the file this time just by commenting the <kbd>deferos.Remove(file.Name())</kbd> line from the preceding code block and running it.</p>
<p class="mce-root"/>
<p>Furthermore, we'll open the file and by using the terminal, we will just display the content of that file with the <kbd>less</kbd> command (in Linux) and the <kbd>more &lt;</kbd> command (in Windows) as shown in the screenshot:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-970 image-border" src="assets/350448fe-4fe4-4618-8ed6-f1f6c76d2676.png" style="width:40.25em;height:7.92em;"/></p>
<p>If you look at the preceding screenshot, you'll see that <kbd>Hello, World</kbd> is present there.</p>
<p>That's how you can create a temporary file in Go.</p>
<p><span>In our next section, we're going to see how to count the lines of a file.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Counting lines in a file</h1>
                </header>
            
            <article>
                
<p>In this section, we're going to see how to count the lines of a file. Consider that we have a file and it has a bunch of names in each line, and we have to count how many lines there are in the file. First, we will open our file using the <kbd>os.Open</kbd> package and the name of our file will be <kbd>names.txt</kbd>. It returns an error, but for this example, we're not going to care about the error because we know that the file exists. So, I'm going to use a file scanner to scan the file. We have the <kbd>bufio.NewScanner</kbd> package that has the new scanner and it accepts a reader so we can pass the file. The line count will start from <kbd>0</kbd> and we are going to do this for <kbd>fileScanner.scan</kbd>. Thus, as long as it scans, it will increment the line count. Finally, we're going to write the number of the line to the console. Of course, when everything is done, we will use the <kbd>defer file.Close()</kbd> function. Let's check the code:</p>
<pre>package main<br/>import (<br/>  "os"<br/>  "bufio"<br/>  "fmt"<br/>)<br/>func main() {<br/>  file, _ := os.Open("names.txt")<br/>  fileScanner := bufio.NewScanner(file)<br/>  lineCount := 0;<br/>  for fileScanner.Scan(){<br/>    lineCount++<br/>  }<br/>  defer file.Close()<br/>  fmt.Println(lineCount)<br/>}</pre>
<p>When you run the preceding code, you'll get the output as follows:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-971 image-border" src="assets/745e2305-90c6-48b5-9b06-24c3d98ca5f7.png" style="width:56.67em;height:22.00em;"/></p>
<p>The output printed out <kbd>5</kbd>, and you can confirm it by going to the file and manually counting it too.</p>
<p>In our next section, we're going to see how to read a particular line in a file.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Reading a particular line in a file</h1>
                </header>
            
            <article>
                
<p>In this section, we're going to see how to read a particular line in a file. We have a file called <kbd>names.txt</kbd> and it has a bunch of names in it in each line:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-972 image-border" src="assets/95227ee6-4354-4493-bb79-bd20b3e0b606.png" style="width:30.83em;height:8.92em;"/></p>
<p>We want to read only the third line from the file. Check out the following code: </p>
<pre>package main<br/>import (<br/>  "os"<br/>  "bufio"<br/>  "fmt"<br/>)<br/>func main(){<br/>  fmt.Println(ReadLine(3))<br/>}<br/>func ReadLine(lineNumber int) string{<br/>  file, _ := os.Open("names.txt")<br/>  fileScanner := bufio.NewScanner(file)<br/>  lineCount := 0<br/>  for fileScanner.Scan(){<br/>    if lineCount == lineNumber{<br/>      return fileScanner.Text()<br/>    }<br/>    lineCount++<br/>  }<br/>  defer file.Close()<br/>  return ""<br/>}</pre>
<p>To begin with, we will have a <kbd>ReadLine()</kbd> function that accepts line numbers and returns a string. First, we are going to open the file using the <kbd>os.Open()</kbd> function, and second we are going to use <kbd>fileScanner</kbd>. We will then pass the file, and the line count that we're going to use will start from <kbd>0</kbd>. If the line count equals the line number that is given to us, then we will return the file <kbd>scanner.txt</kbd>; otherwise, we are going to increment the counter. Finally, we are going to use the <kbd>defer file.Close()</kbd> function. On running the preceding code, you'll obtain the following output:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-973 image-border" src="assets/4fa59ff5-ddd9-4385-960f-94f8e33941dc.png" style="width:41.17em;height:16.33em;"/></p>
<p>Thus, it returns <kbd>john</kbd>, which is on the third line as you start counting <kbd>0</kbd>. You can change the index and start with <kbd>1</kbd> if you want it to be more aligned with what people expect when they count lines in a file. That's how you can easily get a particular line from a file.</p>
<p>In our next section, we are going to see how to compare the contents of two files.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Comparing the contents of two files</h1>
                </header>
            
            <article>
                
<p>In this section, we're going to see how to compare contents of the two files. First, we are going to create two text files, having the same content, to compare, <kbd>one.txt</kbd> and <kbd>two.txt</kbd>. We are going to use the <kbd>ioutil</kbd> package to read the file into memory; as always, we will make sure that there is no error when we import the first file, and if there's an error, we simply will panic. We're also going to import the second file. There is a very easy way of checking whether these two files have the same content (are equal), which is by using the <kbd>Equal</kbd> function defined under the <kbd>byte</kbd> package. Check out the following code:</p>
<pre>package main<br/>import (<br/>  "io/ioutil"<br/>  "bytes"<br/>  "fmt"<br/>)<br/>func main(){<br/>  one, err := ioutil.ReadFile("one.txt")<br/>  if err != nil{<br/>    panic(err)<br/>  }<br/>  two, err2 := ioutil.ReadFile("two.txt")<br/>  if err2 != nil{<br/>    panic(err2)<br/>  }<br/>  same := bytes.Equal(one, two)<br/>  fmt.Println(same)<br/>}</pre>
<p>On running the preceding code, you will get the following output:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-974 image-border" src="assets/af24c517-9553-4d45-bbbf-fb54e3e25a01.png" style="width:50.92em;height:7.75em;"/></p>
<p>The output is <kbd>true</kbd>, which means that the content of the files was equal. If you change the content in one file and run the same code again, the output is <kbd>false</kbd>. That's how you check whether the content in two different files is the same or not.</p>
<p>In the next section, we are going to learn how to delete a file using the Go language.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Deleting a file</h1>
                </header>
            
            <article>
                
<p>In this section, we're going to see how to delete a file in Go. Deleting a file is one of the easiest operations in Go because the <kbd>os</kbd> package provides a function called <kbd>Remove()</kbd> that allows you to remove any file. So, to begin, we will create a new file and name it <kbd>new.txt</kbd>. The following screenshot will show the folder structure after the <kbd>new.txt</kbd> is created:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-975 image-border" src="assets/85fe0208-841b-4aff-90e9-3ee20c9afb3e.png" style="width:11.25em;height:6.83em;"/></p>
<p>We are going to see how to remove the <kbd>new.txt</kbd> file. The <kbd>Remove()</kbd> function accepts the path of your file. It returns an error if something happens and we're going to <kbd>catch</kbd> that error and panic if it is not <kbd>nil</kbd>. Check out the following code:</p>
<pre>package main<br/>import "os"<br/>func main() {<br/>  err := os.Remove("new.txt")<br/>  if err != nil{<br/>    panic(err)<br/>  }<br/>}</pre>
<p>Let's run the code and check the output:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-976 image-border" src="assets/0a6265c5-edb4-4ed5-b9d4-50f5c0c35887.png" style="width:9.58em;height:4.75em;"/></p>
<p class="mce-root"/>
<p><span>You can see that the <kbd>new.txt</kbd> file has disappeared and we have successfully deleted the file. So, what I'm going to do is go ahead and run this and, as you saw, the <kbd>new.txt</kbd> file disappeared. Let's run this again and see what type of panic we'll get and what error message you will see when you try to remove a file that does not exist in the first place:</span></p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-977 image-border" src="assets/3f26b6bf-03fe-4ca6-a365-28dc4e283b6d.png" style="width:51.58em;height:13.17em;"/></p>
<p>Alright, this is how you can easily delete a file in Go. In our next section, we're going to see how to copy or move a file.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Copying or moving a file</h1>
                </header>
            
            <article>
                
<p>In this section, we're going to see how to copy or move a file. There are various ways you can do this and some of them depend on the operating system you're going to use. However, we're going to see the easiest way of copying or moving a file without depending on the operating system too much. First of all, we'll add a file that we're going to copy and name it <kbd>original.txt</kbd> and add some content that has <kbd>Hello, World</kbd> in it. Then, we are going to open the file by using <kbd>os.Open()</kbd>, which will return two things, original, which is our file, and an error. If there is no error, we're going to continue and carry out a <kbd>defer</kbd> and then close the file. Furthermore, we are going to use <kbd>os.Create()</kbd> and create a new file at the same location, which will also return an error. Now the easiest thing to do is to use <kbd>io.Copy()</kbd>. Thus, the code will look something like this:</p>
<pre>package main<br/>import (<br/>  "os"<br/>  "io"<br/>)<br/>func main(){<br/>  original, err := os.Open("original.txt")<br/>  if err != nil{<br/>    panic(err)<br/>  }<br/>  defer original.close()<br/>  original_copy, err2 := os.Create("copy.txt")<br/>  if err2 != nil{<br/>    panic(err2)<br/>  }<br/>  defer original_copy.Close()<br/>  _, err3 := io.Copy(original_copy, original)<br/>  if err3 != nil{<br/>    panic(err3)<br/>  }<br/>}</pre>
<p>On running the code, we see that <kbd>copy.txt</kbd> appears and, on opening it, we can see <kbd>Hello, World</kbd> in it that has been copied from the  <kbd>original.txt</kbd> file:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-978 image-border" src="assets/54b81394-f01b-4afb-ba56-8b01b8257960.png" style="width:42.25em;height:10.58em;"/></p>
<p>Now, let's check how to move a file. First, we will create a new folder called <kbd>target</kbd> and copy <kbd>original.txt</kbd> into <kbd>target</kbd>, and delete the <kbd>original.txt</kbd> file that is placed outside the <kbd>target</kbd> folder. To do this, <kbd>original_copy, err2 := os.Create("copy.txt")</kbd> will change to <kbd>original_copy, err2 := os.Create("target/original.txt")</kbd>. If you see the following screenshot, you'll notice that the <kbd>original.txt</kbd> file has been copied under the <kbd>target</kbd> folder:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-979 image-border" src="assets/adc1d602-be2b-4525-8097-0be21234491b.png" style="width:15.25em;height:11.92em;"/></p>
<p class="mce-root"/>
<p>We can now delete the outside <kbd>original.txt</kbd> file. Add the following two lines of code at the end of the <kbd>main</kbd> function in the preceding code:</p>
<pre>original.Close()<br/>os.Remove("original.txt")</pre>
<p>On running the preceding code, you'll obtain the following output:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-980 image-border" src="assets/a7d9ea9e-8779-4bd6-b9a1-467be9e39726.png" style="width:15.17em;height:10.08em;"/></p>
<p>As you can see, the code effectively moved the <kbd>original.txt</kbd> file by moving and deleting the file. That's how you can simply copy and move files in Go.</p>
<p>In our next section, we're going to see how we can easily rename files in Go.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Renaming files</h1>
                </header>
            
            <article>
                
<p>In this section, we're going to see how to rename files in Go. First of all, we're going to create a new file and name it <kbd>old.txt</kbd> and the folder structure will be as shown in the following screenshot:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-981 image-border" src="assets/60b9bac7-c0df-439b-8862-7e32ab5867bf.png" style="width:12.75em;height:6.75em;"/></p>
<p class="mce-root"/>
<p>We are going to change the name of this file to <kbd>new.txt</kbd>. To do this, the easiest way is to use the <kbd>os</kbd> package that provides a <kbd>Rename()</kbd> function. The function accepts the old path, which is <kbd>old.txt</kbd>, and a new path, which is <kbd>new.txt</kbd>. Let's check the code:</p>
<pre>package main<br/>import "os"<br/>func main() {<br/>  os.Rename("old.txt", "new.txt")<br/>}</pre>
<p>On running the code, you can see in the following screenshot that the name <kbd>old.txt</kbd> has been changed to <kbd>new.txt</kbd>:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-982 image-border" src="assets/1b7e6add-0928-4b42-91c5-51bd0843ad74.png" style="width:13.83em;height:6.50em;"/></p>
<p>So, that's basically how we can rename our files in Go.</p>
<p>In our next section, we're going to see how to delete a directory and all of its contents.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Deleting a directory and its contents</h1>
                </header>
            
            <article>
                
<p>In this section, we're going to see how to delete a directory and its contents. We are going to use the <kbd>os</kbd> package and it provides two functions, <kbd>Remove()</kbd> and <kbd>RemoveAll()</kbd>. We will check both these functions. First, we will create a new <span>directory</span> called <kbd>hello</kbd> and keep it empty, as shown in the following screenshot:</p>
<p class="mce-root CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-983 image-border" src="assets/06f763ca-9e82-4c16-9470-64388339dd92.png" style="width:18.00em;height:6.75em;"/></p>
<p>As mentioned earlier, we are going to use the <kbd>os</kbd> package and it accepts either a file or a directory. We're going to pass a directory, which always returns an error if something happens. We will have to check whether this error is not <kbd>nil</kbd>. Check out the following code:</p>
<pre>package main<br/>import (<br/>  "os"<br/>  "fmt"<br/>)<br/>func main(){<br/>  err := os.Remove("hello")<br/>  if err != nil{<br/>    fmt.Println(err)<br/>  }<br/>}</pre>
<p>If you run the code, you'll obtain the following folder structure as output:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-984 image-border" src="assets/b9cd3c16-0a56-4800-8e83-e986b2723d47.png" style="width:18.33em;height:5.25em;"/></p>
<p>If you compare the two output screenshots, you can see that we have effectively removed our <kbd>hello</kbd> directory. However, if there's a file (say <kbd>world.txt</kbd>) in the directory, that is, the directory is not empty and you run the same code, the directory will not be deleted and the following message will be displayed if there's a file in the <kbd>hello</kbd> directory:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-985 image-border" src="assets/137c35c3-58be-4eea-928e-467a30bde069.png" style="width:39.17em;height:15.67em;"/></p>
<p class="mce-root"/>
<p class="mce-root"/>
<p>Now, there is an option to delete the file as well as the directory. We can use the <kbd>RemoveAll()</kbd> function that we spoke about at the beginning of the section. <span>To do this, just change the <kbd>err := os.Remove("hello")</kbd></span><span> to <kbd>err := os.RemoveAll("hello")</kbd></span><span> from the preceding code.</span></p>
<p>On running the preceding code, you'll find that you have successfully deleted both the file and the directory and you will be viewing the following folder structure again:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-986 image-border" src="assets/d2ffbd3c-0af5-4b86-af53-c543117243f7.png" style="width:18.25em;height:5.17em;"/></p>
<p>In our next section, we're going to see how to list all the files under a directory.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Listing all the files under a directory</h1>
                </header>
            
            <article>
                
<p>In this section, we are going to see how to list all the files under a directory. We will create a new directory called <kbd>hello</kbd> comprising three files; namely, <kbd>jupiter.txt</kbd>, <kbd>mars.txt</kbd>, and <kbd>world.txt</kbd>:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-987 image-border" src="assets/0e8b0a22-d83b-425f-9296-8c09a188fccc.png" style="width:21.33em;height:11.83em;"/></p>
<p>What we are going to do is read all the files and output their names to the console. We are going to use the <kbd>ioutil.ReadDir</kbd> package and pass in <kbd>hello</kbd>, which is the name of our directory. This will return two types of things: two files and an error. We will check whether the error is not <kbd>nil</kbd> and print out the content by using panic. We will also use the <kbd>for</kbd> loop to iterate over the files. Check out the following code:</p>
<pre>package main<br/>import (<br/>  "io/ioutil"<br/>  "fmt"<br/>)<br/>func main() {<br/>  files, err := ioutil.ReadDir("hello")<br/>  if err != nil{<br/>    panic(nil)<br/>  }<br/>  for _,f := range files{<br/>    fmt.Println(f.Name())<br/>  }<br/>}</pre>
<p>You get the following output if you run the preceding code:</p>
<p class="CDPAlignCenter CDPAlign"><img class="alignnone size-full wp-image-988 image-border" src="assets/d2ee0c53-9b60-48ec-8b1d-c7e90ab11019.png" style="width:55.00em;height:11.92em;"/></p>
<p>That's how you can simply list all the files under your directory.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p><span>In this chapter, you learned how to work with files and directories in an operating system. You also learned parsing and using various formats such a XML, YAML, and JSON. In the next chapter,</span> we're going to learn recipes about concurrency, and we're going to start by running multiple functions concurrently.</p>


            </article>

            
        </section>
    </body></html>