<html><head></head><body><div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Getting Started with Go for Data Structures and Algorithms</h1>
                </header>
            
            <article>
                
<p><span>The Go programming language has been rapidly adopted by developers for building web applications. With its impressive performance and ease of development, Go enjoys the support of a wide variety of open source frameworks for building scalable and highly performant web services and apps. The migration to Golang has taken place mainly because of its fast, lightweight, and inbuilt concurrency features. This brings with it the need to learn data structures and algorithms with this growing language.</span></p>
<p><span class="s1"><span>In data structures, a collection of elements of a single type is called an <strong>array</strong>. <strong>Slices</strong> are similar to arrays except that they have unusual properties.</span> Slice operations such as enlarging a slice using <kbd>append</kbd> and <kbd>copy</kbd> methods, assigning parts of a slice, appending a slice, and appending a part of a slice are presented with code samples. </span><span class="s1">Database operations and CRUD web forms are the scenarios in which Go data structures and algorithms are demonstrated.</span></p>
<p class="p3"><span class="s1">In this chapter, we will discuss the following Go language-specific data structures:</span></p>
<ul>
<li class="p3"><span class="s1">Arrays</span></li>
<li class="p3"><span class="s1">Slices</span></li>
<li class="p3"><span class="s1">Two-dimensional slices</span></li>
<li class="p3"><span class="s1">Maps</span></li>
<li>Database operations</li>
<li>Variadic functions</li>
<li>CRUD web forms </li>
</ul>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Technical requirements</h1>
                </header>
            
            <article>
                
<p class="p1">Install Go Version 1.10 at <a href="https://golang.org/doc/install">https://golang.org/doc/install</a>, depending on your operating system. </p>
<p>The code files for this chapter can be found at the following GitHub URL: <a href="https://github.com/PacktPublishing/Learn-Data-Structures-and-Algorithms-with-Golang/tree/master/Chapter02">https://github.com/PacktPublishing/Learn-Data-Structures-and-Algorithms-with-Golang/tree/master/Chapter02</a>.</p>
<p class="p3"><span class="s1">In this chapter, database operations require the <kbd>github.com/go-sql-driver/mysql</kbd></span> package<span class="s1">. In addition to this, MySQL (4.1+) needs to be installed from <a href="https://dev.mysql.com/downloads/mysql/">https://dev.mysql.com/downloads/mysql/</a>.</span></p>
<p class="p3"><span class="s1">Run the following command:</span></p>
<pre class="p5"><strong><span class="s1">go get -u github.com/go-sql-driver/mysql</span></strong></pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Arrays</h1>
                </header>
            
            <article>
                
<p class="p3"><span class="s1">Arrays are the most famous data structures in different programming languages. Different data types can be handled as elements in arrays such as <kbd>int</kbd>, <kbd>float32</kbd>, <kbd>double</kbd>, and others. The following code snippet shows the initialization of an array (<kbd><span>arrays.go</span></kbd>):</span></p>
<pre class="p5"><span class="s1">var arr = [5]int {1,2,4,5,6}</span></pre>
<p class="p3"><span class="s1">An array's size can be found with the <kbd>len()</kbd> function. A <kbd>for</kbd> loop is used for accessing all the elements in an array, as follows:</span></p>
<pre class="p5"><span class="s1">var i int<br/></span><span class="s1">for i=0; i&lt; len(arr); i++ {<br/></span><span class="s1">    fmt.Println("printing elements ",arr[i]<br/></span><span class="s1">}</span></pre>
<p class="p3"><span class="s1">In the following code snippet, the <kbd>range</kbd> keyword is explained in detail. The <kbd>range</kbd> keyword can be used to access the index and <kbd>value</kbd> for each element:</span></p>
<pre class="p5"><span class="s1">var value int<br/></span><span class="s1">for i, value = range arr{<br/></span><span class="s1">    fmt.Println(" range ",value)<br/></span><span class="s1">}</span></pre>
<p class="p3"><span class="s1">The <kbd>_</kbd> blank identifier is used if the index is ignored. The following code shows how a <kbd>_</kbd> blank identifier can be used:</span></p>
<pre class="p5"><span class="s1">for _, value = range arr{<br/></span><span class="s1">    fmt.Println("blank range",value)<br/></span><span class="s1">}</span></pre>
<p class="p3"><span>Run the following command:</span></p>
<pre class="p5"><strong><span class="s1">go run arrays.go</span></strong></pre>
<p class="p3"><span class="s1"><span class="fontstyle0">The following screenshot displays the output</span>:</span></p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/330f0c1d-abc6-4519-8d37-bb4fd24af58d.png" style="width:28.58em;height:17.08em;" width="916" height="546"/></p>
<p class="p3"><span class="s1">Go arrays are not dynamic but have a fixed size. To add more elements than the size,<span class="Apple-converted-space"> </span>a bigger array needs to be created and all the elements of the old one need to be copied. An array is passed as a value through functions by copying the array. Passing a big array to a function might be a performance issue.</span></p>
<p>Now that we have covered what arrays are, let's take a look at slices in the next section.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Slices</h1>
                </header>
            
            <article>
                
<p><span><strong>Go Slice</strong> is an abstraction over <strong>Go Array</strong>. </span><span>Multiple data elements of the same type are allowed by Go arrays. The d</span><span>efinition of variables that can hold several data elements of the same type are allowed by Go Array, but it does not have any provision of inbuilt methods to increase its size in Go. This shortcoming is taken care of by Slices. A Go slice can be appended to elements after the capacity has reached its size. Slices are dynamic and can double the </span>current capacity <span>in order to add more elements.</span></p>
<p class="mce-root"/>
<p>Let's take a look at the <kbd>len</kbd> function in the next section.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">The len function </h1>
                </header>
            
            <article>
                
<p class="p3"><span class="s1">The <kbd>len()</kbd> function gives the current length of <kbd>slice</kbd>, and the capacity of <kbd>slice</kbd> can be obtained using the <kbd>cap()</kbd> function. </span><span class="s1">The following code sample shows the basic slice creation and appending a slice (<kbd><span>basic_slice.go</span></kbd>):</span></p>
<pre class="p5"><span class="s1">var slice = []int{1,3,5,6}<br/></span><span class="s1">slice = append(slice, 8)<br/></span><span class="s1">fmt.Println(“Capacity”, cap(slice))<br/></span><span class="s1">fmt.Println(“Length”, len(slice))</span></pre>
<p class="p3"><span>Run the following command to execute the preceding code:</span></p>
<pre class="p5"><strong><span class="s1">go run basic_slice.go</span></strong></pre>
<p class="p3"><span class="s1"><span>The following screenshot displays the output</span>:</span></p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/495b4e43-85bf-4eb5-991d-f061c30a3313.png" style="width:41.83em;height:6.50em;" width="1140" height="177"/></p>
<p class="mce-root"><span>Let's take a look at the <kbd>slice</kbd> function in the next section.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Slice function</h1>
                </header>
            
            <article>
                
<p class="p3"><span class="s1">Slices are passed by referring to functions. Big slices can be passed to functions without impacting performance. Passing a slice as a reference to a function is demonstrated in the code as follows (</span><kbd>slices.go</kbd><span class="s1">):</span></p>
<pre class="p5"><span class="s1">//twiceValue method given slice of int type<br/></span><span class="s1">func twiceValue(slice []int) {<br/></span><span class="s1"><span class="Apple-converted-space">      </span>var i int<br/></span><span class="s1"><span class="Apple-converted-space">      </span>var value int<br/></span><span class="s1">for i, value = range<span class="Apple-converted-space">  </span>slice {<br/></span><span class="s1"><span class="Apple-converted-space">      </span>slice[i] = 2*value<br/></span><span class="s1"><span class="Apple-converted-space">   </span>}<br/></span><span class="s1"><span class="Apple-converted-space">    </span>}<br/></span><span class="s1">// main method<br/></span><span class="s1">func main() {<br/></span><span class="s1"><span class="Apple-converted-space">    </span>var slice = []int{1,3,5,6}<br/></span><span class="s1"><span class="Apple-converted-space">    </span>twiceValue(slice)<br/></span><span class="s1"><span class="Apple-converted-space">    </span>var i int<br/></span><span class="s1"><span class="Apple-converted-space">    </span>for i=0; i&lt; len(slice); i++ {<br/></span><span class="s1"><span class="Apple-converted-space">        </span>fmt.Println(“new slice value”, slice[i])<br/></span><span class="s1">}<br/></span><span class="s1">}</span></pre>
<p class="p3"><span>Run the following command:</span></p>
<pre class="p5"><strong><span class="s1">go run slices.go</span></strong></pre>
<p class="p3"><span>The following screenshot displays the output</span><span>:</span></p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/2e58fe8f-0186-4866-9e9d-b0e255611dae.png" style="width:30.75em;height:8.00em;" width="904" height="234"/></p>
<p class="mce-root">Now that we know what slices are, let's move on to two-dimensional slices in the next section.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Two-dimensional slices</h1>
                </header>
            
            <article>
                
<p class="p3"><span class="s1">Two-dimensional slices are descriptors of a two-dimensional array. <span><span>A two-dimensional slice</span></span> is a contiguous section of an array that is stored away from the slice itself. It holds references to an underlying array. A two-dimensional slice will be an array of arrays, while the capacity of a slice can be increased by creating a new slice and copying the contents of the initial slice into the new one. This is also referred to as a <strong>slice of slices</strong>. The following is an example of a two-dimensional array. A 2D array is created and the array elements are initialized with values.</span></p>
<p class="p3"><span class="s1"><kbd>twodarray.go</kbd> is the code exhibit that's presented in the following code:</span></p>
<pre class="p5"><span class="s1">//main package has examples shown<br/></span><span class="s1">// in Go Data Structures and algorithms book<br/></span><span class="s1">package main<br/></span><span class="s1">// importing fmt package<br/></span><span class="s1">import (<br/></span><span class="s1"><span class="Apple-tab-span"> </span>"fmt"<br/></span><span class="s1">)<br/></span><span class="s1">// main method<br/></span><span class="s1">func main() {<br/></span><span class="s1"><span class="Apple-converted-space">  </span>var TwoDArray [8][8]int<br/></span><span class="s1"><span class="Apple-converted-space">   </span>TwoDArray[3][6] = 18<br/></span><span class="s1"><span class="Apple-converted-space">  </span>TwoDArray[7][4] = 3<br/></span><span class="s1"><span class="Apple-converted-space">   </span>fmt.Println(TwoDArray)<br/></span><span class="s1">}</span></pre>
<p class="p3"><span>Run the following command:</span></p>
<pre class="p5"><strong><span class="s1">go run twodarray.go</span></strong></pre>
<p class="p3"><span class="s1">T<span>he following screenshot displays the output</span><span>:</span></span></p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/976abe39-0b19-4060-8eba-9daa74a989e5.png" style="width:37.58em;height:6.25em;" width="1150" height="191"/></p>
<p class="p3"><span class="s1">For dynamic allocation, we use slice of slices. In the following code, slice of slices is explained as two-dimensional slices—<kbd>twodslices.go</kbd>:</span></p>
<pre class="p5"><span class="s1">// in Go Data Structures and algorithms book<br/></span><span class="s1">package main<br/></span><span class="s1">// importing fmt package<br/></span><span class="s1">import (<br/></span><span class="s1"><span class="Apple-tab-span"> </span>"fmt"<br/></span><span class="s1">)<br/></span><span class="s1">// main method<br/></span><span class="s1">func main() {<br/></span><span class="s1"><span class="Apple-converted-space">   </span>var rows int<br/></span><span class="s1"><span class="Apple-converted-space">   </span>var cols int<br/></span><span class="s1"><span class="Apple-converted-space">   </span>rows = 7<br/></span><span class="s1"><span class="Apple-converted-space">   </span>cols = 9<br/></span><span class="s1"><span class="Apple-converted-space">   </span>var twodslices = make([][]int, rows)<br/></span><span class="s1"><span class="Apple-converted-space">   </span>var i int<br/></span><span class="s1"><span class="Apple-converted-space">   </span>for i = range twodslices {<br/></span><span class="s1"><span class="Apple-converted-space">      </span>twodslices[i] = make([]int,cols)<br/></span><span class="s1"><span class="Apple-converted-space">   </span>}<br/></span><span class="s1"><span class="Apple-converted-space">    </span>fmt.Println(twodslices)<br/></span><span class="s1">}</span></pre>
<p class="p3"><span>Run the following commands:</span></p>
<pre class="p5"><strong><span class="s1">go run twodslices.go</span></strong></pre>
<p class="mce-root"/>
<p class="p3"><span>T</span><span>he following screenshot displays the output</span><span>:</span></p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/c3661528-c819-4507-8520-ef05b45c5253.png" style="width:42.00em;height:6.33em;" width="1150" height="172"/></p>
<p class="p3"><span class="s1"> The <kbd>append</kbd> method on the slice is used to append new elements to the slice. If the slice capacity has reached the size of the underlying array, then append increases the size by creating a new underlying array<span class="Apple-converted-space"> </span>and adding the new element. </span><span class="s1"><kbd>slic1</kbd> is a sub slice of <kbd>arr</kbd> starting from zero to 3 (excluded), while <kbd>slic2</kbd> is a sub slice of <kbd>arr</kbd> starting from 1 (inclusive) to 5 (excluded). In the following snippet, the <kbd>append</kbd> method calls on <kbd>slic2</kbd> to add a new <kbd>12</kbd> element (</span><kbd>append_slice.go</kbd><span class="s1">):</span></p>
<pre class="p5"><span class="s1">var arr = [] int{5,6,7,8,9}<br/></span><span class="s1">var slic1 = arr[: 3]<br/></span><span class="s1">fmt.Println("slice1",slic1)<br/></span><span class="s1">var slic2 = arr[1:5]<br/></span><span class="s1">fmt.Println("slice2",slic2)<br/></span><span class="s1">var slic3 = append(slic2, 12)<br/></span><span class="s1">fmt.Println("slice3",slic3)</span></pre>
<p class="p3"><span>Run the following commands:</span></p>
<pre class="p5"><strong><span class="s1">go run append_slice.go</span></strong></pre>
<p class="p3"><span>T</span><span>he following screenshot displays the output</span><span>:</span></p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/1b3add4e-785a-4427-94d8-c451c0feec23.png" style="width:33.83em;height:6.67em;" width="1018" height="201"/></p>
<p class="mce-root"><span>Now that we have covered what two-dimensional slices are, let's take a look at</span> maps i<span>n the next section.</span></p>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Maps</h1>
                </header>
            
            <article>
                
<p class="p3"><span class="s1">Maps are used to keep track of keys that are types, such as integers, strings, float, double, pointers, interfaces, structs, and arrays. The values can be of different types. In the following example, the language of the map type with a key integer and a value string is created (</span><kbd>maps.go</kbd><span class="s1">):</span></p>
<pre class="p5"><span class="s1">var languages = map[int]string {<br/></span><span class="s1"><span class="Apple-converted-space">     </span>3: “English”,<br/></span><span class="s1"><span class="Apple-converted-space">      </span>4: “French”,<br/></span><span class="s1"><span class="Apple-converted-space">       </span>5: “Spanish”<br/></span><span class="s1">}</span></pre>
<p class="p3"><span class="s1">Maps can be created using the <kbd>make</kbd> method, specifying the key type and the value type. Products of a </span><span>map</span><span> </span><span>type with a key integer and value string are shown in the following code snippet:</span></p>
<pre class="p5"><span class="s1">var products = make(map[int]string)<br/></span><span class="s1">products[1] = “chair”<br/></span><span class="s1">products[2] = “table”</span></pre>
<p class="p3"><span class="s1">A <kbd>for</kbd> loop is used for iterating through the map. The languages map is iterated as follows:</span></p>
<pre class="p5"><span class="s1">var i int<br/></span><span class="s1">var value string<br/></span><span class="s1">for i, value = range languages {<br/></span><span class="s1"><span class="Apple-converted-space">   </span>fmt.Println("language",i, “:",value)<br/></span><span class="s1">}<br/></span><span class="s1">fmt.Println("product with key 2",products[2])</span></pre>
<p class="p3"><span class="s1">Retrieving value and deleting </span><span>slice</span><span> operations using the products map is shown in the following code:</span></p>
<pre class="p5"><span class="s1">fmt.Println(products[2])<br/></span><span class="s1">delete(products,”chair”) <br/></span><span class="s1">fmt.Println("products",products)</span></pre>
<p class="p3"><span>Run the following commands:</span></p>
<pre class="p5"><strong><span class="s1">go run maps.go</span></strong></pre>
<p class="p3"><span>T</span><span>he following screenshot displays the output</span><span>:</span></p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/43eebf3d-f947-4d71-92f7-108c4b02b74c.png" style="width:28.42em;height:8.25em;" width="901" height="261"/></p>
<p class="mce-root">Now that we've covered maps, let's move on to database operations.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Database operations</h1>
                </header>
            
            <article>
                
<p>In this section, we will take a look at some of database operations using appropriate examples. </p>
<p>Let's start with the <kbd>GetCustomer</kbd> method in the next section. </p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">The GetCustomer method</h1>
                </header>
            
            <article>
                
<p class="p3"><span class="s1">The <kbd>GetCustomer</kbd> method retrieves the <kbd>Customer</kbd> data from the database. To start with, the</span> <kbd>cr<span>eate</span></kbd><span> d</span><span>atabase operation is shown in the following exam</span><span>ple</span><span>.</span><span class="Apple-converted-space"> </span><span><kbd>Customer</kbd> is the table with the <kbd>Customerid</kbd>, <kbd>CustomerName</kbd>, and <kbd>SSN</kbd> attributes. The </span><kbd><span>GetConnection</span></kbd><span> </span><span>method</span> <span>returns the database connection, which is used to query the database. The query then returns the rows from the database table. In the following code, database operations are explained in detail (</span><kbd>database_operations.go</kbd><span>):</span></p>
<pre class="p5"><span class="s1">//main package has examples shown<br/>// in Hands-On Data Structures and algorithms with Go book<br/>package main<br/><br/>// importing fmt,database/sql, net/http, text/template package<br/>import (<br/>    "fmt"<br/>    "database/sql"<br/>    _ "github.com/go-sql-driver/mysql"<br/>)<br/><br/>// Customer Class<br/>type Customer struct {<br/>    CustomerId int<br/>    CustomerName string<br/>    SSN string<br/>}<br/>// GetConnection method which returns sql.DB<br/>func GetConnection() (database *sql.DB) {<br/>    databaseDriver := "mysql"<br/>    databaseUser := "newuser"<br/>    databasePass := "newuser"<br/>    databaseName := "crm"<br/>    database, error := sql.Open(databaseDriver, databaseUser+":"+databasePass+"@/"+databaseName)<br/>    if error != nil {<br/>        panic(error.Error())<br/>    }<br/>    return database<br/>}<br/>// GetCustomers method returns Customer Array<br/>func GetCustomers() []Customer {<br/>    var database *sql.DB<br/>    database = GetConnection()<br/><br/>    var error error<br/>    var rows *sql.Rows<br/>    rows, error = database.Query("SELECT * FROM Customer ORDER BY Customerid DESC")<br/>    if error != nil {<br/>        panic(error.Error())<br/>    }<br/>    var customer Customer<br/>    customer = Customer{}<br/><br/>    var customers []Customer<br/>    customers= []Customer{}<br/>    for rows.Next() {<br/>        var customerId int<br/>        var customerName string<br/>        var ssn string<br/>        error = rows.Scan(&amp;customerId, &amp;customerName, &amp;ssn)<br/>        if error != nil {<br/>            panic(error.Error())<br/>        }<br/>        customer.CustomerId = customerId<br/>        customer.CustomerName = customerName<br/>        customer.SSN = ssn<br/>        customers = append(customers, customer)<br/>    }<br/><br/>    defer database.Close()<br/><br/>    return customers<br/>}<br/><br/>//main method<br/>func main() {<br/><br/>     var customers []Customer<br/>    customers = GetCustomers()<br/>    fmt.Println("Customers",customers)<br/><br/>}<br/></span></pre>
<p class="p3"><span>Run the following commands:</span></p>
<pre class="p5"><strong><span class="s1">go run database_operations.go</span></strong></pre>
<p class="p3"><span>T</span><span>he following screenshot displays the output</span><span>:</span></p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/62f97a29-0f24-46e4-96dd-9cde2102f9af.png" style="width:34.58em;height:5.33em;" width="1144" height="176"/></p>
<p class="mce-root"><span>Let's take a look at the <kbd>InsertCustomer</kbd> method in the next section.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">The InsertCustomer method</h1>
                </header>
            
            <article>
                
<p class="p3"><span class="s1">The <kbd>INSERT</kbd> operation is as follows. The <kbd>InsertCustomer</kbd> method takes the <kbd>Customer</kbd></span> <span>parameter</span><span> a</span><span>nd creates a prepared statement for the <kbd>INSERT</kbd> statement. The statement is used to execute the insertion of customer rows into the table, as shown in the following snippet:</span></p>
<pre class="p5">// InsertCustomer method with parameter customer<br/>func InsertCustomer(customer Customer) {<br/>     var database *sql.DB<br/>     database= GetConnection()<br/><br/>      var error error<br/>      var insert *sql.Stmt<br/>      insert,error = database.Prepare("INSERT INTO CUSTOMER(CustomerName,SSN) VALUES(?,?)")<br/>          if error != nil {<br/>              panic(error.Error())<br/>          }<br/>          insert.Exec(customer.CustomerName,customer.SSN)<br/><br/>      defer database.Close()<br/><br/><br/>}</pre>
<p class="mce-root">Let's take a look at the variadic functions in the next section.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Variadic functions</h1>
                </header>
            
            <article>
                
<p>A function in which we pass an infinite number of arguments, instead of passing them one at a time, is called a variadic function. <span>The type of the final parameter is preceded by an ellipsis (...), while declaring a variadic function; this shows us that the function might be called with any number of arguments of this type.</span></p>
<p class="p3"><span class="s1">Variadic functions can be invoked with a variable number of parameters. <kbd>fmt.Println</kbd> is a common variadic function, as follows:</span></p>
<pre class="p5"><span class="s1">//main method<br/>func main() {<br/></span><span class="s1"><span class="Apple-converted-space">     </span>var customers []Customer<br/></span><span class="s1"><span class="Apple-converted-space">    </span>customers = GetCustomers()<br/></span><span class="s1"><span class="Apple-converted-space">    </span>fmt.Println("Before Insert",customers)<br/></span><span class="s1"><span class="Apple-converted-space">    </span>var customer Customer<br/></span><span class="s1"><span class="Apple-converted-space">    </span>customer.CustomerName = "Arnie Smith"<br/></span><span class="s1"><span class="Apple-converted-space">    </span>customer.SSN = "2386343"<br/></span><span class="s1"><span class="Apple-converted-space">    </span>InsertCustomer(customer)<br/></span><span class="s1"><span class="Apple-converted-space">    </span>customers = GetCustomers()<br/></span><span class="s1"><span class="Apple-converted-space">    </span>fmt.Println("After Insert",customers)<br/>    }</span></pre>
<p class="p3"><span>Run the following commands:</span></p>
<pre class="p5"><strong><span class="s1">go run database_operations.go</span></strong></pre>
<p class="p3"><span>T</span><span>he following screenshot displays the output</span><span>:</span></p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/9f6c143f-b52f-4e9d-8914-eef2a81aa9d8.png" style="width:38.83em;height:8.50em;" width="1164" height="255"/></p>
<p class="mce-root"/>
<p class="mce-root"><span>Let's start the <kbd>update</kbd> operation in the next section.</span><span> </span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">The update operation</h1>
                </header>
            
            <article>
                
<p class="p3"><span class="s1">The</span> <kbd>update</kbd><span class="s1"> operation is as follows. The <kbd>UpdateCustomer</kbd> method takes the <kbd>Customer</kbd> <span>parameter </span>and creates a prepared statement for the <kbd>UPDATE</kbd> statement. The statement is used to update a customer row in the table:</span></p>
<pre class="p5"><span class="s1">// Update Customer method with parameter customer<br/>func UpdateCustomer(customer Customer){<br/></span><span class="s1"><span class="Apple-converted-space">     </span>var database *sql.DB<br/></span><span class="s1"><span class="Apple-converted-space">     </span>database= GetConnection()<br/></span><span class="s1"><span class="Apple-converted-space">     </span>var error error<br/></span><span class="s1"><span class="Apple-converted-space">      </span>var update *sql.Stmt<br/></span><span class="s1"><span class="Apple-converted-space">      </span>update,error = database.Prepare("UPDATE CUSTOMER SET CustomerName=?, SSN=? WHERE CustomerId=?")<br/></span><span class="s1"><span class="Apple-converted-space">          </span>if error != nil {<br/></span><span class="s1"><span class="Apple-converted-space">           </span>panic(error.Error())<br/></span><span class="s1"><span class="Apple-converted-space">          </span>} <br/>      update.Exec(customer.CustomerName,customer.SSN,customer.CustomerId)<br/></span><span class="s1">defer database.Close()<br/></span><span class="s1">}<br/>// main method<br/></span><span class="s1">func main() {<br/></span><span class="s1"><span class="Apple-converted-space">    </span>var customers []Customer<br/></span><span class="s1"><span class="Apple-converted-space">    </span>customers = GetCustomers()<br/></span><span class="s1"><span class="Apple-converted-space">   </span>fmt.Println("Before Update",customers)<br/></span><span class="s1"><span class="Apple-converted-space">   </span>var customer Customer<br/></span><span class="s1"><span class="Apple-converted-space">    </span>customer.CustomerName = "George Thompson"<br/></span><span class="s1"><span class="Apple-converted-space">    </span>customer.SSN = "23233432"<br/></span><span class="s1"><span class="Apple-converted-space">    </span>customer.CustomerId = 5<br/></span><span class="s1"><span class="Apple-converted-space">    </span>UpdateCustomer(customer)<br/></span><span class="s1"><span class="Apple-converted-space">    </span>customers = GetCustomers()<br/></span><span class="s1"><span class="Apple-converted-space">    </span>fmt.Println("After Update",customers)<br/>}</span></pre>
<p class="p3"><span>Run the following commands:</span></p>
<pre class="p5"><strong><span class="s1">go run database_operations.go</span></strong></pre>
<p class="mce-root"/>
<p class="p3"><span>T</span><span>he following screenshot displays the output</span><span>:</span></p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/8e13fd88-1ac6-41aa-b556-aad717a0f976.png" style="width:35.67em;height:9.17em;" width="1145" height="291"/></p>
<p class="mce-root"><span>Let's take a look at the <kbd>delete</kbd> operation in the next section.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">The delete operation</h1>
                </header>
            
            <article>
                
<p class="p3"><span class="s1">The</span> <kbd>delete</kbd> <span class="s1">operation is as follows.<span class="Apple-converted-space"> </span>The <kbd>DeleteCustomer</kbd> method takes the <kbd>Customer</kbd> </span><span>parameter</span><span> </span><span>and creates a prepared statement for the <kbd>DELETE</kbd> statement. The statement is used to execute the deletion of a customer row in the table:</span></p>
<pre class="p5"><span class="s1">// Delete Customer method with parameter customer<br/>func deleteCustomer(customer Customer){<br/></span><span class="s1"><span class="Apple-converted-space">     </span>var database *sql.DB<br/></span><span class="s1"><span class="Apple-converted-space">     </span>database= GetConnection()<br/></span><span class="s1"><span class="Apple-converted-space">     </span>var error error<br/></span><span class="s1"><span class="Apple-converted-space">      </span>var delete *sql.Stmt<br/></span><span class="s1"><span class="Apple-converted-space">      </span>delete,error = database.Prepare("DELETE FROM Customer WHERE Customerid=?")<br/></span><span class="s1"><span class="Apple-converted-space">          </span>if error != nil {<br/></span><span class="s1"><span class="Apple-converted-space">             </span>panic(error.Error())<br/></span><span class="s1"><span class="Apple-converted-space">         </span>}<br/></span><span class="s1"><span class="Apple-converted-space">          </span>delete.Exec(customer.CustomerId)<br/></span><span class="s1"><span class="Apple-converted-space">      </span>defer database.Close()<br/></span><span class="s1">}<br/>// main method<br/></span><span class="s1">func main() {<br/></span><span class="s1"><span class="Apple-converted-space">     </span>var customers []Customer<br/></span><span class="s1"><span class="Apple-converted-space">    </span>customers = GetCustomers()<br/></span><span class="s1"><span class="Apple-converted-space">    </span>fmt.Println("Before Delete",customers)<br/></span><span class="s1"><span class="Apple-converted-space">  </span>var customer Customer<br/></span><span class="s1"><span class="Apple-converted-space">  </span>customer.CustomerName = "George Thompson"<br/></span><span class="s1"><span class="Apple-converted-space">  </span>customer.SSN = "23233432"<br/></span><span class="s1"><span class="Apple-converted-space">  </span>customer.CustomerId = 5<br/></span><span class="s1"><span class="Apple-converted-space">    </span>deleteCustomer(customer)<br/></span><span class="s1"><span class="Apple-converted-space">    </span>customers = GetCustomers()<br/></span><span class="s1"><span class="Apple-converted-space">    </span>fmt.Println("After Delete",customers)<br/></span><span class="s1">}</span></pre>
<p class="p3"><span>Run the following commands:</span></p>
<pre class="p5"><strong><span class="s1">go run database_operations.go</span></strong></pre>
<p class="p3"><span>T</span><span>he following screenshot displays the output</span><span>:</span></p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/780cc346-b9e8-4eb6-aee9-e3f122519c17.png" style="width:37.17em;height:8.33em;" width="1141" height="255"/></p>
<p class="mce-root">Now that we are done with variadic functions, let's go ahead and look at CRUD web forms in the next section.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">CRUD web forms</h1>
                </header>
            
            <article>
                
<p>In this section, we will explain web forms using basic examples, showing you how to perform various actions.</p>
<p class="p3"><span class="s1">To start a basic HTML page with the Go<span class="Apple-converted-space"> </span><kbd>net/http</kbd> package, the web forms example is as follows (</span><kbd>webforms.go</kbd><span class="s1">). This has a welcome greeting in <kbd>main.html</kbd>:</span></p>
<pre class="p5"><span class="s1">//main package has examples shown<br/></span><span class="s1">// in Hands-On Data Structures and algorithms with Go book<br/></span><span class="s1">package main<br/></span><span class="s1">// importing fmt, database/sql, net/http, text/template package<br/></span><span class="s1">import (<br/></span><span class="s1"><span class="Apple-converted-space">   </span> "net/http"<br/></span><span class="s1"><span class="Apple-converted-space">   </span> "text/template"<br/></span><span class="s1"><span class="Apple-converted-space">   </span> "log")<br/></span><span class="s1">// Home method renders the main.html<br/></span><span class="s1">func Home(writer http.ResponseWriter, reader *http.Request) {<br/></span><span class="s1"><span class="Apple-converted-space">   </span> var template_html *template.Template<br/></span><span class="s1"><span class="Apple-converted-space">   </span> template_html = template.Must(template.ParseFiles("main.html"))<br/></span><span class="s1"><span class="Apple-converted-space">   </span> template_html.Execute(writer,nil)<br/></span><span class="s1">}<br/></span><span class="s1">// main method<br/></span><span class="s1">func main() {<br/></span><span class="s1"><span class="Apple-converted-space">   </span> log.Println("Server started on: http://localhost:8000")<br/></span><span class="s1"><span class="Apple-converted-space">   </span> http.HandleFunc("/", Home)<br/></span><span class="s1"><span class="Apple-converted-space">   </span> http.ListenAndServe(":8000", nil)<br/></span><span class="s1">}</span></pre>
<p class="p3">The code for <kbd>main.html</kbd> is as follows<strong><span class="s1">:</span></strong></p>
<pre class="p5"><span class="s1">&lt;html&gt;<br/></span><span class="s1">    &lt;body&gt;<br/></span><span class="s1">        &lt;p&gt; Welcome to Web Forms&lt;/p&gt;<br/></span><span class="s1">    &lt;/body&gt;<br/></span><span class="s1">&lt;/html&gt;</span></pre>
<p class="p3"><span>Run the following commands:</span></p>
<pre class="p5"><strong><span class="s1">go run webforms.go</span></strong></pre>
<p class="p3"><span>T</span><span>he following screenshot displays the output</span><span>:</span></p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/7572a7d3-8656-4eff-8792-4081b580d509.png" style="width:31.92em;height:4.83em;" width="991" height="150"/></p>
<p>The web browser output is shown in the following screenshot:</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/5f8fa924-d1a5-4fd0-90ea-fe55a5a86688.png" style="width:18.83em;height:5.92em;" width="771" height="242"/></p>
<p class="p3"><span class="s1">The CRM application is built with web forms as an example to demonstrate CRUD<span class="Apple-converted-space"> </span>operations. We can use the database operations we built in the previous section. In the following code, the <kbd>crm</kbd> database operations are presented. The <kbd>crm</kbd> database operations consist of CRUD methods such as <kbd>CREATE</kbd>, <kbd>READ</kbd>, <kbd>UPDATE</kbd>, and <kbd>DELETE</kbd> customer operations. The <kbd>GetConnection</kbd> method retrieves the database connection for performing the database operations (</span><kbd>crm_database_operations.go</kbd><span class="s1">):</span></p>
<pre class="p5"><span class="s1">//main package has examples shown<br/></span><span class="s1">// in Hands-On Data Structures and algorithms with Go book<br/></span><span class="s1">package main<br/></span><span class="s1">// importing fmt,database/sql, net/http, text/template package<br/></span><span class="s1">import (<br/></span><span class="s1"><span class="Apple-converted-space">  </span> "database/sql"<br/></span><span class="s1"><span class="Apple-converted-space">   </span> _ "github.com/go-sql-driver/mysql"<br/></span><span class="s1">)<br/>// Customer Class<br/></span><span class="s1">type Customer struct {<br/></span><span class="s1"><span class="Apple-converted-space">   </span> CustomerId<span class="Apple-converted-space">   </span> int<br/></span><span class="s1"><span class="Apple-converted-space">   </span> CustomerName<span class="Apple-converted-space"> </span> string<br/></span><span class="s1"><span class="Apple-converted-space">   </span> SSN string<br/></span><span class="s1">}<br/>//  GetConnection method  which returns sql.DB<br/></span><span class="s1">func GetConnection() (database *sql.DB) {<br/></span><span class="s1"><span class="Apple-converted-space">   </span> databaseDriver := "mysql"<br/></span><span class="s1"><span class="Apple-converted-space">   </span> databaseUser := "newuser"<br/></span><span class="s1"><span class="Apple-converted-space">   </span> databasePass := "newuser"<br/></span><span class="s1"><span class="Apple-converted-space">   </span> databaseName := “crm"<br/></span><span class="s1"><span class="Apple-converted-space">   </span> database, error := sql.Open(databaseDriver, databaseUser+”:"+databasePass+"@/"+databaseName)<br/></span><span class="s1"><span class="Apple-converted-space">   </span> if error != nil {<br/></span><span class="s1"><span class="Apple-converted-space">       </span> panic(error.Error())<br/></span><span class="s1"><span class="Apple-converted-space">   </span> }<br/></span><span class="s1"><span class="Apple-converted-space">   </span> return database<br/></span><span class="s1">}<br/><br/></span></pre>
<p>As shown in the following code, the <kbd>GetCustomerById</kbd> method takes the <kbd>customerId</kbd> parameter to look up in the customer database. The <kbd>GetCustomerById</kbd> method returns the customer object:</p>
<pre class="p5"><span class="s1">//GetCustomerById with parameter customerId returns Customer<br/></span><span class="s1">func GetCustomerById(customerId int) Customer {<br/></span><span class="s1"><span class="Apple-converted-space"> </span> var database *sql.DB<br/></span><span class="s1"><span class="Apple-converted-space"> </span> database = GetConnection()<br/></span><span class="s1"><span class="Apple-converted-space"> </span> var error error<br/></span><span class="s1"><span class="Apple-converted-space"> </span> var rows *sql.Rows<br/></span><span class="s1"><span class="Apple-converted-space"> </span> rows, error = database.Query("SELECT * FROM Customer WHERE CustomerId=?",customerId)<br/></span><span class="s1"><span class="Apple-converted-space"> </span> if error != nil {<br/></span><span class="s1"><span class="Apple-converted-space">     </span> panic(error.Error())<br/></span><span class="s1"><span class="Apple-converted-space"> </span> }<br/></span><span class="s1"><span class="Apple-converted-space"> </span> var customer Customer<br/></span><span class="s1"><span class="Apple-converted-space"> </span> customer = Customer{}<br/></span><span class="s1"><span class="Apple-converted-space">   </span> for rows.Next() {<br/></span><span class="s1"><span class="Apple-converted-space">       </span> var customerId int<br/></span><span class="s1"><span class="Apple-converted-space">       </span> var customerName string<br/></span><span class="s1"><span class="Apple-converted-space">       </span> var SSN<span class="Apple-converted-space"> </span> string<br/></span><span class="s1"><span class="Apple-converted-space">       </span> error = rows.Scan(&amp;customerId, &amp;customerName, &amp;SSN)<br/></span><span class="s1"><span class="Apple-converted-space">       </span> if error != nil {<br/></span><span class="s1"><span class="Apple-converted-space">          </span> panic(error.Error())<br/></span><span class="s1"><span class="Apple-converted-space">       </span> }<br/></span><span class="s1"><span class="Apple-converted-space">       </span> customer.CustomerId = customerId<br/></span><span class="s1"><span class="Apple-converted-space">       </span> customer.CustomerName = customerName<br/></span><span class="s1"><span class="Apple-converted-space">      </span> customer.SSN = SSN<br/></span><span class="s1"><span class="Apple-converted-space">   </span> }</span></pre>
<p class="mce-root">Now that we have covered CRUD web forms, let's move on to <kbd>defer</kbd> and <kbd>panic</kbd> in the next section.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">The defer and panic statements</h1>
                </header>
            
            <article>
                
<p class="p3"><span class="s1">The <kbd>defer</kbd> statement defers the execution of the function until the surrounding function returns. The <kbd>panic</kbd> function stops the current flow and control. Deferred functions are executed normally after the <kbd>panic</kbd> call. </span><span class="s1">In the following code example, the <kbd>defer</kbd> call gets executed even when the <kbd>panic</kbd> call is invoked:</span></p>
<pre class="p5"><span class="s1"><span class="Apple-converted-space">   </span> defer database.Close()<br/></span><span class="s1"><span class="Apple-converted-space">   </span> return customer<br/></span><span class="s1">}<br/>// GetCustomers method returns Customer Array<br/></span><span class="s1">func GetCustomers() []Customer {<br/></span><span class="s1"><span class="Apple-converted-space">   </span> var database *sql.DB<br/></span><span class="s1"><span class="Apple-converted-space">   </span> database = GetConnection()<br/></span><span class="s1"><span class="Apple-converted-space">   </span> var error error<br/></span><span class="s1"><span class="Apple-converted-space">   </span> var rows *sql.Rows<br/></span><span class="s1"><span class="Apple-converted-space">   </span> rows, error = database.Query("SELECT * FROM Customer ORDER BY Customerid DESC")<br/></span><span class="s1"><span class="Apple-converted-space">   </span> if error != nil {<br/></span><span class="s1"><span class="Apple-converted-space">      </span> panic(error.Error())<br/></span><span class="s1"><span class="Apple-converted-space">   </span> }<br/></span><span class="s1"><span class="Apple-converted-space">  </span> var customer Customer<br/></span><span class="s1"><span class="Apple-converted-space">   </span> customer = Customer{}<br/></span><span class="s1"><span class="Apple-converted-space">   </span> var customers []Customer<br/></span><span class="s1"><span class="Apple-converted-space">   </span> customers= []Customer{}<br/></span><span class="s1"><span class="Apple-converted-space">  </span> for rows.Next() {<br/></span><span class="s1"><span class="Apple-converted-space">      </span> var customerId int<br/></span><span class="s1"><span class="Apple-converted-space">       </span> var customerName string<br/></span><span class="s1"><span class="Apple-converted-space">      </span> var ssn string<br/></span><span class="s1"><span class="Apple-converted-space">       </span> error = rows.Scan(&amp;customerId, &amp;customerName, &amp;ssn)<br/></span><span class="s1"><span class="Apple-converted-space">       </span> if error != nil {<br/></span><span class="s1"><span class="Apple-converted-space">           </span> panic(error.Error())<br/></span><span class="s1"><span class="Apple-converted-space">       </span> }<br/></span><span class="s1"><span class="Apple-converted-space">       </span> customer.CustomerId = customerId<br/></span><span class="s1"><span class="Apple-converted-space">       </span> customer.CustomerName = customerName<br/></span><span class="s1"><span class="Apple-converted-space">       </span> customer.SSN = ssn<br/></span><span class="s1"><span class="Apple-converted-space">       </span> customers = append(customers, customer)<br/></span><span class="s1"><span class="Apple-converted-space">   </span> }<br/></span><span class="s1"><span class="Apple-converted-space">  </span> defer database.Close()<br/></span><span class="s1"><span class="Apple-converted-space">   </span> return customers<br/></span><span class="s1">}<br/></span></pre>
<p><span>Let's take a look at the <kbd>InsertCustomer</kbd>, <kbd>UpdateCustomer</kbd>, and <kbd>DeleteCustomer</kbd> methods in the following sections.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">The InsertCustomer method</h1>
                </header>
            
            <article>
                
<p>In the following code, the <kbd>InsertCustomer</kbd> method takes <kbd>customer</kbd> as a parameter to execute the SQL statement for inserting into the <kbd>CUSTOMER</kbd> table:</p>
<pre>// InsertCustomer method with parameter customer<br/>func InsertCustomer(customer Customer) {<br/>     var database *sql.DB<br/>     database= GetConnection()<br/>     var error error<br/>      var insert *sql.Stmt<br/>     insert,error = database.Prepare("INSERT INTO CUSTOMER(CustomerName,SSN) VALUES(?,?)")<br/>          if error != nil {<br/>              panic(error.Error())<br/>         }<br/>     insert.Exec(customer.CustomerName,customer.SSN)<br/>      defer database.Close()<br/>}</pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">The UpdateCustomer method</h1>
                </header>
            
            <article>
                
<p>The <kbd>UpdateCustomer</kbd> method prepares the <kbd>UPDATE</kbd> statement by passing the <kbd>CustomerName</kbd> and <kbd>SSN</kbd> from the <kbd>customer</kbd> object; this is shown in the following code:</p>
<pre>// Update Customer method with parameter customer<br/>func UpdateCustomer(customer Customer) {<br/>     var database *sql.DB<br/>     database= GetConnection()<br/>     var error error<br/>      var update *sql.Stmt<br/>      update,error = database.Prepare("UPDATE CUSTOMER SET CustomerName=?, SSN=? WHERE CustomerId=?")<br/>          if error != nil {<br/>              panic(error.Error())<br/>          }<br/>          update.Exec(customer.CustomerName,customer.SSN,customer.CustomerId)<br/>     defer database.Close()<br/>}<br/><br/></pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">The DeleteCustomer method</h1>
                </header>
            
            <article>
                
<p>The <kbd>DeleteCustomer</kbd> method deletes the customer that's passed by executing the <kbd>DELETE</kbd> statement:</p>
<pre>// Delete Customer method with parameter customer<br/>func DeleteCustomer(customer Customer) {<br/>     var database *sql.DB<br/>     database= GetConnection()<br/>      var error error<br/>      var delete *sql.Stmt<br/>      delete,error = database.Prepare("DELETE FROM Customer WHERE Customerid=?")<br/>          if error != nil {<br/>              panic(error.Error())<br/>          }<br/>          delete.Exec(customer.CustomerId)<br/>     defer database.Close()<br/>}</pre>
<p class="mce-root">Let's take a look at the CRM web application in the next section.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">CRM web application</h1>
                </header>
            
            <article>
                
<p class="p3"><span class="s1">The CRM web application is shown as follows, with various web paths handled. The CRM application code is shown in the following code. The <kbd>Home</kbd> function executes the <kbd>Home</kbd> template with the writer <span>parameter </span>and the customers array (</span><kbd>crm_app.go</kbd><span class="s1">):</span></p>
<pre class="p5"><br/>//main package has examples shown<br/>// in Hands-On Data Structures and algorithms with Go book<br/>package main<br/><br/>// importing fmt,database/sql, net/http, text/template package<br/>import (<br/>    "fmt"<br/>    "net/http"<br/>    "text/template"<br/>    "log"<br/>)<br/><br/><br/>var template_html = template.Must(template.ParseGlob("templates/*"))<br/><br/>// Home - execute Template<br/>func Home(writer http.ResponseWriter, request *http.Request) {<br/>    var customers []Customer<br/>    customers = GetCustomers()<br/>    log.Println(customers)<br/>    template_html.ExecuteTemplate(writer,"Home",customers)<br/><br/>}<br/><br/><br/></pre>
<p class="mce-root"><span>Let's take a look at the <kbd>Create</kbd>, <kbd>Insert</kbd>, <kbd>Alter</kbd>, <kbd>Update</kbd>, and <kbd>Delete</kbd> functions, as well as the <kbd>main</kbd> method in the following sections.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">The Create function</h1>
                </header>
            
            <article>
                
<p>As shown in the following code, the <kbd>Create</kbd> function takes the <kbd>writer</kbd> and <kbd>request</kbd> parameters to render the <kbd>Create</kbd> template:</p>
<pre class="p5">// Create - execute Template<br/>func Create(writer http.ResponseWriter, request *http.Request) {<br/><br/>    template_html.ExecuteTemplate(writer,"Create",nil)<br/>}</pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">The Insert function</h1>
                </header>
            
            <article>
                
<p>The <kbd>Insert</kbd> function invokes the <kbd>GetCustomers</kbd> method to get an array of <kbd>customers</kbd> and renders the <kbd>Home</kbd> template with the <kbd>writer</kbd> and <kbd>customers</kbd> arrays as parameters by invoking the <kbd>ExecuteTemplate</kbd> method. This is shown in the following code:</p>
<pre class="p5">// Insert - execute template<br/>func Insert(writer http.ResponseWriter, request *http.Request) {<br/><br/>    var customer Customer<br/>    customer.CustomerName = request.FormValue("customername")<br/>    customer.SSN = request.FormValue("ssn")<br/>    InsertCustomer(customer)<br/>    var customers []Customer<br/>    customers = GetCustomers()<br/>    template_html.ExecuteTemplate(writer,"Home",customers)<br/><br/>}</pre>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mceNonEditable"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">The Alter function</h1>
                </header>
            
            <article>
                
<p>The following code shows how the <kbd>Alter</kbd> function renders the <kbd>Home</kbd> template by invoking the <kbd>ExecuteTemplate</kbd> method with the <kbd>writer</kbd> and <kbd>customers</kbd> arrays as parameters:</p>
<pre class="p5">// Alter - execute template<br/>func Alter(writer http.ResponseWriter, request *http.Request) {<br/><br/>    var customer Customer<br/>    var customerId int<br/>    var customerIdStr string<br/>    customerIdStr = request.FormValue("id")<br/>    fmt.Sscanf(customerIdStr, "%d", &amp;customerId)<br/>    customer.CustomerId = customerId<br/>    customer.CustomerName = request.FormValue("customername")<br/>    customer.SSN = request.FormValue("ssn")<br/>    UpdateCustomer(customer)<br/>    var customers []Customer<br/>    customers = GetCustomers()<br/>    template_html.ExecuteTemplate(writer,"Home",customers)<br/><br/>}<br/><br/><br/></pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">The Update function</h1>
                </header>
            
            <article>
                
<p>The <kbd>Update</kbd> function invokes the <kbd>ExecuteTemplate</kbd> method with <kbd>writer</kbd> and <kbd>customer</kbd> looked up by <kbd>id</kbd>. The <kbd>ExecuteTemplate</kbd> method renders the <kbd>UPDATE</kbd> template:</p>
<pre class="p5">// Update - execute template<br/>func Update(writer http.ResponseWriter, request *http.Request) {<br/><br/>  var customerId int<br/>  var customerIdStr string<br/>  customerIdStr = request.FormValue("id")<br/>  fmt.Sscanf(customerIdStr, "%d", &amp;customerId)<br/>  var customer Customer<br/>  customer = GetCustomerById(customerId)<br/><br/>    template_html.ExecuteTemplate(writer,"Update",customer)<br/><br/>}</pre>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mceNonEditable"/>
<p class="mceNonEditable"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">The Delete function</h1>
                </header>
            
            <article>
                
<p>The <kbd>Delete</kbd> method renders the <kbd>Home</kbd> template after deleting the customer that's found by the <kbd>GetCustomerById</kbd> method. The <kbd>View</kbd> method renders the <kbd>View</kbd> template after finding the customer by invoking the <kbd>GetCustomerById</kbd> method:</p>
<pre class="p5">// Delete - execute Template<br/>func Delete(writer http.ResponseWriter, request *http.Request) {<br/>  var customerId int<br/>  var customerIdStr string<br/>  customerIdStr = request.FormValue("id")<br/>  fmt.Sscanf(customerIdStr, "%d", &amp;customerId)<br/>  var customer Customer<br/>  customer = GetCustomerById(customerId)<br/>   DeleteCustomer(customer)<br/>   var customers []Customer<br/>   customers = GetCustomers()<br/>  template_html.ExecuteTemplate(writer,"Home",customers)<br/><br/>}<br/>// View - execute Template<br/>func View(writer http.ResponseWriter, request *http.Request) {<br/>    var customerId int<br/>    var customerIdStr string<br/>    customerIdStr = request.FormValue("id")<br/>    fmt.Sscanf(customerIdStr, "%d", &amp;customerId)<br/>    var customer Customer<br/>    customer = GetCustomerById(customerId)<br/>    fmt.Println(customer)<br/>    var customers []Customer<br/>    customers= []Customer{customer}<br/>    customers.append(customer)<br/>    template_html.ExecuteTemplate(writer,"View",customers)<br/><br/>}<br/><br/></pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">The main method</h1>
                </header>
            
            <article>
                
<p>The main method handles the <kbd>Home</kbd>, <kbd>Alter</kbd>, <kbd>Create</kbd>, <kbd>Update</kbd>, <kbd>View</kbd>, <kbd>Insert</kbd>, and <kbd>Delete</kbd> functions with different aliases for lookup and renders the templates appropriately. <kbd>HttpServer</kbd> listens to port <kbd>8000</kbd> and waits for template alias invocation:</p>
<pre class="p5">// main method<br/>func main() {<br/>    log.Println("Server started on: http://localhost:8000")<br/>    http.HandleFunc("/", Home)<br/>    http.HandleFunc("/alter", Alter)<br/>    http.HandleFunc("/create", Create)<br/>    http.HandleFunc("/update", Update)<br/>    http.HandleFunc("/view", View)<br/>    http.HandleFunc("/insert", Insert)<br/>    http.HandleFunc("/delete", Delete)<br/>    http.ListenAndServe(":8000", nil)<br/>}</pre>
<p class="mce-root"><span>Let's take a look at the <kbd>Header</kbd>, <kbd>Footer</kbd>, <kbd>Menu</kbd>, <kbd>Create</kbd>, <kbd>Update</kbd>, and <kbd>View</kbd> templates in the following sections.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">The Header template</h1>
                </header>
            
            <article>
                
<p class="p3"><span class="s1">The <kbd>Header</kbd> template has the HTML <kbd>head</kbd> and <kbd>body</kbd> defined in the code snippet, as follows. The</span> TITLE<span class="s1"> tag of the web page is set to <kbd>CRM</kbd> and the web page has <kbd>Customer Management – CRM</kbd> as content (</span><kbd>Header.tmpl</kbd><span class="s1">):</span></p>
<pre class="p5"><span class="s1">{{ define "Header" }}<br/></span><span class="s1">&lt;!DOCTYPE html&gt;<br/></span><span class="s1">&lt;html&gt;<br/></span><span class="s1"><span class="Apple-converted-space">   </span> &lt;head&gt;<br/></span><span class="s1"><span class="Apple-converted-space">       </span> &lt;title&gt;CRM&lt;/title&gt;<br/></span><span class="s1"><span class="Apple-converted-space">       </span> &lt;meta charset="UTF-8" /&gt;<br/></span><span class="s1"><span class="Apple-converted-space">   </span> &lt;/head&gt;<br/></span><span class="s1"><span class="Apple-converted-space">   </span> &lt;body&gt;<br/></span><span class="s1"><span class="Apple-converted-space">       </span> &lt;h1&gt;Customer Management – CRM&lt;/h1&gt;<span class="Apple-converted-space">   <br/></span></span><span class="s1">{{ end }}</span></pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">The Footer template</h1>
                </header>
            
            <article>
                
<p class="p3"><span class="s1">The <kbd>Footer</kbd> template has the HTML and BODY close tags defined. The <kbd>Footer</kbd> template is presented in the following code snippet (</span><kbd>Footer.tmpl</kbd><span class="s1">):</span></p>
<pre class="p5"><span class="s1">{{ define "Footer" }}<br/></span><span class="s1"><span class="Apple-converted-space">   </span> &lt;/body&gt;<br/></span><span class="s1">  &lt;/html&gt;<br/></span><span class="s1">{{ end }}</span></pre>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mceNonEditable"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">The Menu template</h1>
                </header>
            
            <article>
                
<p class="p3"><span class="s1">The <kbd>Menu</kbd> template has the links defined for <kbd>Home</kbd> and <kbd>Create Customer</kbd>, as shown in the following code (</span><kbd>Menu.tmpl</kbd><span class="s1">):</span></p>
<pre class="p5"><span class="s1">{{ define "Menu" }}<br/></span><span class="s1">&lt;a href="/"&gt;Home&lt;/a&gt; |</span><span class="s1">&lt;a href="/create"&gt;Create Customer&lt;/a&gt;<br/></span><span class="s1">{{ end }}</span></pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">The Create template</h1>
                </header>
            
            <article>
                
<p class="p3"><span class="s1">The <kbd>Create</kbd> template consists of <kbd>Header</kbd>, <kbd>Menu</kbd>, and <kbd>Footer</kbd> templates. The form to create customer fields is found in the <kbd>create</kbd> template. This form is submitted to a web path—<kbd>/insert</kbd>, as shown in the following code snippet (</span><kbd>Create.tmpl</kbd><span class="s1">):</span></p>
<pre class="p5"><span class="s1">{{ define "Create" }}<br/></span><span class="s1"><span class="Apple-converted-space"> </span> {{ template "Header" }}<br/></span><span class="s1"><span class="Apple-converted-space">  </span>{{ template "Menu"<span class="Apple-converted-space"> </span> }}<br/></span><span class="s1">  &lt;br&gt;<br/></span><span class="s1"><span class="Apple-converted-space">   </span> &lt;h1&gt;Create Customer&lt;/h1&gt;<br/></span><span class="s1"><span class="Apple-converted-space"> </span> &lt;br&gt;<br/></span><span class="s1"><span class="Apple-converted-space"> </span> &lt;br&gt;<br/></span><span class="s1"><span class="Apple-converted-space"> </span> &lt;form method="post" action="/insert"&gt;<br/></span><span class="s1"><span class="Apple-converted-space">   </span> Customer Name: &lt;input type="text" name="customername" placeholder="customername" autofocus/&gt;<br/></span><span class="s1"><span class="Apple-converted-space">   </span> &lt;br&gt;<br/></span><span class="s1"><span class="Apple-converted-space">   </span> &lt;br&gt;<br/></span><span class="s1"><span class="Apple-converted-space">   </span> SSN: &lt;input type="text" name="ssn" placeholder="ssn"/&gt;<br/></span><span class="s1"><span class="Apple-converted-space">   </span> &lt;br&gt;<br/></span><span class="s1"><span class="Apple-converted-space">   </span> &lt;br&gt;<br/></span><span class="s1"><span class="Apple-converted-space">   </span> &lt;input type="submit" value="Create Customer"/&gt;<br/></span><span class="s1"><span class="Apple-converted-space">  </span> &lt;/form&gt;<br/></span><span class="s1">{{ template "Footer" }}<br/></span><span class="s1">{{ end }}</span></pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">The Update template</h1>
                </header>
            
            <article>
                
<p class="p3"><span class="s1">The <kbd>Update</kbd> template consists of the <kbd>Header</kbd>, <kbd>Menu</kbd>, and <kbd>Footer</kbd> templates, as follows. The form to update customer fields is found in the <kbd>Update</kbd> template. This form is submitted to a web path, </span><kbd>/alter</kbd><span class="s1"> (</span><kbd>Update.tmpl</kbd><span class="s1">):</span></p>
<pre class="p5">{{ define "Update" }}<br/>  {{ template "Header" }}<br/>    {{ template "Menu" }}<br/>&lt;br&gt;<br/>&lt;h1&gt;Update Customer&lt;/h1&gt;<br/>    &lt;br&gt;<br/>    &lt;br&gt;<br/>  &lt;form method="post" action="/alter"&gt;<br/>    &lt;input type="hidden" name="id" value="{{ .CustomerId }}" /&gt;<br/>    Customer Name: &lt;input type="text" name="customername" placeholder="customername" value="{{ .CustomerName }}" autofocus&gt;<br/>    &lt;br&gt;<br/>    &lt;br&gt;<br/>    SSN: &lt;input type="text" name="ssn" value="{{ .SSN }}" placeholder="ssn"/&gt;<br/>    &lt;br&gt;<br/>    &lt;br&gt;<br/>    &lt;input type="submit" value="Update Customer"/&gt;<br/>   &lt;/form&gt;<br/>{{ template "Footer" }}<br/>{{ end }}</pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">The View template</h1>
                </header>
            
            <article>
                
<p class="p3"><span class="s1">The <kbd>View</kbd> template consists of <kbd>Header</kbd>, <kbd>Menu</kbd>, and <kbd>Footer</kbd> templates. The form to view the customer fields is found in the <kbd>View</kbd> template, which is presented in code </span><span>as follows (</span><kbd>View.tmpl</kbd><span>):</span></p>
<pre class="p5"><span class="s1">{{ define "View" }}<br/></span><span class="s1"><span class="Apple-converted-space"> </span> {{ template "Header" }}<br/></span><span class="s1"><span class="Apple-converted-space">  </span>{{ template "Menu"<span class="Apple-converted-space"> </span> }}<br/></span><span class="s1"><span class="Apple-converted-space">   </span> &lt;br&gt;<br/></span><span class="s1"><span class="Apple-converted-space">      </span> &lt;h1&gt;View Customer&lt;/h1&gt;<br/></span><span class="s1"><span class="Apple-converted-space">     </span> &lt;br&gt;<br/></span><span class="s1"><span class="Apple-converted-space">     </span> &lt;br&gt;<br/></span><span class="s1">&lt;table border="1"&gt;<br/></span><span class="s1">&lt;tr&gt;<br/></span><span class="s1">&lt;td&gt;CustomerId&lt;/td&gt;<br/></span><span class="s1">&lt;td&gt;CustomerName&lt;/td&gt;<br/></span><span class="s1">&lt;td&gt;SSN&lt;/td&gt;<br/></span><span class="s1">&lt;td&gt;Update&lt;/td&gt;<br/></span><span class="s1">&lt;td&gt;Delete&lt;/td&gt;<br/></span><span class="s1">&lt;/tr&gt;<br/></span><span class="s1">{{ if . }}<br/></span><span class="s1"><span class="Apple-converted-space">      </span> {{ range . }}<br/></span><span class="s1">&lt;tr&gt;<br/></span><span class="s1">&lt;td&gt;{{ .CustomerId }}&lt;/td&gt;<br/></span><span class="s1">&lt;td&gt;{{ .CustomerName }}&lt;/td&gt;<br/></span><span class="s1">&lt;td&gt;{{ .SSN }}&lt;/td&gt;<br/></span><span class="s1">&lt;td&gt;&lt;a href="/delete?id={{.CustomerId}}" onclick="return confirm('Are you sure you want to delete?');"&gt;Delete&lt;/a&gt; &lt;/td&gt;<br/></span><span class="s1">&lt;td&gt;&lt;a href="/update?id={{.CustomerId}}"&gt;Update&lt;/a&gt; &lt;/td&gt;<br/></span><span class="s1">&lt;/tr&gt;<br/></span><span class="s1">{{ end }}<br/></span><span class="s1"><span class="Apple-converted-space">    </span> {{ end }}<br/></span><span class="s1">&lt;/table&gt;<br/></span><span class="s1">{{ template "Footer" }}<br/></span><span class="s1">{{ end }}</span></pre>
<p class="p3"><span>Run the following commands:</span></p>
<pre class="p5"><strong><span class="s1">go run crm_app.go crm_database_operations.go</span></strong></pre>
<p class="p3"><span>T</span><span>he following screenshot displays the output</span><span>:</span></p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/42cf8e4a-b8fc-41c6-8a63-a925ab54ad52.png" style="width:59.58em;height:6.92em;" width="1314" height="152"/></p>
<p><span>The web browser output is shown in the following screenshot:</span></p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/56f7db84-25cd-48c4-bd64-daf73ecf98da.png" style="width:26.75em;height:22.42em;" width="960" height="805"/></p>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p class="p6"><span class="s1">This chapter introduced database operations and web forms. Now, you will be able to build web applications that can store data in databases. Arrays, slices, two-dimensional slices, and maps were covered with code samples. Array methods such as <kbd>len</kbd>, iterating through an array using <kbd>for</kbd>, and <kbd>range</kbd> were explained in this chapter using code snippets. Two-dimensional arrays and slice of slices were discussed in the <em>Slices</em> section.</span></p>
<p class="p6"><span class="s1">Maps were explained with various scenarios such as adding keys and values, as well as retrieving and deleting values. Maps of different types, such as strings and integers, were also discussed in this chapter. Furthermore, variadic functions, deferred function calls, and panic and recover operations were demonstrated in the <em>Database operations</em> and <em>CRUD web forms </em>sections.<em> </em></span></p>
<p class="p6"><span class="s1">The CRM application was built as a web application with data persisted in the MySQL database. </span><span class="s1">Database operations for adding, deleting, updating, and retrieving data were shown in code snippets. In additio</span>n, web forms <span class="s1">for creating, updating, deleting, and viewing customer data were presented using web forms with templates. MySQL driver and its installation details were provided in the <em>Technical requirements</em> section of this chapter. How to create a web application using Go was demonstrated with execution details.</span></p>
<p>The next chapter will have topics related to <span class="s1">linear data structures such as lists, sets, tuples, and stacks.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Questions</h1>
                </header>
            
            <article>
                
<ol class="ol1">
<li class="li6"><span class="s1">What is the name of the method to get the size of an array?</span></li>
<li class="li6"><span class="s1">How do you find the capacity of the slice?</span></li>
<li class="li6"><span class="s1">How do you initialize the 2D slice of a string type?</span></li>
<li class="li6"><span class="s1">How do you add an element to the slice?</span></li>
<li class="li6"><span class="s1">Using code, can you demonstrate how to create a map of key strings and value strings? Initialize the map with keys and values in the code, i</span>terate them in a loop, and print the keys and values in the code.</li>
</ol>
<p> </p>
<ol class="ol1" start="6">
<li class="li6"> How do you delete a value in a map?</li>
<li class="li6">What parameters are required for getting a database connection?</li>
<li class="li6">Which <kbd>sql.Rows</kbd> class method makes it possible to read the attributes of the entity in a table?</li>
<li class="li6">What does <kbd>defer</kbd> do when a database connection is closed?</li>
<li class="li6">Which method allows the <kbd>sql.DB</kbd> class to create a prepared statement?</li>
</ol>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Further reading</h1>
                </header>
            
            <article>
                
<p class="p1"><span class="s1">To read more about arrays, maps and slices, the foll</span><span class="s1">owing links are recommended:</span></p>
<ul>
<li class="p6"><span class="s1"><span class="s4"><em>Learning Go Data Structures and Algorithms [Video]</em>, by Gustavo Chaín</span></span></li>
<li class="p6"><span class="s1"><span class="s4"><em>Mastering Go</em>, by Mihalis Tsoukalos</span></span></li>
</ul>


            </article>

            
        </section>
    </div>



  </body></html>